var radioApplet;(()=>{"use strict";var __webpack_modules__={6:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"main\": () => (/* binding */ main)\n});\n\n;// CONCATENATED MODULE: ./src/Config.ts\nconst { AppletSettings } = imports.ui.settings;\nconst createConfig = (args) => {\n    const { uuid, instanceId, onIconChanged, onIconColorPlayingChanged, onIconColorPausedChanged, onChannelOnPanelChanged, onMyStationsChanged, } = args;\n    // all settings are saved to this object\n    const settingsObject = {\n        get initialVolume() { return getInitialVolume(); }\n    };\n    const appletSettings = new AppletSettings(settingsObject, uuid, instanceId);\n    appletSettings.bind('icon-type', 'iconType', (iconType) => onIconChanged(iconType));\n    appletSettings.bind('color-on', 'symbolicIconColorWhenPlaying', (newColor) => onIconColorPlayingChanged(newColor));\n    appletSettings.bind('color-paused', 'symbolicIconColorWhenPaused', (newColor) => onIconColorPausedChanged(newColor));\n    appletSettings.bind('channel-on-panel', 'channelNameOnPanel', (channelOnPanel) => onChannelOnPanelChanged(channelOnPanel));\n    appletSettings.bind('keep-volume-between-sessions', \"keepVolume\");\n    appletSettings.bind('initial-volume', 'customInitVolume');\n    appletSettings.bind('last-volume', 'lastVolume');\n    appletSettings.bind('tree', \"userStations\", onMyStationsChanged);\n    appletSettings.bind('last-url', 'lastUrl');\n    appletSettings.bind('music-download-dir-select', 'musicDownloadDir', () => handleMusicDirChanged());\n    function getInitialVolume() {\n        const { keepVolume, lastVolume, customInitVolume } = settingsObject;\n        let initialVolume = keepVolume ? lastVolume : customInitVolume;\n        if (initialVolume == null) {\n            global.logWarning('initial Volume was null or undefined. Applying 50 as a fallback solution to prevent radio stop working');\n            initialVolume = 50;\n        }\n        return initialVolume;\n    }\n    function handleMusicDirChanged() {\n        // By Default the value is set to ~/Music/Radio but when changing to another location and back again to the default value in the settings dialog, the music dir is set to null instead of the default value again. As workaround the music dir is set programmatically to default value again if value is set to null (and the settings dialog can't be opened anymore). \n        if (settingsObject.musicDownloadDir === null) {\n            settingsObject.musicDownloadDir = \"~/Music/Radio\";\n        }\n    }\n    onIconChanged(settingsObject.iconType);\n    onIconColorPlayingChanged(settingsObject.symbolicIconColorWhenPlaying);\n    onIconColorPausedChanged(settingsObject.symbolicIconColorWhenPaused);\n    onChannelOnPanelChanged(settingsObject.channelNameOnPanel);\n    // TODO also onMyStationChanged should be called (and removed as arg from  ChannelStore)\n    return settingsObject;\n};\n\n;// CONCATENATED MODULE: ./src/ChannelStore.ts\nclass ChannelStore {\n    constructor(channelList) {\n        this.channelList = channelList;\n    }\n    set channelList(channelList) {\n        const filteredChannelList = channelList.filter(channel => channel.inc);\n        this._channelList = filteredChannelList.map(channel => {\n            return Object.assign(Object.assign({}, channel), { url: channel.url.trim() });\n        });\n        // TODO: add babel to allow the usage of flatMap!\n        // return this.channelList.flatMap(channel =>\n        //     channel.inc ? channel.url : []\n        // )\n    }\n    get activatedChannelUrls() {\n        return this._channelList.map(channel => channel.url);\n    }\n    get activatedChannelNames() {\n        return this._channelList.map(channel => channel.name);\n    }\n    // TODO: what is when two Channels have the same Name or Url? :O\n    getChannelName(channelUrl) {\n        const channel = this._channelList.find(cnl => cnl.url === channelUrl);\n        return channel ? channel.name : null;\n    }\n    getChannelUrl(channelName) {\n        const channel = this._channelList.find(cnl => cnl.name === channelName);\n        return channel ? channel.url : null;\n    }\n    checkListChanged(channelList) {\n        return JSON.stringify(channelList) === JSON.stringify(this._channelList) ?\n            false : true;\n    }\n    checkUrlValid(channelUrl) {\n        return this._channelList.some(cnl => cnl.url === channelUrl);\n    }\n}\n\n;// CONCATENATED MODULE: ./src/lib/ActivWidget.ts\nconst { KEY_space, KEY_KP_Enter, KEY_Return } = imports.gi.Clutter;\nfunction createActivWidget(args) {\n    const { widget, onActivated } = args;\n    // TODO: understand can_focus\n    widget.can_focus = true;\n    widget.reactive = true;\n    widget.track_hover = true;\n    widget.connect('button-release-event', () => onActivated === null || onActivated === void 0 ? void 0 : onActivated());\n    // TODO: This is needed because some themes (at least Adapta-Nokto but maybe also others) don't provide style for the hover pseudo class. But it would be much easier to once (and on theme changes) programmatically set the hover pseudo class equal to the active pseudo class when the hover class isn't provided by the theme. \n    widget.connect('notify::hover', () => {\n        widget.change_style_pseudo_class('active', widget.hover);\n        if (widget.hover)\n            widget.grab_key_focus();\n    });\n    widget.connect('key-press-event', (actor, event) => {\n        const symbol = event.get_key_symbol();\n        const relevantKeys = [KEY_space, KEY_KP_Enter, KEY_Return];\n        if (relevantKeys.includes(symbol) && widget.hover)\n            onActivated === null || onActivated === void 0 ? void 0 : onActivated();\n    });\n}\n\n;// CONCATENATED MODULE: ./src/lib/PopupSubMenu.ts\n\nconst { BoxLayout, Label, Icon, ScrollView } = imports.gi.St;\nconst { ActorAlign, Point } = imports.gi.Clutter;\nconst { PolicyType } = imports.gi.Gtk;\nfunction createSubMenu(args) {\n    const { text } = args;\n    const container = new BoxLayout({\n        vertical: true\n    });\n    const label = new Label({\n        text\n    });\n    const triangle = new Icon({\n        style_class: 'popup-menu-arrow',\n        icon_name: 'pan-end',\n        rotation_angle_z: 90,\n        x_expand: true,\n        x_align: ActorAlign.END,\n        pivot_point: new Point({ x: 0.5, y: 0.5 }),\n        important: true // without this, it looks ugly on Mint-X Themes\n    });\n    const toggle = new BoxLayout({\n        style_class: 'popup-menu-item popup-submenu-menu-item'\n    });\n    createActivWidget({\n        widget: toggle,\n        onActivated: toggleScrollbox\n    });\n    [label, triangle].forEach(widget => toggle.add_child(widget));\n    container.add_child(toggle);\n    const scrollbox = new ScrollView({\n        style_class: 'popup-sub-menu',\n        vscrollbar_policy: PolicyType.AUTOMATIC,\n        hscrollbar_policy: PolicyType.NEVER\n    });\n    const box = new BoxLayout({\n        vertical: true\n    });\n    function toggleScrollbox() {\n        scrollbox.visible ? closeMenu() : openMenu();\n    }\n    function openMenu() {\n        scrollbox.show();\n        triangle.rotation_angle_z = 90;\n    }\n    function closeMenu() {\n        scrollbox.hide();\n        triangle.rotation_angle_z = 0;\n    }\n    // add_child is recommended but doesn't work: https://gitlab.gnome.org/GNOME/gnome-shell/-/issues/3172\n    scrollbox.add_actor(box);\n    [toggle, scrollbox].forEach(widget => container.add_child(widget));\n    return {\n        /** the container which should be used to add it as child to a parent Actor */\n        actor: container,\n        /** the container which should be used to add children  */\n        box,\n    };\n}\n\n;// CONCATENATED MODULE: ./src/consts.ts\nvar __rest = (undefined && undefined.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nconst { get_home_dir } = imports.gi.GLib;\nconst APPLET_SITE = 'https://cinnamon-spices.linuxmint.com/applets/view/297';\nconst DEFAULT_TOOLTIP_TXT = 'Radio++';\nconst CONFIG_DIR = `${get_home_dir()}/.cinnamon/configs/${__meta.uuid}`;\nconst MPRIS_PLUGIN_PATH = CONFIG_DIR + '/.mpris.so';\nconst MPRIS_PLUGIN_URL = \"https://github.com/hoyon/mpv-mpris/releases/download/0.5/mpris.so\";\nconst MEDIA_PLAYER_2_NAME = \"org.mpris.MediaPlayer2\";\nconst MEDIA_PLAYER_2_PLAYER_NAME = \"org.mpris.MediaPlayer2.Player\";\nconst MEDIA_PLAYER_2_PATH = \"/org/mpris/MediaPlayer2\";\nconst MPV_MPRIS_BUS_NAME = `${MEDIA_PLAYER_2_NAME}.mpv`;\nconst MPV_CVC_NAME = 'mpv Media Player';\nconst MAX_STRING_LENGTH = 40;\n/** in percent */\nconst MAX_VOLUME = 100; // see https://github.com/linuxmint/cinnamon-spices-applets/issues/3402#issuecomment-756430754 for an explanation of this value\n/** in percent */\nconst VOLUME_DELTA = 5;\n// STYLE CLASSES \nconst POPUP_ICON_CLASS = 'popup-menu-icon';\nconst POPUP_MENU_ITEM_CLASS = 'popup-menu-item';\n// ICONS\nfunction getVolumeIcon(args) {\n    const { volume } = args;\n    const VOLUME_ICON_PREFIX = 'audio-volume';\n    const VOLUME_ICONS = [\n        { max: 0, name: `${VOLUME_ICON_PREFIX}-muted` },\n        { max: 33, name: `${VOLUME_ICON_PREFIX}-low` },\n        { max: 66, name: `${VOLUME_ICON_PREFIX}-medium` },\n        { max: 100, name: `${VOLUME_ICON_PREFIX}-high` },\n    ];\n    if (volume < 0 || volume > 100)\n        throw new RangeError('volume should be between 0 and 100');\n    const index = VOLUME_ICONS.findIndex((_a) => {\n        var { max } = _a, rest = __rest(_a, [\"max\"]);\n        return volume <= max;\n    });\n    return VOLUME_ICONS[index].name;\n}\nconst RADIO_SYMBOLIC_ICON_NAME = 'radioapplet';\nconst PLAYBACK_ICON_PREFIX = 'media-playback';\nconst PLAY_ICON_NAME = `${PLAYBACK_ICON_PREFIX}-start`;\nconst PAUSE_ICON_NAME = `${PLAYBACK_ICON_PREFIX}-pause`;\nconst STOP_ICON_NAME = `${PLAYBACK_ICON_PREFIX}-stop`;\nconst SONG_INFO_ICON_NAME = 'audio-x-generic';\nconst COPY_ICON_NAME = 'edit-copy';\nconst DOWNLOAD_ICON_NAME = 'south-arrow-weather-symbolic';\nconst LOADING_ICON_NAME = 'view-refresh-symbolic';\n\n;// CONCATENATED MODULE: ./src/functions/limitString.ts\nfunction limitString(text, maxCharNumber) {\n    if (!text)\n        return;\n    if (text.length <= maxCharNumber)\n        return text;\n    return [...text].slice(0, maxCharNumber - 3).join('') + '...';\n}\n\n;// CONCATENATED MODULE: ./src/lib/IconMenuItem.ts\n\n\nconst { Icon: IconMenuItem_Icon, IconType, Label: IconMenuItem_Label, BoxLayout: IconMenuItem_BoxLayout } = imports.gi.St;\nfunction createIconMenuItem(args) {\n    const { text, maxCharNumber, iconName, onActivated } = args;\n    let icon;\n    let label;\n    const container = new IconMenuItem_BoxLayout({\n        style_class: 'popup-menu-item'\n    });\n    setIconName(iconName);\n    setText(text);\n    function setIconName(name) {\n        if (icon && !name) {\n            container.remove_child(icon);\n            icon = null;\n            return;\n        }\n        if (!name)\n            return;\n        initIcon();\n        icon.icon_name = name;\n        if (container.get_child_at_index(0) !== icon)\n            container.insert_child_at_index(icon, 0);\n    }\n    function initIcon() {\n        if (!icon) {\n            icon = new IconMenuItem_Icon({\n                icon_type: IconType.SYMBOLIC,\n                style_class: 'popup-menu-icon'\n            });\n        }\n    }\n    function setText(text) {\n        const labelText = text || ' ';\n        if (!label) {\n            label = new IconMenuItem_Label();\n            container.add_child(label);\n        }\n        label.set_text(limitString(labelText, maxCharNumber));\n    }\n    onActivated && createActivWidget({ widget: container, onActivated });\n    return {\n        actor: container,\n        setIconName,\n        setText\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/ChannelList/ChannelMenuItem.ts\n\n\nfunction createChannelMenuItem(args) {\n    const { channelName, onActivated, playbackStatus } = args;\n    const playbackIconMap = new Map([\n        [\"Playing\", PLAY_ICON_NAME],\n        [\"Paused\", PAUSE_ICON_NAME],\n        [\"Loading\", LOADING_ICON_NAME],\n        [\"Stopped\", null]\n    ]);\n    const iconMenuItem = createIconMenuItem({\n        maxCharNumber: MAX_STRING_LENGTH,\n        text: channelName,\n        onActivated: () => onActivated(channelName)\n    });\n    function setPlaybackStatus(playbackStatus) {\n        const iconName = playbackIconMap.get(playbackStatus);\n        iconMenuItem.setIconName(iconName);\n    }\n    playbackStatus && setPlaybackStatus(playbackStatus);\n    return {\n        setPlaybackStatus,\n        actor: iconMenuItem.actor\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/ChannelList/ChannelList.ts\n\n\nfunction createChannelList(args) {\n    const { stationNames, onChannelClicked } = args;\n    const subMenu = createSubMenu({ text: 'My Stations' });\n    let currentChannelName;\n    let playbackStatus = 'Stopped';\n    // the channelItems are saved here to the map and to the container as on the container only the reduced name are shown. Theoretically it therefore couldn't be differentiated between two long channel names with the same first 30 (or so) characters   \n    const channelItems = new Map();\n    function setStationNames(names) {\n        channelItems.clear();\n        subMenu.box.remove_all_children();\n        names.forEach(name => {\n            const channelPlaybackstatus = (name === currentChannelName) ? playbackStatus : 'Stopped';\n            const channelItem = createChannelMenuItem({\n                channelName: name,\n                onActivated: onChannelClicked,\n                playbackStatus: channelPlaybackstatus\n            });\n            channelItems.set(name, channelItem);\n            subMenu.box.add_child(channelItem.actor);\n        });\n    }\n    function setPlaybackStatus(newStatus) {\n        playbackStatus = newStatus;\n        if (!currentChannelName)\n            return;\n        const channelMenuItem = channelItems.get(currentChannelName);\n        channelMenuItem === null || channelMenuItem === void 0 ? void 0 : channelMenuItem.setPlaybackStatus(playbackStatus);\n        if (playbackStatus === 'Stopped')\n            currentChannelName = null;\n    }\n    function setCurrentChannel(name) {\n        const currentChannelItem = channelItems.get(currentChannelName);\n        currentChannelItem === null || currentChannelItem === void 0 ? void 0 : currentChannelItem.setPlaybackStatus('Stopped');\n        if (name) {\n            const newChannelItem = channelItems.get(name);\n            if (!newChannelItem)\n                throw new Error(`No channelItem exist for ${name}`);\n            newChannelItem.setPlaybackStatus(playbackStatus);\n        }\n        currentChannelName = name;\n    }\n    setStationNames(stationNames);\n    return {\n        actor: subMenu.actor,\n        setPlaybackStatus,\n        setStationNames,\n        setCurrentChannel\n    };\n}\n\n;// CONCATENATED MODULE: ./src/mpv/MpvHandler.ts\n\nconst { getDBusProperties, getDBus, getDBusProxyWithOwner } = imports.misc.interfaces;\nconst { spawnCommandLine } = imports.misc.util;\n// see https://lazka.github.io/pgi-docs/Cvc-1.0/index.html\nconst { MixerControl } = imports.gi.Cvc;\nfunction createMpvHandler(args) {\n    const { onPlaybackstatusChanged, onUrlChanged, onVolumeChanged, onTitleChanged, onLengthChanged, onPositionChanged, checkUrlValid, lastUrl, getInitialVolume, } = args;\n    const dbus = getDBus();\n    const mediaServerPlayer = getDBusProxyWithOwner(MEDIA_PLAYER_2_PLAYER_NAME, MPV_MPRIS_BUS_NAME);\n    const mediaProps = getDBusProperties(MPV_MPRIS_BUS_NAME, MEDIA_PLAYER_2_PATH);\n    const control = new MixerControl({ name: __meta.name });\n    let cvcStream;\n    control.open();\n    control.connect('stream-added', (ctrl, id) => {\n        const addedStream = control.lookup_stream_id(id);\n        if ((addedStream === null || addedStream === void 0 ? void 0 : addedStream.name) !== MPV_CVC_NAME)\n            return;\n        cvcStream = addedStream;\n        cvcStream.connect('notify::volume', () => {\n            handleCvcVolumeChanged();\n        });\n    });\n    // When no last Url is passed and mpv is running, it is assumed that mpv is not used for the radio applet (and therefore the playbackstatus is Stopped)\n    const initialPlaybackStatus = !lastUrl ? 'Stopped' : getPlaybackStatus();\n    let currentUrl = initialPlaybackStatus !== \"Stopped\" ? lastUrl : null;\n    let currentLength = getLength(); // in seconds\n    let positionTimerId;\n    let bufferExceeded = false;\n    let mediaPropsListenerId;\n    let seekListenerId;\n    if (initialPlaybackStatus !== \"Stopped\") {\n        activateMprisPropsListener();\n        activeSeekListener();\n        onUrlChanged(currentUrl);\n        onPlaybackstatusChanged(initialPlaybackStatus);\n        onVolumeChanged(getVolume());\n        onTitleChanged(getCurrentTitle());\n        onLengthChanged(currentLength);\n        onPositionChanged(getPosition());\n        startPositionTimer();\n    }\n    const nameOwnerSignalId = dbus.connectSignal('NameOwnerChanged', (...args) => {\n        const name = args[2][0];\n        const oldOwner = args[2][1];\n        const newOwner = args[2][2];\n        if (name !== MPV_MPRIS_BUS_NAME)\n            return;\n        if (newOwner) {\n            activateMprisPropsListener();\n            activeSeekListener();\n            pauseAllOtherMediaPlayers();\n        }\n        if (oldOwner) {\n            currentLength = 0;\n            stopPositionTimer();\n            mediaProps.disconnectSignal(mediaPropsListenerId);\n            mediaServerPlayer.disconnectSignal(seekListenerId);\n            mediaPropsListenerId = seekListenerId = currentUrl = null;\n            onPlaybackstatusChanged('Stopped');\n        }\n    });\n    function deactivateAllListener() {\n        dbus.disconnectSignal(nameOwnerSignalId);\n        if (mediaPropsListenerId)\n            mediaProps === null || mediaProps === void 0 ? void 0 : mediaProps.disconnectSignal(mediaPropsListenerId);\n        if (seekListenerId)\n            mediaServerPlayer === null || mediaServerPlayer === void 0 ? void 0 : mediaServerPlayer.disconnectSignal(seekListenerId);\n    }\n    function activateMprisPropsListener() {\n        mediaPropsListenerId = mediaProps.connectSignal('PropertiesChanged', (proxy, nameOwner, [interfaceName, props]) => {\n            var _a, _b, _c, _d, _e, _f;\n            // theoretically it could be used recursiveUnpack but this doesn't work on cinnamon 20 yet (but on 20.1)\n            const metadata = (_a = props.Metadata) === null || _a === void 0 ? void 0 : _a.deep_unpack();\n            const volume = (_b = props.Volume) === null || _b === void 0 ? void 0 : _b.unpack();\n            const playbackStatus = (_c = props.PlaybackStatus) === null || _c === void 0 ? void 0 : _c.unpack();\n            //global.log(`metadata: ${JSON.stringify(props.Metadata?.recursiveUnpack())}, playbackStatus: ${playbackStatus}, volume: ${volume}`)\n            const url = (_d = metadata === null || metadata === void 0 ? void 0 : metadata['xesam:url']) === null || _d === void 0 ? void 0 : _d.unpack();\n            const title = (_e = metadata === null || metadata === void 0 ? void 0 : metadata['xesam:title']) === null || _e === void 0 ? void 0 : _e.unpack();\n            const length = (_f = metadata === null || metadata === void 0 ? void 0 : metadata[\"mpris:length\"]) === null || _f === void 0 ? void 0 : _f.unpack();\n            const newUrlValid = checkUrlValid(url);\n            const relevantEvent = newUrlValid || currentUrl;\n            if (!relevantEvent)\n                return; // happens when mpv is running with a file/stream not managed by the applet\n            if (length != null)\n                handleLengthChanged(length);\n            if (volume != null)\n                handleMprisVolumeChanged(volume);\n            playbackStatus && handleMprisPlaybackStatusChanged(playbackStatus);\n            url && newUrlValid && url !== currentUrl && handleUrlChanged(url);\n            title && handleTitleSet(title);\n        });\n    }\n    function activeSeekListener() {\n        seekListenerId = mediaServerPlayer.connectSignal('Seeked', (id, sender, value) => {\n            handlePositionChanged(microSecondsToRoundedSeconds(value));\n        });\n    }\n    /** @param length in microseconds */\n    function handleLengthChanged(length) {\n        const lengthInSeconds = microSecondsToRoundedSeconds(length);\n        onLengthChanged(lengthInSeconds);\n        const startLoading = (length === 0);\n        const finishedLoading = length !== 0 && currentLength === 0;\n        currentLength = lengthInSeconds;\n        if (startLoading) {\n            onPlaybackstatusChanged('Loading');\n        }\n        if (finishedLoading || bufferExceeded) {\n            const position = finishedLoading ? 0 : getPosition();\n            handlePositionChanged(position);\n            onPlaybackstatusChanged(getPlaybackStatus());\n            bufferExceeded = false;\n        }\n    }\n    /**  @param position in seconds! */\n    function handlePositionChanged(position) {\n        stopPositionTimer();\n        onPositionChanged(position);\n        startPositionTimer();\n    }\n    function startPositionTimer() {\n        if (getPlaybackStatus() !== 'Playing')\n            return;\n        positionTimerId = setInterval(() => {\n            const position = Math.min(getPosition(), currentLength);\n            onPositionChanged(position);\n            if (position === currentLength) {\n                onPlaybackstatusChanged('Loading');\n                bufferExceeded = true;\n                stopPositionTimer();\n            }\n        }, 1000);\n    }\n    function stopPositionTimer() {\n        if (!positionTimerId)\n            return;\n        clearInterval(positionTimerId);\n        positionTimerId = null;\n    }\n    function handleMprisPlaybackStatusChanged(playbackStatus) {\n        if (currentLength !== 0) {\n            onPlaybackstatusChanged(playbackStatus);\n            playbackStatus === 'Paused' ? stopPositionTimer()\n                : handlePositionChanged(getPosition());\n        }\n    }\n    function handleUrlChanged(newUrl) {\n        currentUrl = newUrl;\n        handleLengthChanged(0);\n        if (positionTimerId)\n            stopPositionTimer();\n        onPositionChanged(0);\n        onUrlChanged(newUrl);\n    }\n    function handleMprisVolumeChanged(mprisVolume) {\n        if (mprisVolume * 100 > MAX_VOLUME) {\n            mediaServerPlayer.Volume = MAX_VOLUME / 100;\n            return;\n        }\n        const normalizedVolume = Math.round(mprisVolume * 100);\n        setCvcVolume(normalizedVolume);\n        onVolumeChanged(normalizedVolume);\n    }\n    function handleCvcVolumeChanged() {\n        const normalizedVolume = Math.round(cvcStream.volume / control.get_vol_max_norm() * 100);\n        setMprisVolume(normalizedVolume);\n    }\n    function handleTitleSet(title) {\n        onTitleChanged(title);\n    }\n    /** @returns length in seconds */\n    function getLength() {\n        var _a, _b;\n        const lengthMicroSeconds = ((_b = (_a = mediaServerPlayer.Metadata) === null || _a === void 0 ? void 0 : _a[\"mpris:length\"]) === null || _b === void 0 ? void 0 : _b.unpack()) || 0;\n        return microSecondsToRoundedSeconds(lengthMicroSeconds);\n    }\n    /** @returns position in seconds */\n    function getPosition() {\n        if (getPlaybackStatus() === 'Stopped')\n            return 0;\n        // for some reason, this only return the right value the first time it is called. When calling this multiple times, it returns always the same value which however is wrong when radio is playing\n        // const positionMicroSeconds = mediaServerPlayer.Position\n        const positionMicroSeconds = mediaProps.GetSync('org.mpris.MediaPlayer2.Player', 'Position')[0].deep_unpack();\n        return microSecondsToRoundedSeconds(positionMicroSeconds);\n    }\n    function setUrl(url) {\n        if (getPlaybackStatus() === 'Stopped') {\n            const initialVolume = getInitialVolume();\n            if (initialVolume == null) {\n                throw new Error('initial Volume must not be undefined or null');\n            }\n            const command = `mpv --script=${MPRIS_PLUGIN_PATH} ${url} \n                --volume=${initialVolume}`;\n            spawnCommandLine(command);\n            return;\n        }\n        mediaServerPlayer.OpenUriRemote(url);\n        mediaServerPlayer.PlaySync();\n    }\n    function increaseDecreaseVolume(volumeChange) {\n        // newVolume is the current Volume plus(or minus) volumeChange \n        // but at least 0 and maximum Max_Volume\n        const newVolume = Math.min(MAX_VOLUME, Math.max(0, getVolume() + volumeChange));\n        setMprisVolume(newVolume);\n    }\n    /** @param newVolume volume in percent */\n    function setMprisVolume(newVolume) {\n        if (getVolume() === newVolume || getPlaybackStatus() === 'Stopped')\n            return;\n        mediaServerPlayer.Volume = newVolume / 100;\n    }\n    /** @param newVolume volume in percent */\n    function setCvcVolume(newVolume) {\n        const newStreamVolume = newVolume / 100 * control.get_vol_max_norm();\n        if (!cvcStream)\n            return;\n        if (cvcStream.volume === newStreamVolume)\n            return;\n        cvcStream.is_muted && cvcStream.change_is_muted(false);\n        cvcStream.volume = newStreamVolume;\n        cvcStream.push_volume();\n    }\n    function togglePlayPause() {\n        if (getPlaybackStatus() === \"Stopped\")\n            return;\n        mediaServerPlayer.PlayPauseSync();\n    }\n    function stop() {\n        if (getPlaybackStatus() === \"Stopped\")\n            return;\n        mediaServerPlayer.StopSync();\n    }\n    function getCurrentTitle() {\n        if (getPlaybackStatus() === \"Stopped\")\n            return;\n        return mediaServerPlayer.Metadata[\"xesam:title\"].unpack();\n    }\n    /**\n     * pauses all MediaPlayers with MPRIS Support except mpv\n     */\n    function pauseAllOtherMediaPlayers() {\n        dbus.ListNamesSync()[0].forEach(busName => {\n            if (!busName.includes(MEDIA_PLAYER_2_NAME) || busName === MPV_MPRIS_BUS_NAME)\n                return;\n            const nonMpvMediaServerPlayer = getDBusProxyWithOwner(MEDIA_PLAYER_2_PLAYER_NAME, busName);\n            nonMpvMediaServerPlayer.PauseSync();\n        });\n    }\n    function getPlaybackStatus() {\n        // this is necessary because when a user stops mpv and afterwards start vlc (or maybe also an other media player), mediaServerPlayer.PlaybackStatus wrongly returns \"Playing\"  \n        const mpvRunning = dbus.ListNamesSync()[0].includes(MPV_MPRIS_BUS_NAME);\n        return mpvRunning ? mediaServerPlayer.PlaybackStatus : 'Stopped';\n    }\n    function getVolume() {\n        if (getPlaybackStatus() === 'Stopped')\n            return null;\n        return Math.round(mediaServerPlayer.Volume * 100);\n    }\n    function microSecondsToRoundedSeconds(microSeconds) {\n        const seconds = microSeconds / 1000000;\n        const secondsRounded = Math.round(seconds);\n        return secondsRounded;\n    }\n    /** @param newPosition in seconds */\n    function setPosition(newPosition) {\n        const positioninMicroSeconds = Math.min(newPosition * 1000000, currentLength * 1000000);\n        const trackId = mediaServerPlayer.Metadata['mpris:trackid'].unpack();\n        mediaServerPlayer === null || mediaServerPlayer === void 0 ? void 0 : mediaServerPlayer.SetPositionRemote(trackId, positioninMicroSeconds);\n    }\n    return {\n        increaseDecreaseVolume,\n        setVolume: setMprisVolume,\n        setUrl,\n        togglePlayPause,\n        stop,\n        getCurrentTitle,\n        setPosition,\n        deactivateAllListener,\n        // it is very confusing but dbus must be returned!\n        // Otherwilse all listeners stop working after about 20 seconds which is fucking difficult to debug\n        dbus\n    };\n}\n\n;// CONCATENATED MODULE: ./src/lib/Slider.ts\nconst { DrawingArea } = imports.gi.St;\nconst { cairo_set_source_color, grab_pointer, ungrab_pointer } = imports.gi.Clutter;\nfunction createSlider(args) {\n    const style_class = 'popup-slider-menu-item';\n    const { initialValue, onValueChanged } = args;\n    let value;\n    if (initialValue)\n        value = limitToMinMax(initialValue);\n    const drawing = new DrawingArea({\n        style_class,\n        reactive: true,\n        x_expand: true\n    });\n    drawing.connect('repaint', () => {\n        const cr = drawing.get_context();\n        const themeNode = drawing.get_theme_node();\n        const [width, height] = drawing.get_surface_size();\n        const handleRadius = themeNode.get_length('-slider-handle-radius');\n        const sliderHeight = themeNode.get_length('-slider-height');\n        const sliderBorderWidth = themeNode.get_length('-slider-border-width');\n        const sliderBorderRadius = Math.min(width, sliderHeight) / 2;\n        const sliderBorderColor = themeNode.get_color('-slider-border-color');\n        const sliderColor = themeNode.get_color('-slider-background-color');\n        const sliderActiveBorderColor = themeNode.get_color('-slider-active-border-color');\n        const sliderActiveColor = themeNode.get_color('-slider-active-background-color');\n        const TAU = Math.PI * 2;\n        const handleX = handleRadius + (width - 2 * handleRadius) * value;\n        cr.arc(sliderBorderRadius + sliderBorderWidth, height / 2, sliderBorderRadius, TAU * 1 / 4, TAU * 3 / 4);\n        cr.lineTo(handleX, (height - sliderHeight) / 2);\n        cr.lineTo(handleX, (height + sliderHeight) / 2);\n        cr.lineTo(sliderBorderRadius + sliderBorderWidth, (height + sliderHeight) / 2);\n        cairo_set_source_color(cr, sliderActiveColor);\n        cr.fillPreserve();\n        cairo_set_source_color(cr, sliderActiveBorderColor);\n        cr.setLineWidth(sliderBorderWidth);\n        cr.stroke();\n        cr.arc(width - sliderBorderRadius - sliderBorderWidth, height / 2, sliderBorderRadius, TAU * 3 / 4, TAU * 1 / 4);\n        cr.lineTo(handleX, (height + sliderHeight) / 2);\n        cr.lineTo(handleX, (height - sliderHeight) / 2);\n        cr.lineTo(width - sliderBorderRadius - sliderBorderWidth, (height - sliderHeight) / 2);\n        cairo_set_source_color(cr, sliderColor);\n        cr.fillPreserve();\n        cairo_set_source_color(cr, sliderBorderColor);\n        cr.setLineWidth(sliderBorderWidth);\n        cr.stroke();\n        const handleY = height / 2;\n        const color = themeNode.get_foreground_color();\n        cairo_set_source_color(cr, color);\n        cr.arc(handleX, handleY, handleRadius, 0, 2 * Math.PI);\n        cr.fill();\n        cr.$dispose();\n    });\n    drawing.connect('button-press-event', (actor, event) => {\n        grab_pointer(drawing);\n        const motionId = drawing.connect('motion-event', (actor, event) => {\n            moveHandle(event);\n        });\n        const buttonReleaseId = drawing.connect('button-release-event', () => {\n            drawing.disconnect(buttonReleaseId);\n            drawing.disconnect(motionId);\n            ungrab_pointer();\n        });\n        moveHandle(event);\n    });\n    function moveHandle(event) {\n        const [absX, absY] = event.get_coords();\n        const [sliderX, sliderY] = drawing.get_transformed_position();\n        const relX = absX - sliderX;\n        const width = drawing.width;\n        const handleRadius = drawing.get_theme_node().get_length('-slider-handle-radius');\n        const newValue = (relX - handleRadius) / (width - 2 * handleRadius);\n        const newValueLimitToMinMax = limitToMinMax(newValue);\n        setValue(newValueLimitToMinMax);\n    }\n    function limitToMinMax(value) {\n        return Math.max(Math.min(value, 1), 0);\n    }\n    function setValue(newValue, silent = false) {\n        const correctedValue = limitToMinMax(newValue);\n        if (correctedValue === value)\n            return;\n        value = correctedValue;\n        if (!silent)\n            onValueChanged === null || onValueChanged === void 0 ? void 0 : onValueChanged(value);\n        drawing.queue_repaint();\n    }\n    function getValue() {\n        return value;\n    }\n    return {\n        actor: drawing,\n        setValue,\n        getValue\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/VolumeSlider.ts\n\n\n\nconst { BoxLayout: VolumeSlider_BoxLayout, Icon: VolumeSlider_Icon, IconType: VolumeSlider_IconType } = imports.gi.St;\nconst { Tooltip } = imports.ui.tooltips;\nconst { KEY_Right, KEY_Left, ScrollDirection } = imports.gi.Clutter;\nfunction createVolumeSlider(args) {\n    const { onVolumeChanged } = args;\n    let tooltip;\n    const container = new VolumeSlider_BoxLayout({\n        style_class: POPUP_MENU_ITEM_CLASS,\n    });\n    createActivWidget({\n        widget: container\n    });\n    /** in Percent and rounded! */\n    let volume;\n    const slider = createSlider({\n        onValueChanged: handleSliderValueChanged\n    });\n    const icon = new VolumeSlider_Icon({\n        icon_type: VolumeSlider_IconType.SYMBOLIC,\n        style_class: POPUP_ICON_CLASS,\n        reactive: true\n    });\n    [icon, slider.actor].forEach(widget => {\n        container.add_child(widget);\n    });\n    container.connect('key-press-event', (actor, event) => {\n        const key = event.get_key_symbol();\n        if (key === KEY_Right || key === KEY_Left) {\n            const direction = (key === KEY_Right) ? 'increase' : 'decrease';\n            deltaChange(direction);\n        }\n    });\n    container.connect('scroll-event', (actor, event) => {\n        const scrollDirection = event.get_scroll_direction();\n        const direction = (scrollDirection === ScrollDirection.UP) ? 'increase' : 'decrease';\n        deltaChange(direction);\n    });\n    icon.connect('button-press-event', () => {\n        slider.setValue(0);\n    });\n    /**\n     *\n     * @param newValue between 0 and 1\n     */\n    function handleSliderValueChanged(newValue) {\n        updateVolume(newValue * 100, true);\n    }\n    function deltaChange(direction) {\n        const delta = (direction === 'increase') ? VOLUME_DELTA : -VOLUME_DELTA;\n        const newValue = slider.getValue() + delta / 100;\n        slider.setValue(newValue);\n    }\n    /**\n     *\n     * @param newVolume in percent but doesn't need to be rounded\n     * @param showTooltip\n     */\n    function updateVolume(newVolume, showTooltip) {\n        const newVolumeRounded = Math.round(newVolume);\n        if (newVolumeRounded === volume)\n            return;\n        volume = newVolumeRounded;\n        slider.setValue(volume / 100);\n        icon.set_icon_name(getVolumeIcon({ volume }));\n        setTooltip(volume);\n        showTooltip && tooltip.show();\n        onVolumeChanged === null || onVolumeChanged === void 0 ? void 0 : onVolumeChanged(volume);\n    }\n    /**\n     *\n     * @param volume in Percent and rounded!\n     */\n    function setTooltip(volume) {\n        if (!tooltip)\n            tooltip = new Tooltip(slider.actor, ' ');\n        tooltip.set_text(`Volume: ${volume.toString()} %`);\n    }\n    /**\n     *\n     * @param newVolume in percent (0-100)\n     */\n    function setVolume(newVolume) {\n        updateVolume(newVolume, false);\n    }\n    return {\n        actor: container,\n        setVolume\n    };\n}\n\n;// CONCATENATED MODULE: ./src/lib/PopupMenu.ts\nconst { BoxLayout: PopupMenu_BoxLayout, Bin, Side } = imports.gi.St;\nconst { uiGroup, layoutManager, panelManager, pushModal, popModal } = imports.ui.main;\nconst { KEY_Escape } = imports.gi.Clutter;\nconst { util_get_transformed_allocation } = imports.gi.Cinnamon;\nconst { PanelLoc } = imports.ui.popupMenu;\nfunction createPopupMenu(args) {\n    const { launcher } = args;\n    const box = new PopupMenu_BoxLayout({\n        style_class: 'popup-menu-content',\n        vertical: true,\n        visible: false,\n    });\n    // only for styling purposes\n    const bin = new Bin({\n        style_class: 'menu',\n        child: box,\n        visible: false\n    });\n    uiGroup.add_child(bin);\n    box.connect('key-press-event', (actor, event) => {\n        event.get_key_symbol() === KEY_Escape && close();\n    });\n    launcher.connect('queue-relayout', () => {\n        if (!box.visible)\n            return;\n        setTimeout(() => {\n            setLayout();\n        }, 0);\n    });\n    bin.connect('queue-relayout', () => {\n        if (!box.visible)\n            return;\n        setTimeout(() => {\n            setLayout();\n        }, 0);\n    });\n    function setLayout() {\n        const freeSpace = calculateFreeSpace();\n        const maxHeight = calculateMaxHeight(freeSpace);\n        box.style = `max-height: ${maxHeight}px;`;\n        const [xPos, yPos] = calculatePosition(maxHeight, freeSpace);\n        // Without Math.floor, the popup menu gets for some reason blurred on some themes (e.g. Adapta Nokto)!\n        bin.set_position(Math.floor(xPos), Math.floor(yPos));\n    }\n    function calculateFreeSpace() {\n        var _a, _b, _c, _d;\n        const monitor = layoutManager.findMonitorForActor(launcher);\n        const visiblePanels = panelManager.getPanelsInMonitor(monitor.index);\n        const panelSizes = new Map(visiblePanels.map(panel => {\n            let width = 0, height = 0;\n            if (panel.getIsVisible()) {\n                width = panel.actor.width;\n                height = panel.actor.height;\n            }\n            return [panel.panelPosition, { width, height }];\n        }));\n        return {\n            left: monitor.x + (((_a = panelSizes.get(PanelLoc.left)) === null || _a === void 0 ? void 0 : _a.width) || 0),\n            bottom: monitor.y + monitor.height - (((_b = panelSizes.get(PanelLoc.bottom)) === null || _b === void 0 ? void 0 : _b.height) || 0),\n            top: monitor.y + (((_c = panelSizes.get(PanelLoc.top)) === null || _c === void 0 ? void 0 : _c.height) || 0),\n            right: monitor.x + monitor.width - (((_d = panelSizes.get(PanelLoc.right)) === null || _d === void 0 ? void 0 : _d.width) || 0)\n        };\n    }\n    function calculateMaxHeight(freeSpace) {\n        const freeSpaceHeight = (freeSpace.bottom - freeSpace.top) / global.ui_scale;\n        const boxThemeNode = box.get_theme_node();\n        const binThemeNode = bin.get_theme_node();\n        const paddingTop = boxThemeNode.get_padding(Side.TOP);\n        const paddingBottom = boxThemeNode.get_padding(Side.BOTTOM);\n        const borderWidthTop = binThemeNode.get_border_width(Side.TOP);\n        const borderWidthBottom = binThemeNode.get_border_width(Side.BOTTOM);\n        const maxHeight = freeSpaceHeight - paddingBottom - paddingTop - borderWidthTop - borderWidthBottom;\n        return maxHeight;\n    }\n    function calculatePosition(maxHeight, freeSpace) {\n        const appletBox = util_get_transformed_allocation(launcher);\n        const [minWidth, minHeight, natWidth, natHeight] = box.get_preferred_size();\n        const margin = (natWidth - appletBox.get_width()) / 2;\n        const xLeftNormal = Math.max(freeSpace.left, appletBox.x1 - margin);\n        const xRightNormal = appletBox.x2 + margin;\n        const xLeftMax = freeSpace.right - appletBox.get_width() - margin * 2;\n        const xLeft = (xRightNormal < freeSpace.right) ? xLeftNormal : xLeftMax;\n        const yTopNormal = Math.max(appletBox.y1, freeSpace.top);\n        const yBottomNormal = yTopNormal + natHeight;\n        const yTopMax = freeSpace.bottom - box.height;\n        const yTop = (yBottomNormal < freeSpace.bottom) ? yTopNormal : yTopMax;\n        return [xLeft, yTop];\n    }\n    function toggle() {\n        box.visible ? close() : open();\n    }\n    // no idea why it sometimes needs to be bin and sometimes box ...\n    function open() {\n        setLayout();\n        bin.show();\n        box.show();\n        launcher.add_style_pseudo_class('checked');\n        pushModal(box);\n        // For some reason, it is emmited the button-press event when clicking e.g on the desktop but the button-release-event when clicking on another applet\n        global.stage.connect('button-press-event', handleClick);\n        global.stage.connect('button-release-event', handleClick);\n    }\n    function close() {\n        if (!box.visible)\n            return;\n        bin.hide();\n        box.hide();\n        launcher.remove_style_pseudo_class('checked');\n        popModal(box);\n    }\n    function handleClick(actor, event) {\n        if (!box.visible) {\n            return;\n        }\n        const clickedActor = event.get_source();\n        const binClicked = box.contains(clickedActor);\n        const appletClicked = launcher.contains(clickedActor);\n        (!binClicked && !appletClicked) && close();\n    }\n    box.toggle = toggle;\n    box.close = close;\n    return box;\n}\n\n;// CONCATENATED MODULE: ./src/lib/PopupSeperator.ts\nconst { BoxLayout: PopupSeperator_BoxLayout, DrawingArea: PopupSeperator_DrawingArea } = imports.gi.St;\nconst { LinearGradient } = imports.gi.cairo;\nfunction createSeparatorMenuItem() {\n    const container = new PopupSeperator_BoxLayout({\n        style_class: 'popup-menu-item'\n    });\n    const drawingArea = new PopupSeperator_DrawingArea({\n        style_class: 'popup-separator-menu-item',\n        x_expand: true\n    });\n    container.add_child(drawingArea);\n    drawingArea.connect('repaint', () => {\n        const cr = drawingArea.get_context();\n        const themeNode = drawingArea.get_theme_node();\n        const [width, height] = drawingArea.get_surface_size();\n        const margin = themeNode.get_length('-margin-horizontal');\n        const gradientHeight = themeNode.get_length('-gradient-height');\n        const startColor = themeNode.get_color('-gradient-start');\n        const endColor = themeNode.get_color('-gradient-end');\n        const gradientWidth = (width - margin * 2);\n        const gradientOffset = (height - gradientHeight) / 2;\n        const pattern = new LinearGradient(margin, gradientOffset, width - margin, gradientOffset + gradientHeight);\n        // TODO\n        // const colors = ['red', 'green', 'blue', 'alpha'].map(color => startColor[color] / 255)\n        // https://github.com/microsoft/TypeScript/issues/4130#issuecomment-499525897\n        pattern.addColorStopRGBA(0, startColor.red / 255, startColor.green / 255, startColor.blue / 255, startColor.alpha / 255);\n        pattern.addColorStopRGBA(0.5, endColor.red / 255, endColor.green / 255, endColor.blue / 255, endColor.alpha / 255);\n        pattern.addColorStopRGBA(1, startColor.red / 255, startColor.green / 255, startColor.blue / 255, startColor.alpha / 255);\n        cr.setSource(pattern);\n        cr.rectangle(margin, gradientOffset, gradientWidth, gradientHeight);\n        cr.fill();\n        cr.$dispose;\n    });\n    return container;\n}\n\n;// CONCATENATED MODULE: ./src/ui/Toolbar/MediaControlToolbar.ts\nconst { BoxLayout: MediaControlToolbar_BoxLayout } = imports.gi.St;\nconst { ActorAlign: MediaControlToolbar_ActorAlign } = imports.gi.Clutter;\nconst createMediaControlToolbar = (args) => {\n    const { controlBtns } = args;\n    const toolbar = new MediaControlToolbar_BoxLayout({\n        style_class: \"radio-applet-media-control-toolbar\",\n        x_align: MediaControlToolbar_ActorAlign.CENTER\n    });\n    controlBtns.forEach(btn => toolbar.add_child(btn));\n    return toolbar;\n};\n\n;// CONCATENATED MODULE: ./src/ui/Toolbar/ControlBtn.ts\n\nconst { Button, Icon: ControlBtn_Icon, IconType: ControlBtn_IconType } = imports.gi.St;\nconst { Tooltip: ControlBtn_Tooltip } = imports.ui.tooltips;\nfunction createControlBtn(args) {\n    const { iconName, tooltipTxt, onClick } = args;\n    const icon = new ControlBtn_Icon({\n        icon_type: ControlBtn_IconType.SYMBOLIC,\n        icon_name: iconName,\n        style_class: 'popup-menu-icon' // this specifies the icon-size\n    });\n    const btn = new Button({\n        reactive: true,\n        can_focus: true,\n        // It is challenging to get a reasonable style on all themes. I have tried using the 'sound-player-overlay' class but didn't get it working. However might be possible anyway.  \n        style_class: \"popup-menu-item\",\n        style: \"width:20px; padding:10px!important\",\n        child: icon\n    });\n    createActivWidget({\n        widget: btn,\n        onActivated: onClick\n    });\n    const tooltip = new ControlBtn_Tooltip(btn, tooltipTxt);\n    return {\n        actor: btn,\n        icon,\n        tooltip\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/Toolbar/PlayPauseButton.ts\n\n\nfunction createPlayPauseButton(args) {\n    const { onClick } = args;\n    const controlBtn = createControlBtn({\n        iconName: PLAY_ICON_NAME,\n        tooltipTxt: 'Play',\n        onClick\n    });\n    /**\n     *\n     * @param playPause he current state of the radio, which means that the opposite is shown (e.g. when the radio is playing, it is shown a pause item)\n     *\n     */\n    function setPlaybackStatus(playPause) {\n        let tooltipTxt;\n        let iconName;\n        if (playPause === 'Playing') {\n            tooltipTxt = 'Pause';\n            iconName = PAUSE_ICON_NAME;\n        }\n        if (playPause === 'Paused') {\n            tooltipTxt = 'Play';\n            iconName = PLAY_ICON_NAME;\n        }\n        controlBtn.tooltip.set_text(tooltipTxt);\n        controlBtn.icon.icon_name = iconName;\n    }\n    return {\n        actor: controlBtn.actor,\n        setPlaybackStatus\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/Toolbar/StopButton.ts\n\n\nfunction createStopBtn(args) {\n    const { onClick } = args;\n    const stopBtn = createControlBtn({\n        iconName: STOP_ICON_NAME,\n        tooltipTxt: \"Stop\",\n        onClick\n    });\n    return {\n        actor: stopBtn.actor\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/InfoSection.ts\n\n\nconst { BoxLayout: InfoSection_BoxLayout } = imports.gi.St;\nfunction createInfoSection() {\n    const channelInfoItem = createInfoItem(RADIO_SYMBOLIC_ICON_NAME);\n    const songInfoItem = createInfoItem(SONG_INFO_ICON_NAME);\n    const infoSection = new InfoSection_BoxLayout({\n        vertical: true\n    });\n    [channelInfoItem, songInfoItem].forEach(infoItem => {\n        infoSection.add_child(infoItem.actor);\n    });\n    function createInfoItem(iconName) {\n        const iconMenuItem = createIconMenuItem({\n            iconName,\n            maxCharNumber: MAX_STRING_LENGTH,\n        });\n        return iconMenuItem;\n    }\n    function setChannel(channeName) {\n        channelInfoItem.setText(channeName);\n    }\n    function setSongTitle(songTitle) {\n        songInfoItem.setText(songTitle);\n    }\n    return {\n        actor: infoSection,\n        setSongTitle,\n        setChannel\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/Toolbar/DownloadButton.ts\n\n\nfunction createDownloadButton(args) {\n    const { onClick } = args;\n    const downloadButton = createControlBtn({\n        iconName: DOWNLOAD_ICON_NAME,\n        tooltipTxt: \"Download current song from Youtube\",\n        onClick\n    });\n    return {\n        actor: downloadButton.actor\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/Toolbar/CopyButton.ts\n\n\nfunction createCopyButton(args) {\n    const { onClick } = args;\n    const defaultTooltipTxt = \"Copy current song title to Clipboard\";\n    const controlBtn = createControlBtn({\n        iconName: COPY_ICON_NAME,\n        tooltipTxt: defaultTooltipTxt,\n        onClick: handleClick\n    });\n    function handleClick() {\n        controlBtn.tooltip.show();\n        onClick();\n        // showCopyInTooltip()\n    }\n    // For some reasons I don't understand, this function has stopped working after refactoring the popup Menu. No idea how to debug this. Therefore deactivating this for now :-(. It is thrown an  warning when clicking on the button but this has nothing to do with the tooltip\n    function showCopyInTooltip() {\n        const tooltip = controlBtn.tooltip;\n        tooltip.set_text(\"Copied\");\n        tooltip.show();\n        setTimeout(() => {\n            tooltip.hide();\n            tooltip.set_text(defaultTooltipTxt);\n        }, 500);\n    }\n    return {\n        actor: controlBtn.actor,\n    };\n}\n\n;// CONCATENATED MODULE: ./src/functions/downloadFromYoutube.ts\nconst { spawnCommandLineAsyncIO } = imports.misc.util;\nconst { get_home_dir: downloadFromYoutube_get_home_dir } = imports.gi.GLib;\nfunction downloadSongFromYoutube(args) {\n    const { title, downloadDir, onDownloadFinished, onDownloadFailed } = args;\n    let hasBeenCancelled = false;\n    // when using the default value of the settings, the dir starts with ~ what can't be understand when executing command. Else it starts with file:// what youtube-dl can't handle. Saving to network directories (e.g. ftp) doesn't work \n    // TODO: Shouldn't this be done in configs(at least replacing ~)? \n    const music_dir_absolut = downloadDir.replace('~', downloadFromYoutube_get_home_dir()).replace('file://', '');\n    const downloadCommand = `\n        youtube-dl --output \"${music_dir_absolut}/%(title)s.%(ext)s\" --extract-audio --audio-format mp3 ytsearch1:\"${title.replace('\"', '\\\"')}\" --add-metadata --embed-thumbnail`;\n    const process = spawnCommandLineAsyncIO(downloadCommand, (stdout, stderr) => {\n        try {\n            if (hasBeenCancelled) {\n                hasBeenCancelled = false;\n                return;\n            }\n            if (stderr)\n                throw new Error(stderr);\n            if (stdout) {\n                const downloadPath = getDownloadPath(stdout);\n                if (!downloadPath)\n                    throw new Error('File not saved');\n                onDownloadFinished(downloadPath);\n            }\n        }\n        catch (error) {\n            global.logError(`The following error occured at youtube download attempt: ${error}. The used download Command was: ${downloadCommand}`);\n            onDownloadFailed();\n        }\n    });\n    function cancel() {\n        hasBeenCancelled = true;\n        // it seems to be no problem to call this after the process has already finished\n        process.force_exit();\n    }\n    return { cancel };\n}\nfunction getDownloadPath(stdout) {\n    const arrayOfLines = stdout.match(/[^\\r\\n]+/g);\n    // there is only one line in stdout which gives the path of the downloaded mp3. This start with [ffmpeg] Destination ...\n    const searchString = '[ffmpeg] Destination: ';\n    return arrayOfLines.find(line => line.includes(searchString))\n        .split(searchString)[1];\n}\n\n;// CONCATENATED MODULE: ./src/functions/promiseHelpers.ts\nconst { spawnCommandLineAsyncIO: promiseHelpers_spawnCommandLineAsyncIO } = imports.misc.util;\nconst spawnCommandLinePromise = function (command) {\n    return new Promise((resolve, reject) => {\n        promiseHelpers_spawnCommandLineAsyncIO(command, (stdout, stderr, exitCode) => {\n            (stdout) ? resolve([null, stdout, 0]) : resolve([stderr, null, exitCode]);\n        });\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ui/Notifications/NotificationBase.ts\nconst { SystemNotificationSource, Notification } = imports.ui.messageTray;\nconst { messageTray } = imports.ui.main;\nconst { Icon: NotificationBase_Icon, IconType: NotificationBase_IconType } = imports.gi.St;\n\nconst messageSource = new SystemNotificationSource('Radio Applet');\nmessageTray.add(messageSource);\nfunction createBasicNotification(args) {\n    const { notificationText, isMarkup = false, transient = true } = args;\n    const icon = new NotificationBase_Icon({\n        icon_type: NotificationBase_IconType.SYMBOLIC,\n        icon_name: RADIO_SYMBOLIC_ICON_NAME,\n        icon_size: 25\n    });\n    const notification = new Notification(messageSource, __meta.name, notificationText, { icon, bodyMarkup: isMarkup });\n    notification.setTransient(transient);\n    notification.notify = () => {\n        messageSource.notify(notification);\n    };\n    return notification;\n}\n\n;// CONCATENATED MODULE: ./src/ui/Notifications/GenericNotification.ts\n\nfunction notify(args) {\n    const { text } = args;\n    const notification = createBasicNotification({\n        notificationText: text\n    });\n    notification.notify();\n}\n\n;// CONCATENATED MODULE: ./src/mpv/CheckInstallation.ts\n\n\n\nconst { find_program_in_path, file_test, FileTest } = imports.gi.GLib;\nasync function installMpvWithMpris() {\n    const mprisPluginDownloaded = checkMprisPluginDownloaded();\n    const mpvInstalled = checkMpvInstalled();\n    !mprisPluginDownloaded && await downloadMrisPluginInteractive();\n    if (!mpvInstalled) {\n        const notificationText = `Please ${mprisPluginDownloaded ? '' : 'also'} install the mpv package.`;\n        notify({ text: notificationText });\n        await installMpvInteractive();\n    }\n}\nfunction checkMpvInstalled() {\n    return find_program_in_path('mpv');\n}\nfunction checkMprisPluginDownloaded() {\n    return file_test(MPRIS_PLUGIN_PATH, FileTest.IS_REGULAR);\n}\nfunction installMpvInteractive() {\n    return new Promise(async (resolve, reject) => {\n        if (checkMpvInstalled())\n            return resolve();\n        if (!find_program_in_path(\"apturl\"))\n            return reject();\n        const [stderr, stdout, exitCode] = await spawnCommandLinePromise(`\n            apturl apt://mpv`);\n        // exitCode 0 means sucessfully. See: man apturl\n        return (exitCode === 0) ? resolve() : reject(stderr);\n    });\n}\nfunction downloadMrisPluginInteractive() {\n    return new Promise(async (resolve, reject) => {\n        if (checkMprisPluginDownloaded()) {\n            return resolve();\n        }\n        let [stderr, stdout, exitCode] = await spawnCommandLinePromise(`python3  ${__meta.path}/download-dialog-mpris.py`);\n        if (stdout.trim() !== 'Continue') {\n            return reject();\n        }\n        [stderr, stdout, exitCode] = await spawnCommandLinePromise(`\n            wget ${MPRIS_PLUGIN_URL} -O ${MPRIS_PLUGIN_PATH}`);\n        // Wget always prints to stderr - exitcode 0 means it was sucessfull \n        // see:  https://stackoverflow.com/questions/13066518/why-does-wget-output-to-stderr-rather-than-stdout\n        // and https://www.gnu.org/software/wget/manual/html_node/Exit-Status.html\n        return (exitCode === 0) ? resolve() : reject(stderr);\n    });\n}\n\n;// CONCATENATED MODULE: ./src/functions/copyText.ts\nconst { Clipboard, ClipboardType } = imports.gi.St;\nfunction copyText(text) {\n    Clipboard.get_default().set_text(ClipboardType.CLIPBOARD, text);\n}\n\n;// CONCATENATED MODULE: ./src/ui/Applet/Applet.ts\nconst { Applet, AllowedLayout } = imports.ui.applet;\nconst { Bin: Applet_Bin } = imports.gi.St;\nconst { EventType } = imports.gi.Clutter;\nfunction createApplet(args) {\n    const { orientation, panelHeight, instanceId, icon, label, onClick, onScroll, onMiddleClick, onAppletMoved, onAppletRemoved, onRightClick } = args;\n    const applet = new Applet(orientation, panelHeight, instanceId);\n    let appletReloaded = false;\n    [icon, label].forEach(widget => {\n        applet.actor.add_child(widget);\n    });\n    applet.on_applet_clicked = onClick;\n    applet.on_applet_middle_clicked = onMiddleClick;\n    applet.setAllowedLayout(AllowedLayout.BOTH);\n    applet.on_applet_reloaded = function () {\n        appletReloaded = true;\n    };\n    applet.on_applet_removed_from_panel = function () {\n        appletReloaded ? onAppletMoved() : onAppletRemoved();\n        appletReloaded = false;\n    };\n    applet.actor.connect('event', (actor, event) => {\n        if (event.type() !== EventType.BUTTON_PRESS)\n            return;\n        if (event.get_button() === 3) {\n            onRightClick();\n        }\n    });\n    applet.actor.connect('scroll-event', (actor, event) => {\n        onScroll(event.get_scroll_direction());\n    });\n    return applet;\n}\n\n;// CONCATENATED MODULE: ./src/ui/Applet/AppletIcon.ts\n\nconst { Icon: AppletIcon_Icon, IconType: AppletIcon_IconType } = imports.gi.St;\nconst { IconType: IconTypeEnum } = imports.gi.St;\nfunction createAppletIcon(args) {\n    const { panel, locationLabel } = args;\n    let playbackStatus;\n    const playbackStatusStyleMap = new Map([\n        ['Stopped', ' '],\n        ['Loading', ' ']\n    ]);\n    const icon = new AppletIcon_Icon({});\n    let normalIconType;\n    // the icon type passed from outside is overriten when the playbackstatus is 'loading' \n    function setIconTypeInternal(iconTypeEnum, iconName) {\n        icon.style_class = iconTypeEnum === IconTypeEnum.SYMBOLIC ?\n            'system-status-icon' : 'applet-icon';\n        icon.icon_name = iconName;\n        icon.icon_type = iconTypeEnum;\n        icon.icon_size = panel.getPanelZoneIconSize(locationLabel, iconTypeEnum);\n    }\n    function setIconType(iconType) {\n        if (!iconType)\n            return;\n        let iconTypeEnum;\n        let iconName;\n        normalIconType = iconType;\n        if (iconType === 'SYMBOLIC') {\n            iconName = RADIO_SYMBOLIC_ICON_NAME;\n            iconTypeEnum = IconTypeEnum.SYMBOLIC;\n        }\n        else {\n            iconName = `radioapplet-${iconType.toLowerCase()}`;\n            iconTypeEnum = IconTypeEnum.FULLCOLOR;\n        }\n        setIconTypeInternal(iconTypeEnum, iconName);\n    }\n    function updateIconSize() {\n        const iconSize = panel.getPanelZoneIconSize(locationLabel, icon.icon_type);\n        icon.icon_size = iconSize;\n    }\n    function setColorWhenPaused(color) {\n        playbackStatusStyleMap.set('Paused', `color: ${color}`);\n        if (playbackStatus)\n            setPlaybackStatus(playbackStatus);\n    }\n    function setColorWhenPlaying(color) {\n        playbackStatusStyleMap.set('Playing', `color: ${color}`);\n        if (playbackStatus)\n            setPlaybackStatus(playbackStatus);\n    }\n    function setPlaybackStatus(newPlaybackStatus) {\n        playbackStatus = newPlaybackStatus;\n        const style = playbackStatusStyleMap.get(playbackStatus);\n        if (newPlaybackStatus === 'Loading') {\n            setIconTypeInternal(IconTypeEnum.SYMBOLIC, LOADING_ICON_NAME);\n        }\n        else {\n            setIconType(normalIconType);\n        }\n        if (!style)\n            return;\n        icon.set_style(style);\n    }\n    return {\n        actor: icon,\n        setPlaybackStatus,\n        setColorWhenPlaying,\n        setColorWhenPaused,\n        setIconType,\n        updateIconSize\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/Applet/AppletLabel.ts\nconst { Label: AppletLabel_Label } = imports.gi.St;\nconst { EllipsizeMode } = imports.gi.Pango;\nconst { ActorAlign: AppletLabel_ActorAlign } = imports.gi.Clutter;\nfunction createAppletLabel() {\n    const label = new AppletLabel_Label({\n        reactive: true,\n        track_hover: true,\n        style_class: 'applet-label',\n        y_align: AppletLabel_ActorAlign.CENTER,\n        y_expand: false,\n        visible: false\n    });\n    // No idea why needed but without the label is not shown \n    label.clutter_text.ellipsize = EllipsizeMode.NONE;\n    let visible;\n    let text;\n    /**\n     *\n     * @param newValue text to show on the label. The text however is only visible in the GUI when visible is true. It is also shown no text when passing null for text but in that case the text is shown again when calling this function again with a string (i.e this function is intended to be used with null when the text shall only temporarily be hidden)\n     *\n     */\n    function setText(newValue) {\n        text = newValue;\n        if (!visible)\n            return;\n        label.show();\n        newValue ? label.text = ` ${newValue}` : label.hide();\n    }\n    function setVisibility(newValue) {\n        visible = newValue;\n        if (text)\n            label.visible = newValue;\n        if (visible && text)\n            setText(text);\n    }\n    return {\n        actor: label,\n        setVisibility,\n        setText,\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/Applet/AppletTooltip.ts\n\nconst { PanelItemTooltip } = imports.ui.tooltips;\nfunction createAppletTooltip(args) {\n    const { orientation, applet } = args;\n    const tooltip = new PanelItemTooltip(applet, null, orientation);\n    function setVolume(volume) {\n        if (volume == null) {\n            tooltip.set_text(DEFAULT_TOOLTIP_TXT);\n            return;\n        }\n        tooltip.set_text(`Volume: ${volume.toString()} %`);\n    }\n    return {\n        setVolume\n    };\n}\n\n;// CONCATENATED MODULE: ./src/ui/Notifications/YoutubeDownloadFinishedNotification.ts\n\nconst { spawnCommandLine: YoutubeDownloadFinishedNotification_spawnCommandLine } = imports.misc.util;\nfunction notifyYoutubeDownloadFinished(args) {\n    const { downloadPath } = args;\n    const notification = createBasicNotification({\n        notificationText: `Download finished. File saved to ${downloadPath}`\n    });\n    const playBtnId = 'openBtn';\n    notification.addButton(playBtnId, 'Play');\n    notification.connect('action-invoked', (actor, id) => {\n        if (id === playBtnId) {\n            YoutubeDownloadFinishedNotification_spawnCommandLine(`xdg-open '${downloadPath}'`);\n        }\n    });\n    notification.notify();\n}\n\n;// CONCATENATED MODULE: ./src/ui/Notifications/YoutubeDownloadStartedNotification.ts\n\nfunction notifyYoutubeDownloadStarted(args) {\n    const { title, onCancelClicked } = args;\n    const notification = createBasicNotification({\n        notificationText: `Downloading ${title} ...`,\n    });\n    const cancelBtnId = 'cancelBtn';\n    notification.addButton(cancelBtnId, 'Cancel');\n    notification.connect('action-invoked', (actor, id) => {\n        if (id === cancelBtnId)\n            onCancelClicked();\n    });\n    notification.notify();\n}\n\n;// CONCATENATED MODULE: ./src/ui/Notifications/YoutubeDownloadFailedNotification.ts\n\n\nconst { spawnCommandLine: YoutubeDownloadFailedNotification_spawnCommandLine } = imports.misc.util;\nconst { get_home_dir: YoutubeDownloadFailedNotification_get_home_dir } = imports.gi.GLib;\nfunction notifyYoutubeDownloadFailed() {\n    const notificationText = `Couldn't download Song from Youtube due to an Error. Make Sure you have the newest version of youtube-dl installed. \n        \\n<b>Important:</b> Don't use apt for the installation but follow the installation instruction given on the Radio Applet Site in the Cinnamon Store instead\n        \\nFor more information see the logs`;\n    const notification = createBasicNotification({\n        notificationText,\n        isMarkup: true,\n        transient: false\n    });\n    const viewStoreBtnId = 'viewStoreBtn';\n    const viewLogBtnId = 'viewLogBtn';\n    notification.addButton(viewStoreBtnId, 'View Installation Instruction');\n    notification.addButton(viewLogBtnId, \"View Logs\");\n    notification.connect('action-invoked', (actor, id) => {\n        if (id === viewStoreBtnId) {\n            YoutubeDownloadFailedNotification_spawnCommandLine(`xdg-open ${APPLET_SITE} `);\n        }\n        if (id === viewLogBtnId) {\n            YoutubeDownloadFailedNotification_spawnCommandLine(`xdg-open ${YoutubeDownloadFailedNotification_get_home_dir()}/.xsession-errors`);\n        }\n    });\n    notification.notify();\n}\n\n;// CONCATENATED MODULE: ./src/ui/Seeker.ts\n\n\n\nconst { BoxLayout: Seeker_BoxLayout, Label: Seeker_Label } = imports.gi.St;\nfunction createSeeker(args) {\n    const { onPositionChanged } = args;\n    const container = new Seeker_BoxLayout({\n        style_class: POPUP_MENU_ITEM_CLASS\n    });\n    createActivWidget({\n        widget: container\n    });\n    // length in seconds\n    let length = 100;\n    // position in seconds\n    let position;\n    const positionLabel = new Seeker_Label();\n    const lengthLabel = new Seeker_Label();\n    const slider = createSlider({\n        initialValue: 0.5,\n        onValueChanged: handleValueChanged\n    });\n    [positionLabel, slider.actor, lengthLabel].forEach(widget => {\n        container.add_child(widget);\n    });\n    /** @param value in seconds */\n    function setLength(value) {\n        length = value;\n        lengthLabel.set_text(secondsToFormatedMin(value));\n        refreshSliderValue();\n    }\n    /** @param value in seconds */\n    function setPosition(value) {\n        position = value;\n        positionLabel.set_text(secondsToFormatedMin(position));\n        refreshSliderValue();\n    }\n    function refreshSliderValue() {\n        const sliderValue = length === 0 ? 0 : Math.min(position / length, 1);\n        slider.setValue(sliderValue, true);\n    }\n    function handleValueChanged(value) {\n        const newPosition = value * length;\n        onPositionChanged(newPosition);\n    }\n    /**\n     * converts seconds to a string in the form of: mm:ss\n     *\n     * e.g. 10 seconds = 00:10, 100 seconds = 01:40,  6000 seconds = 100:00\n     *      *\n     * @param seconds\n     * @returns\n     */\n    function secondsToFormatedMin(seconds) {\n        const minutes = Math.floor(seconds / 60);\n        const remainingSeconds = seconds - minutes * 60;\n        // ensures minutes and seconds are shown with at least two digits\n        return [minutes, remainingSeconds].map(value => {\n            const valueString = value.toString().padStart(2, '0');\n            return valueString;\n        }).join(\":\");\n    }\n    return {\n        actor: container,\n        setLength,\n        setPosition\n    };\n}\n\n;// CONCATENATED MODULE: ./src/index.ts\n// import * as _ from 'lodash'; now possible\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst { ScrollDirection: src_ScrollDirection } = imports.gi.Clutter;\nconst { getAppletDefinition } = imports.ui.appletManager;\nconst { panelManager: src_panelManager } = imports.ui.main;\nconst { IconType: src_IconType, BoxLayout: src_BoxLayout } = imports.gi.St;\nfunction main(args) {\n    const { orientation, panelHeight, instanceId } = args;\n    // this is a workaround for now. Optimally the lastVolume should be saved persistently each time the volume is changed but this lead to significant performance issue on scrolling at the moment. However this shouldn't be the case as it is no problem to log the volume each time the volume changes (so it is a problem in the config implementation). As a workaround the volume is only saved persistently when the radio stops but the volume obviously can't be received anymore from dbus when the player has been already stopped ... \n    let lastVolume;\n    let mpvHandler;\n    let installationInProgress = false;\n    const appletDefinition = getAppletDefinition({\n        applet_id: instanceId,\n    });\n    const panel = src_panelManager.panels.find(panel => (panel === null || panel === void 0 ? void 0 : panel.panelId) === appletDefinition.panelId);\n    panel.connect('icon-size-changed', () => appletIcon.updateIconSize());\n    const appletIcon = createAppletIcon({\n        locationLabel: appletDefinition.location_label,\n        panel\n    });\n    const appletLabel = createAppletLabel();\n    const applet = createApplet({\n        icon: appletIcon.actor,\n        label: appletLabel.actor,\n        instanceId,\n        orientation,\n        panelHeight,\n        onClick: handleAppletClicked,\n        onScroll: handleScroll,\n        onMiddleClick: () => mpvHandler === null || mpvHandler === void 0 ? void 0 : mpvHandler.togglePlayPause(),\n        onAppletMoved: () => mpvHandler === null || mpvHandler === void 0 ? void 0 : mpvHandler.deactivateAllListener(),\n        onAppletRemoved: handleAppletRemoved,\n        onRightClick: () => popupMenu === null || popupMenu === void 0 ? void 0 : popupMenu.close()\n    });\n    const appletTooltip = createAppletTooltip({\n        applet,\n        orientation\n    });\n    const configs = createConfig({\n        uuid: __meta.uuid,\n        instanceId,\n        onIconChanged: handleIconTypeChanged,\n        onIconColorPlayingChanged: (color) => {\n            appletIcon.setColorWhenPlaying(color);\n        },\n        onIconColorPausedChanged: (color) => {\n            appletIcon.setColorWhenPaused(color);\n        },\n        onChannelOnPanelChanged: (channelOnPanel) => {\n            appletLabel.setVisibility(channelOnPanel);\n        },\n        onMyStationsChanged: handleStationsUpdated,\n    });\n    const channelStore = new ChannelStore(configs.userStations);\n    const channelList = createChannelList({\n        stationNames: channelStore.activatedChannelNames,\n        onChannelClicked: handleChannelClicked\n    });\n    const volumeSlider = createVolumeSlider({\n        onVolumeChanged: (volume) => mpvHandler === null || mpvHandler === void 0 ? void 0 : mpvHandler.setVolume(volume)\n    });\n    const popupMenu = createPopupMenu({ launcher: applet.actor });\n    const infoSection = createInfoSection();\n    //toolbar\n    const playPauseBtn = createPlayPauseButton({\n        onClick: () => mpvHandler.togglePlayPause()\n    });\n    const stopBtn = createStopBtn({\n        onClick: () => mpvHandler.stop()\n    });\n    const downloadBtn = createDownloadButton({\n        onClick: handleDownloadBtnClicked\n    });\n    const copyBtn = createCopyButton({\n        onClick: () => copyText(mpvHandler.getCurrentTitle())\n    });\n    const mediaControlToolbar = createMediaControlToolbar({\n        controlBtns: [playPauseBtn.actor, downloadBtn.actor, copyBtn.actor, stopBtn.actor]\n    });\n    const seeker = createSeeker({\n        onPositionChanged: (value) => mpvHandler === null || mpvHandler === void 0 ? void 0 : mpvHandler.setPosition(value)\n    });\n    const radioActiveSection = new src_BoxLayout({\n        vertical: true,\n        visible: false\n    });\n    [\n        infoSection.actor,\n        mediaControlToolbar,\n        volumeSlider.actor,\n        seeker.actor\n    ].forEach(widget => {\n        radioActiveSection.add_child(createSeparatorMenuItem());\n        radioActiveSection.add_child(widget);\n    });\n    popupMenu.add_child(channelList.actor);\n    popupMenu.add_child(radioActiveSection);\n    mpvHandler = createMpvHandler({\n        getInitialVolume: () => { return configs.initialVolume; },\n        onVolumeChanged: handleVolumeChanged,\n        onLengthChanged: hanldeLengthChanged,\n        onPositionChanged: handlePositionChanged,\n        checkUrlValid: (url) => channelStore.checkUrlValid(url),\n        onTitleChanged: handleTitleChanged,\n        onPlaybackstatusChanged: handlePlaybackstatusChanged,\n        lastUrl: configs.lastUrl,\n        onUrlChanged: handleUrlChanged\n    });\n    // CALLBACKS\n    async function handleAppletClicked() {\n        if (installationInProgress)\n            return;\n        try {\n            installationInProgress = true;\n            await installMpvWithMpris();\n            popupMenu.toggle();\n        }\n        catch (error) {\n            const notificationText = \"Couldn't start the applet. Make sure mpv is installed and the mpv mpris plugin saved in the configs folder.\";\n            notify({ text: notificationText });\n            global.logError(error);\n        }\n        finally {\n            installationInProgress = false;\n        }\n    }\n    function handleAppletRemoved() {\n        mpvHandler === null || mpvHandler === void 0 ? void 0 : mpvHandler.deactivateAllListener();\n        mpvHandler === null || mpvHandler === void 0 ? void 0 : mpvHandler.stop();\n    }\n    function handleScroll(scrollDirection) {\n        const volumeChange = scrollDirection === src_ScrollDirection.UP ? VOLUME_DELTA : -VOLUME_DELTA;\n        mpvHandler.increaseDecreaseVolume(volumeChange);\n    }\n    function handleChannelClicked(name) {\n        const channelUrl = channelStore.getChannelUrl(name);\n        mpvHandler.setUrl(channelUrl);\n    }\n    function handleTitleChanged(title) {\n        infoSection.setSongTitle(title);\n    }\n    function handleVolumeChanged(volume) {\n        volumeSlider.setVolume(volume);\n        appletTooltip.setVolume(volume);\n        lastVolume = volume;\n    }\n    function handleIconTypeChanged(iconType) {\n        appletIcon.setIconType(iconType);\n    }\n    function handleStationsUpdated(stations) {\n        const stationsChanged = channelStore.checkListChanged(stations);\n        if (!stationsChanged)\n            return;\n        channelStore.channelList = stations;\n        channelList.setStationNames(channelStore.activatedChannelNames);\n        const lastUrlValid = channelStore.checkUrlValid(configs.lastUrl);\n        if (!lastUrlValid)\n            mpvHandler.stop();\n    }\n    function handlePlaybackstatusChanged(playbackstatus) {\n        if (playbackstatus === 'Stopped') {\n            radioActiveSection.hide();\n            configs.lastVolume = lastVolume;\n            configs.lastUrl = null;\n            appletLabel.setText(null);\n            handleVolumeChanged(null);\n            popupMenu.close();\n        }\n        if (playbackstatus !== 'Stopped' && !radioActiveSection.visible)\n            radioActiveSection.show();\n        channelList.setPlaybackStatus(playbackstatus);\n        appletIcon.setPlaybackStatus(playbackstatus);\n        if (playbackstatus === 'Playing' || playbackstatus === 'Paused') {\n            playPauseBtn.setPlaybackStatus(playbackstatus);\n        }\n    }\n    function handleUrlChanged(url) {\n        const channelName = url ? channelStore.getChannelName(url) : null;\n        appletLabel.setText(channelName);\n        channelList.setCurrentChannel(channelName);\n        infoSection.setChannel(channelName);\n        configs.lastUrl = url;\n    }\n    function hanldeLengthChanged(length) {\n        seeker.setLength(length);\n    }\n    function handlePositionChanged(position) {\n        seeker === null || seeker === void 0 ? void 0 : seeker.setPosition(position);\n    }\n    function handleDownloadBtnClicked() {\n        const title = mpvHandler.getCurrentTitle();\n        const downloadProcess = downloadSongFromYoutube({\n            downloadDir: configs.musicDownloadDir,\n            title,\n            onDownloadFinished: (path) => notifyYoutubeDownloadFinished({\n                downloadPath: path\n            }),\n            onDownloadFailed: notifyYoutubeDownloadFailed\n        });\n        notifyYoutubeDownloadStarted({\n            title,\n            onCancelClicked: () => downloadProcess.cancel()\n        });\n    }\n    return applet;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy9Db25maWcudHM/ZjJjZiIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy9DaGFubmVsU3RvcmUudHM/YmJiMSIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy9saWIvQWN0aXZXaWRnZXQudHM/MDMwYiIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy9saWIvUG9wdXBTdWJNZW51LnRzP2RiOWEiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvY29uc3RzLnRzP2M2ZWMiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvZnVuY3Rpb25zL2xpbWl0U3RyaW5nLnRzPzc4MTYiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvbGliL0ljb25NZW51SXRlbS50cz9hMjMzIiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL3VpL0NoYW5uZWxMaXN0L0NoYW5uZWxNZW51SXRlbS50cz84YTM2Iiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL3VpL0NoYW5uZWxMaXN0L0NoYW5uZWxMaXN0LnRzPzVlZDgiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvbXB2L01wdkhhbmRsZXIudHM/MGFjNyIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy9saWIvU2xpZGVyLnRzPzAwODciLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvdWkvVm9sdW1lU2xpZGVyLnRzP2MwZTUiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvbGliL1BvcHVwTWVudS50cz8xMDNlIiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL2xpYi9Qb3B1cFNlcGVyYXRvci50cz80NWI3Iiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL3VpL1Rvb2xiYXIvTWVkaWFDb250cm9sVG9vbGJhci50cz9hMzQ0Iiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL3VpL1Rvb2xiYXIvQ29udHJvbEJ0bi50cz9hYmQ1Iiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL3VpL1Rvb2xiYXIvUGxheVBhdXNlQnV0dG9uLnRzPzZhYjYiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvdWkvVG9vbGJhci9TdG9wQnV0dG9uLnRzP2I0NGYiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvdWkvSW5mb1NlY3Rpb24udHM/OTY1ZiIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy91aS9Ub29sYmFyL0Rvd25sb2FkQnV0dG9uLnRzP2NmN2EiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvdWkvVG9vbGJhci9Db3B5QnV0dG9uLnRzPzVmOWMiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvZnVuY3Rpb25zL2Rvd25sb2FkRnJvbVlvdXR1YmUudHM/M2VkMiIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy9mdW5jdGlvbnMvcHJvbWlzZUhlbHBlcnMudHM/N2U1ZSIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy91aS9Ob3RpZmljYXRpb25zL05vdGlmaWNhdGlvbkJhc2UudHM/ZDUzYyIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy91aS9Ob3RpZmljYXRpb25zL0dlbmVyaWNOb3RpZmljYXRpb24udHM/M2ZmOCIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy9tcHYvQ2hlY2tJbnN0YWxsYXRpb24udHM/Zjk1ZCIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy9mdW5jdGlvbnMvY29weVRleHQudHM/YmRiNyIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy91aS9BcHBsZXQvQXBwbGV0LnRzP2EzMzEiLCJ3ZWJwYWNrOi8vcmFkaW9BcHBsZXQvLi9zcmMvdWkvQXBwbGV0L0FwcGxldEljb24udHM/YjAwNSIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy91aS9BcHBsZXQvQXBwbGV0TGFiZWwudHM/MzkzZCIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy91aS9BcHBsZXQvQXBwbGV0VG9vbHRpcC50cz9hNTNlIiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL3VpL05vdGlmaWNhdGlvbnMvWW91dHViZURvd25sb2FkRmluaXNoZWROb3RpZmljYXRpb24udHM/ZDJjYiIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy91aS9Ob3RpZmljYXRpb25zL1lvdXR1YmVEb3dubG9hZFN0YXJ0ZWROb3RpZmljYXRpb24udHM/YmJmNSIsIndlYnBhY2s6Ly9yYWRpb0FwcGxldC8uL3NyYy91aS9Ob3RpZmljYXRpb25zL1lvdXR1YmVEb3dubG9hZEZhaWxlZE5vdGlmaWNhdGlvbi50cz9iYjA4Iiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL3VpL1NlZWtlci50cz8xM2IyIiwid2VicGFjazovL3JhZGlvQXBwbGV0Ly4vc3JjL2luZGV4LnRzP2ZmYjQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRUEsTUFBTSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBMEJ4QyxNQUFNLFlBQVksR0FBRyxDQUFDLElBQWUsRUFBRSxFQUFFO0lBRTVDLE1BQU0sRUFDRixJQUFJLEVBQ0osVUFBVSxFQUNWLGFBQWEsRUFDYix5QkFBeUIsRUFDekIsd0JBQXdCLEVBQ3hCLHVCQUF1QixFQUN2QixtQkFBbUIsR0FDdEIsR0FBRyxJQUFJO0lBRVIsd0NBQXdDO0lBQ3hDLE1BQU0sY0FBYyxHQUFHO1FBQ25CLElBQUksYUFBYSxLQUFLLE9BQU8sZ0JBQWdCLEVBQUUsRUFBQyxDQUFDO0tBQ3hDO0lBRWIsTUFBTSxjQUFjLEdBQUcsSUFBSSxjQUFjLENBQUMsY0FBYyxFQUFFLElBQUksRUFBRSxVQUFVLENBQUM7SUFFM0UsY0FBYyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUN2QyxDQUFDLFFBQWtCLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMs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QUFFO1FBRTFDLE1BQU0sZUFBZSxHQUFHLHVCQUF1QixDQUFDO1lBQzVDLFdBQVcsRUFBRSxPQUFPLENBQUMsZ0JBQWdCO1lBQ3JDLEtBQUs7WUFDTCxrQkFBa0IsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsNkJBQTZCLENBQUM7Z0JBQ3hELFlBQVksRUFBRSxJQUFJO2FBQ3JCLENBQUM7WUFDRixnQkFBZ0IsRUFBRSwyQkFBMkI7U0FDaEQsQ0FBQztRQUVGLDRCQUE0QixDQUFDO1lBQ3pCLEtBQUs7WUFDTCxlQUFlLEVBQUUsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRTtTQUNsRCxDQUFDO0lBQ04sQ0FBQztJQUVELE9BQU8sTUFBTTtBQUVqQixDQUFDIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFubmVsLCBJY29uVHlwZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmNvbnN0IHsgQXBwbGV0U2V0dGluZ3MgfSA9IGltcG9ydHMudWkuc2V0dGluZ3M7XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIHV1aWQ6IHN0cmluZyxcbiAgICBpbnN0YW5jZUlkOiBudW1iZXIsXG4gICAgb25JY29uQ2hhbmdlZDogKGljb25UeXBlOiBJY29uVHlwZSkgPT4gdm9pZCxcbiAgICBvbkljb25Db2xvclBsYXlpbmdDaGFuZ2VkOiAoY29sb3I6IHN0cmluZykgPT4gdm9pZCxcbiAgICBvbkljb25Db2xvclBhdXNlZENoYW5nZWQ6IChjb2xvcjogc3RyaW5nKSA9PiB2b2lkLFxuICAgIG9uQ2hhbm5lbE9uUGFuZWxDaGFuZ2VkOiAoY2hhbm5lbE9uUGFuZWw6IGJvb2xlYW4pID0+IHZvaWQsXG4gICAgb25NeVN0YXRpb25zQ2hhbmdlZDogKHN0YXRpb25zOiBDaGFubmVsW10pID0+IHZvaWQsXG59XG5cbmludGVyZmFjZSBTZXR0aW5ncyB7XG4gICAgaWNvblR5cGU6IEljb25UeXBlLFxuICAgIHN5bWJvbGljSWNvbkNvbG9yV2hlblBsYXlpbmc6IHN0cmluZyxcbiAgICBzeW1ib2xpY0ljb25Db2xvcldoZW5QYXVzZWQ6IHN0cmluZyxcbiAgICBjaGFubmVsTmFtZU9uUGFuZWw6IGJvb2xlYW4sXG4gICAgY3VzdG9tSW5pdFZvbHVtZTogbnVtYmVyLFxuICAgIGtlZXBWb2x1bWU6IGJvb2xlYW4sXG4gICAgbGFzdFZvbHVtZTogbnVtYmVyLFxuICAgIGluaXRpYWxWb2x1bWU6IG51bWJlcixcbiAgICB1c2VyU3RhdGlvbnM6IENoYW5uZWxbXVxuICAgIGxhc3RVcmw6IHN0cmluZyxcbiAgICBtdXNpY0Rvd25sb2FkRGlyOiBzdHJpbmdcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbmZpZyA9IChhcmdzOiBBcmd1bWVudHMpID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgdXVpZCxcbiAgICAgICAgaW5zdGFuY2VJZCxcbiAgICAgICAgb25JY29uQ2hhbmdlZCxcbiAgICAgICAgb25JY29uQ29sb3JQbGF5aW5nQ2hhbmdlZCxcbiAgICAgICAgb25JY29uQ29sb3JQYXVzZWRDaGFuZ2VkLFxuICAgICAgICBvbkNoYW5uZWxPblBhbmVsQ2hhbmdlZCxcbiAgICAgICAgb25NeVN0YXRpb25zQ2hhbmdlZCxcbiAgICB9ID0gYXJnc1xuXG4gICAgLy8gYWxsIHNldHRpbmdzIGFyZSBzYXZlZCB0byB0aGlzIG9iamVjdFxuICAgIGNvbnN0IHNldHRpbmdzT2JqZWN0ID0ge1xuICAgICAgICBnZXQgaW5pdGlhbFZvbHVtZSgpIHsgcmV0dXJuIGdldEluaXRpYWxWb2x1bWUoKSB9XG4gICAgfSBhcyBTZXR0aW5nc1xuXG4gICAgY29uc3QgYXBwbGV0U2V0dGluZ3MgPSBuZXcgQXBwbGV0U2V0dGluZ3Moc2V0dGluZ3NPYmplY3QsIHV1aWQsIGluc3RhbmNlSWQpXG5cbiAgICBhcHBsZXRTZXR0aW5ncy5iaW5kKCdpY29uLXR5cGUnLCAnaWNvblR5cGUnLFxuICAgICAgICAoaWNvblR5cGU6IEljb25UeXBlKSA9PiBvbkljb25DaGFuZ2VkKGljb25UeXBlKSlcblxuICAgIGFwcGxldFNldHRpbmdzLmJpbmQoJ2NvbG9yLW9uJywgJ3N5bWJvbGljSWNvbkNvbG9yV2hlblBsYXlpbmcnLFxuICAgICAgICAobmV3Q29sb3I6IHN0cmluZykgPT4gb25JY29uQ29sb3JQbGF5aW5nQ2hhbmdlZChuZXdDb2xvcikpXG5cbiAgICBhcHBsZXRTZXR0aW5ncy5iaW5kKCdjb2xvci1wYXVzZWQnLCAnc3ltYm9saWNJY29uQ29sb3JXaGVuUGF1c2VkJyxcbiAgICAgICAgKG5ld0NvbG9yOiBzdHJpbmcpID0+IG9uSWNvbkNvbG9yUGF1c2VkQ2hhbmdlZChuZXdDb2xvcikpXG5cbiAgICBhcHBsZXRTZXR0aW5ncy5iaW5kKCdjaGFubmVsLW9uLXBhbmVsJywgJ2NoYW5uZWxOYW1lT25QYW5lbCcsXG4gICAgICAgIChjaGFubmVsT25QYW5lbDogYm9vbGVhbikgPT4gb25DaGFubmVsT25QYW5lbENoYW5nZWQoY2hhbm5lbE9uUGFuZWwpKVxuXG4gICAgYXBwbGV0U2V0dGluZ3MuYmluZCgna2VlcC12b2x1bWUtYmV0d2Vlbi1zZXNzaW9ucycsIFwia2VlcFZvbHVtZVwiKVxuXG4gICAgYXBwbGV0U2V0dGluZ3MuYmluZCgnaW5pdGlhbC12b2x1bWUnLCAnY3VzdG9tSW5pdFZvbHVtZScpXG5cbiAgICBhcHBsZXRTZXR0aW5ncy5iaW5kKCdsYXN0LXZvbHVtZScsICdsYXN0Vm9sdW1lJylcblxuICAgIGFwcGxldFNldHRpbmdzLmJpbmQoJ3RyZWUnLCBcInVzZXJTdGF0aW9uc1wiLFxuICAgICAgICBvbk15U3RhdGlvbnNDaGFuZ2VkKVxuXG4gICAgYXBwbGV0U2V0dGluZ3MuYmluZCgnbGFzdC11cmwnLCAnbGFzdFVybCcpXG5cbiAgICBhcHBsZXRTZXR0aW5ncy5iaW5kKCdtdXNpYy1kb3dubG9hZC1kaXItc2VsZWN0JywgJ211c2ljRG93bmxvYWREaXInLFxuICAgICAgICAoKSA9PiBoYW5kbGVNdXNpY0RpckNoYW5nZWQoKSlcblxuICAgIGZ1bmN0aW9uIGdldEluaXRpYWxWb2x1bWUoKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGtlZXBWb2x1bWUsXG4gICAgICAgICAgICBsYXN0Vm9sdW1lLFxuICAgICAgICAgICAgY3VzdG9tSW5pdFZvbHVtZVxuICAgICAgICB9ID0gc2V0dGluZ3NPYmplY3RcblxuICAgICAgICBsZXQgaW5pdGlhbFZvbHVtZSA9IGtlZXBWb2x1bWUgPyBsYXN0Vm9sdW1lIDogY3VzdG9tSW5pdFZvbHVtZVxuXG4gICAgICAgIGlmIChpbml0aWFsVm9sdW1lID09IG51bGwpIHtcbiAgICAgICAgICAgIGdsb2JhbC5sb2dXYXJuaW5nKCdpbml0aWFsIFZvbHVtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQuIEFwcGx5aW5nIDUwIGFzIGEgZmFsbGJhY2sgc29sdXRpb24gdG8gcHJldmVudCByYWRpbyBzdG9wIHdvcmtpbmcnKVxuICAgICAgICAgICAgaW5pdGlhbFZvbHVtZSA9IDUwXG4gICAgICAgIH1cblxuXG4gICAgICAgIHJldHVybiBpbml0aWFsVm9sdW1lXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlTXVzaWNEaXJDaGFuZ2VkKCkge1xuXG4gICAgICAgIC8vIEJ5IERlZmF1bHQgdGhlIHZhbHVlIGlzIHNldCB0byB+L011c2ljL1JhZGlvIGJ1dCB3aGVuIGNoYW5naW5nIHRvIGFub3RoZXIgbG9jYXRpb24gYW5kIGJhY2sgYWdhaW4gdG8gdGhlIGRlZmF1bHQgdmFsdWUgaW4gdGhlIHNldHRpbmdzIGRpYWxvZywgdGhlIG11c2ljIGRpciBpcyBzZXQgdG8gbnVsbCBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IHZhbHVlIGFnYWluLiBBcyB3b3JrYXJvdW5kIHRoZSBtdXNpYyBkaXIgaXMgc2V0IHByb2dyYW1tYXRpY2FsbHkgdG8gZGVmYXVsdCB2YWx1ZSBhZ2FpbiBpZiB2YWx1ZSBpcyBzZXQgdG8gbnVsbCAoYW5kIHRoZSBzZXR0aW5ncyBkaWFsb2cgY2FuJ3QgYmUgb3BlbmVkIGFueW1vcmUpLiBcbiAgICAgICAgaWYgKHNldHRpbmdzT2JqZWN0Lm11c2ljRG93bmxvYWREaXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHNldHRpbmdzT2JqZWN0Lm11c2ljRG93bmxvYWREaXIgPSBcIn4vTXVzaWMvUmFkaW9cIlxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBvbkljb25DaGFuZ2VkKHNldHRpbmdzT2JqZWN0Lmljb25UeXBlKVxuICAgIG9uSWNvbkNvbG9yUGxheWluZ0NoYW5nZWQoc2V0dGluZ3NPYmplY3Quc3ltYm9saWNJY29uQ29sb3JXaGVuUGxheWluZylcbiAgICBvbkljb25Db2xvclBhdXNlZENoYW5nZWQoc2V0dGluZ3NPYmplY3Quc3ltYm9saWNJY29uQ29sb3JXaGVuUGF1c2VkKVxuICAgIG9uQ2hhbm5lbE9uUGFuZWxDaGFuZ2VkKHNldHRpbmdzT2JqZWN0LmNoYW5uZWxOYW1lT25QYW5lbClcblxuICAgIC8vIFRPRE8gYWxzbyBvbk15U3RhdGlvbkNoYW5nZWQgc2hvdWxkIGJlIGNhbGxlZCAoYW5kIHJlbW92ZWQgYXMgYXJnIGZyb20gIENoYW5uZWxTdG9yZSlcblxuICAgIHJldHVybiBzZXR0aW5nc09iamVjdFxuXG59IiwiaW1wb3J0IHsgQ2hhbm5lbCB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBjbGFzcyBDaGFubmVsU3RvcmUge1xuICAgIHByaXZhdGUgX2NoYW5uZWxMaXN0OiBDaGFubmVsW11cblxuICAgIGNvbnN0cnVjdG9yKGNoYW5uZWxMaXN0OiBDaGFubmVsW10pIHtcbiAgICAgICAgdGhpcy5jaGFubmVsTGlzdCA9IGNoYW5uZWxMaXN0XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0IGNoYW5uZWxMaXN0KGNoYW5uZWxMaXN0OiBDaGFubmVsW10pIHtcblxuICAgICAgICBjb25zdCBmaWx0ZXJlZENoYW5uZWxMaXN0ID0gY2hhbm5lbExpc3QuZmlsdGVyKGNoYW5uZWwgPT4gY2hhbm5lbC5pbmMpXG5cbiAgICAgICAgdGhpcy5fY2hhbm5lbExpc3QgPSBmaWx0ZXJlZENoYW5uZWxMaXN0Lm1hcChjaGFubmVsID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmNoYW5uZWwsIHVybDogY2hhbm5lbC51cmwudHJpbSgpIH1cbiAgICAgICAgfSlcbiAgICAgICAgLy8gVE9ETzogYWRkIGJhYmVsIHRvIGFsbG93IHRoZSB1c2FnZSBvZiBmbGF0TWFwIVxuICAgICAgICAvLyByZXR1cm4gdGhpcy5jaGFubmVsTGlzdC5mbGF0TWFwKGNoYW5uZWwgPT5cbiAgICAgICAgLy8gICAgIGNoYW5uZWwuaW5jID8gY2hhbm5lbC51cmwgOiBbXVxuICAgICAgICAvLyApXG4gICAgfVxuXG4gICAgcHVibGljIGdldCBhY3RpdmF0ZWRDaGFubmVsVXJscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoYW5uZWxMaXN0Lm1hcChjaGFubmVsID0+IGNoYW5uZWwudXJsKVxuXG5cbiAgICB9XG5cblxuICAgIHB1YmxpYyBnZXQgYWN0aXZhdGVkQ2hhbm5lbE5hbWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hhbm5lbExpc3QubWFwKGNoYW5uZWwgPT4gY2hhbm5lbC5uYW1lKVxuICAgIH1cblxuXG5cbiAgICAvLyBUT0RPOiB3aGF0IGlzIHdoZW4gdHdvIENoYW5uZWxzIGhhdmUgdGhlIHNhbWUgTmFtZSBvciBVcmw/IDpPXG4gICAgcHVibGljIGdldENoYW5uZWxOYW1lKGNoYW5uZWxVcmw6IHN0cmluZykge1xuICAgICAgICBjb25zdCBjaGFubmVsID0gdGhpcy5fY2hhbm5lbExpc3QuZmluZChjbmwgPT4gY25sLnVybCA9PT0gY2hhbm5lbFVybClcblxuICAgICAgICByZXR1cm4gY2hhbm5lbCA/IGNoYW5uZWwubmFtZSA6IG51bGxcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2hhbm5lbFVybChjaGFubmVsTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLl9jaGFubmVsTGlzdC5maW5kKGNubCA9PiBjbmwubmFtZSA9PT0gY2hhbm5lbE5hbWUpXG4gICAgICAgIHJldHVybiBjaGFubmVsID8gY2hhbm5lbC51cmwgOiBudWxsXG4gICAgfVxuXG4gICAgcHVibGljIGNoZWNrTGlzdENoYW5nZWQoY2hhbm5lbExpc3Q6IENoYW5uZWxbXSkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY2hhbm5lbExpc3QpID09PSBKU09OLnN0cmluZ2lmeSh0aGlzLl9jaGFubmVsTGlzdCkgP1xuICAgICAgICAgICAgZmFsc2UgOiB0cnVlXG4gICAgfVxuXG4gICAgcHVibGljIGNoZWNrVXJsVmFsaWQoY2hhbm5lbFVybDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGFubmVsTGlzdC5zb21lKGNubCA9PiBjbmwudXJsID09PSBjaGFubmVsVXJsKVxuICAgIH1cblxufSIsImNvbnN0IHsgS0VZX3NwYWNlLCBLRVlfS1BfRW50ZXIsIEtFWV9SZXR1cm4gfSA9IGltcG9ydHMuZ2kuQ2x1dHRlclxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICBvbkFjdGl2YXRlZD86ICgpID0+IHZvaWRcbiAgICB3aWRnZXQ6IGltcG9ydHMuZ2kuU3QuV2lkZ2V0XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFjdGl2V2lkZ2V0KGFyZ3M6IEFyZ3VtZW50cykge1xuXG4gICAgY29uc3Qge1xuICAgICAgICB3aWRnZXQsXG4gICAgICAgIG9uQWN0aXZhdGVkXG4gICAgfSA9IGFyZ3NcblxuICAgIC8vIFRPRE86IHVuZGVyc3RhbmQgY2FuX2ZvY3VzXG5cbiAgICB3aWRnZXQuY2FuX2ZvY3VzID0gdHJ1ZVxuICAgIHdpZGdldC5yZWFjdGl2ZSA9IHRydWVcbiAgICB3aWRnZXQudHJhY2tfaG92ZXIgPSB0cnVlXG5cbiAgICB3aWRnZXQuY29ubmVjdCgnYnV0dG9uLXJlbGVhc2UtZXZlbnQnLCAoKSA9PiBvbkFjdGl2YXRlZD8uKCkpXG5cbiAgICAvLyBUT0RPOiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHNvbWUgdGhlbWVzIChhdCBsZWFzdCBBZGFwdGEtTm9rdG8gYnV0IG1heWJlIGFsc28gb3RoZXJzKSBkb24ndCBwcm92aWRlIHN0eWxlIGZvciB0aGUgaG92ZXIgcHNldWRvIGNsYXNzLiBCdXQgaXQgd291bGQgYmUgbXVjaCBlYXNpZXIgdG8gb25jZSAoYW5kIG9uIHRoZW1lIGNoYW5nZXMpIHByb2dyYW1tYXRpY2FsbHkgc2V0IHRoZSBob3ZlciBwc2V1ZG8gY2xhc3MgZXF1YWwgdG8gdGhlIGFjdGl2ZSBwc2V1ZG8gY2xhc3Mgd2hlbiB0aGUgaG92ZXIgY2xhc3MgaXNuJ3QgcHJvdmlkZWQgYnkgdGhlIHRoZW1lLiBcbiAgICB3aWRnZXQuY29ubmVjdCgnbm90aWZ5Ojpob3ZlcicsICgpID0+IHtcbiAgICAgICAgd2lkZ2V0LmNoYW5nZV9zdHlsZV9wc2V1ZG9fY2xhc3MoJ2FjdGl2ZScsIHdpZGdldC5ob3ZlcilcblxuICAgICAgICBpZiAod2lkZ2V0LmhvdmVyKSB3aWRnZXQuZ3JhYl9rZXlfZm9jdXMoKVxuICAgIH0pXG5cbiAgICB3aWRnZXQuY29ubmVjdCgna2V5LXByZXNzLWV2ZW50JywgKGFjdG9yLCBldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBzeW1ib2wgPSBldmVudC5nZXRfa2V5X3N5bWJvbCgpO1xuICAgICAgICBjb25zdCByZWxldmFudEtleXMgPSBbS0VZX3NwYWNlLCBLRVlfS1BfRW50ZXIsIEtFWV9SZXR1cm5dXG5cbiAgICAgICAgaWYgKHJlbGV2YW50S2V5cy5pbmNsdWRlcyhzeW1ib2wpICYmIHdpZGdldC5ob3ZlcilcbiAgICAgICAgICAgIG9uQWN0aXZhdGVkPy4oKVxuICAgIH0pXG59IiwiaW1wb3J0IHsgY3JlYXRlQWN0aXZXaWRnZXQgfSBmcm9tIFwiLi9BY3RpdldpZGdldFwiO1xuXG5jb25zdCB7IEJveExheW91dCwgTGFiZWwsIEljb24sIFNjcm9sbFZpZXcgfSA9IGltcG9ydHMuZ2kuU3RcbmNvbnN0IHsgQWN0b3JBbGlnbiwgUG9pbnQgfSA9IGltcG9ydHMuZ2kuQ2x1dHRlclxuY29uc3QgeyBQb2xpY3lUeXBlIH0gPSBpbXBvcnRzLmdpLkd0a1xuXG5pbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICB0ZXh0OiBzdHJpbmdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN1Yk1lbnUoYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIHRleHRcbiAgICB9ID0gYXJnc1xuXG5cbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQm94TGF5b3V0KHtcbiAgICAgICAgdmVydGljYWw6IHRydWVcbiAgICB9KVxuXG4gICAgY29uc3QgbGFiZWwgPSBuZXcgTGFiZWwoe1xuICAgICAgICB0ZXh0XG4gICAgfSlcblxuICAgIGNvbnN0IHRyaWFuZ2xlID0gbmV3IEljb24oe1xuICAgICAgICBzdHlsZV9jbGFzczogJ3BvcHVwLW1lbnUtYXJyb3cnLFxuICAgICAgICBpY29uX25hbWU6ICdwYW4tZW5kJyxcbiAgICAgICAgcm90YXRpb25fYW5nbGVfejogOTAsXG4gICAgICAgIHhfZXhwYW5kOiB0cnVlLFxuICAgICAgICB4X2FsaWduOiBBY3RvckFsaWduLkVORCxcbiAgICAgICAgcGl2b3RfcG9pbnQ6IG5ldyBQb2ludCh7IHg6IDAuNSwgeTogMC41IH0pLFxuICAgICAgICBpbXBvcnRhbnQ6IHRydWUgLy8gd2l0aG91dCB0aGlzLCBpdCBsb29rcyB1Z2x5IG9uIE1pbnQtWCBUaGVtZXNcbiAgICB9KTtcblxuICAgIGNvbnN0IHRvZ2dsZSA9IG5ldyBCb3hMYXlvdXQoe1xuICAgICAgICBzdHlsZV9jbGFzczogJ3BvcHVwLW1lbnUtaXRlbSBwb3B1cC1zdWJtZW51LW1lbnUtaXRlbSdcbiAgICB9KVxuXG4gICAgY3JlYXRlQWN0aXZXaWRnZXQoe1xuICAgICAgICB3aWRnZXQ6IHRvZ2dsZSxcbiAgICAgICAgb25BY3RpdmF0ZWQ6IHRvZ2dsZVNjcm9sbGJveFxuICAgIH0pO1xuXG5cbiAgICBbbGFiZWwsIHRyaWFuZ2xlXS5mb3JFYWNoKHdpZGdldCA9PiB0b2dnbGUuYWRkX2NoaWxkKHdpZGdldCkpXG4gICAgY29udGFpbmVyLmFkZF9jaGlsZCh0b2dnbGUpXG5cbiAgICBjb25zdCBzY3JvbGxib3ggPSBuZXcgU2Nyb2xsVmlldyh7XG4gICAgICAgIHN0eWxlX2NsYXNzOiAncG9wdXAtc3ViLW1lbnUnLFxuICAgICAgICB2c2Nyb2xsYmFyX3BvbGljeTogUG9saWN5VHlwZS5BVVRPTUFUSUMsXG4gICAgICAgIGhzY3JvbGxiYXJfcG9saWN5OiBQb2xpY3lUeXBlLk5FVkVSXG4gICAgfSlcblxuICAgIGNvbnN0IGJveCA9IG5ldyBCb3hMYXlvdXQoe1xuICAgICAgICB2ZXJ0aWNhbDogdHJ1ZVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTY3JvbGxib3goKSB7XG4gICAgICAgIHNjcm9sbGJveC52aXNpYmxlID8gY2xvc2VNZW51KCkgOiBvcGVuTWVudSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb3Blbk1lbnUoKSB7XG4gICAgICAgIHNjcm9sbGJveC5zaG93KClcbiAgICAgICAgdHJpYW5nbGUucm90YXRpb25fYW5nbGVfeiA9IDkwXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VNZW51KCkge1xuICAgICAgICBzY3JvbGxib3guaGlkZSgpXG4gICAgICAgIHRyaWFuZ2xlLnJvdGF0aW9uX2FuZ2xlX3ogPSAwXG4gICAgfVxuXG4gICAgLy8gYWRkX2NoaWxkIGlzIHJlY29tbWVuZGVkIGJ1dCBkb2Vzbid0IHdvcms6IGh0dHBzOi8vZ2l0bGFiLmdub21lLm9yZy9HTk9NRS9nbm9tZS1zaGVsbC8tL2lzc3Vlcy8zMTcyXG4gICAgc2Nyb2xsYm94LmFkZF9hY3Rvcihib3gpO1xuXG4gICAgW3RvZ2dsZSwgc2Nyb2xsYm94XS5mb3JFYWNoKHdpZGdldCA9PiBjb250YWluZXIuYWRkX2NoaWxkKHdpZGdldCkpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICAvKiogdGhlIGNvbnRhaW5lciB3aGljaCBzaG91bGQgYmUgdXNlZCB0byBhZGQgaXQgYXMgY2hpbGQgdG8gYSBwYXJlbnQgQWN0b3IgKi9cbiAgICAgICAgYWN0b3I6IGNvbnRhaW5lcixcbiAgICAgICAgLyoqIHRoZSBjb250YWluZXIgd2hpY2ggc2hvdWxkIGJlIHVzZWQgdG8gYWRkIGNoaWxkcmVuICAqL1xuICAgICAgICBib3gsXG4gICAgfVxufSIsImNvbnN0IHsgZ2V0X2hvbWVfZGlyIH0gPSBpbXBvcnRzLmdpLkdMaWI7XG5leHBvcnQgY29uc3QgQVBQTEVUX1NJVEUgPSAnaHR0cHM6Ly9jaW5uYW1vbi1zcGljZXMubGludXhtaW50LmNvbS9hcHBsZXRzL3ZpZXcvMjk3J1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9UT09MVElQX1RYVCA9ICdSYWRpbysrJ1xuZXhwb3J0IGNvbnN0IENPTkZJR19ESVIgPSBgJHtnZXRfaG9tZV9kaXIoKX0vLmNpbm5hbW9uL2NvbmZpZ3MvJHtfX21ldGEudXVpZH1gO1xuZXhwb3J0IGNvbnN0IE1QUklTX1BMVUdJTl9QQVRIID0gQ09ORklHX0RJUiArICcvLm1wcmlzLnNvJ1xuZXhwb3J0IGNvbnN0IE1QUklTX1BMVUdJTl9VUkwgPSBcImh0dHBzOi8vZ2l0aHViLmNvbS9ob3lvbi9tcHYtbXByaXMvcmVsZWFzZXMvZG93bmxvYWQvMC41L21wcmlzLnNvXCJcblxuZXhwb3J0IGNvbnN0IE1FRElBX1BMQVlFUl8yX05BTUUgPSBcIm9yZy5tcHJpcy5NZWRpYVBsYXllcjJcIjtcbmV4cG9ydCBjb25zdCBNRURJQV9QTEFZRVJfMl9QTEFZRVJfTkFNRSA9IFwib3JnLm1wcmlzLk1lZGlhUGxheWVyMi5QbGF5ZXJcIjtcbmV4cG9ydCBjb25zdCBNRURJQV9QTEFZRVJfMl9QQVRIID0gXCIvb3JnL21wcmlzL01lZGlhUGxheWVyMlwiO1xuZXhwb3J0IGNvbnN0IE1QVl9NUFJJU19CVVNfTkFNRSA9IGAke01FRElBX1BMQVlFUl8yX05BTUV9Lm1wdmBcbmV4cG9ydCBjb25zdCBNUFZfQ1ZDX05BTUUgPSAnbXB2IE1lZGlhIFBsYXllcidcblxuZXhwb3J0IGNvbnN0IE1BWF9TVFJJTkdfTEVOR1RIID0gNDBcblxuLyoqIGluIHBlcmNlbnQgKi9cbmV4cG9ydCBjb25zdCBNQVhfVk9MVU1FID0gMTAwIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbGludXhtaW50L2Npbm5hbW9uLXNwaWNlcy1hcHBsZXRzL2lzc3Vlcy8zNDAyI2lzc3VlY29tbWVudC03NTY0MzA3NTQgZm9yIGFuIGV4cGxhbmF0aW9uIG9mIHRoaXMgdmFsdWVcblxuLyoqIGluIHBlcmNlbnQgKi9cbmV4cG9ydCBjb25zdCBWT0xVTUVfREVMVEEgPSA1XG5cblxuLy8gU1RZTEUgQ0xBU1NFUyBcbmV4cG9ydCBjb25zdCBQT1BVUF9JQ09OX0NMQVNTID0gJ3BvcHVwLW1lbnUtaWNvbidcbmV4cG9ydCBjb25zdCBQT1BVUF9NRU5VX0lURU1fQ0xBU1MgPSAncG9wdXAtbWVudS1pdGVtJ1xuXG5cblxuLy8gSUNPTlNcbmV4cG9ydCBmdW5jdGlvbiBnZXRWb2x1bWVJY29uKGFyZ3M6IHsgdm9sdW1lOiBudW1iZXIgfSkge1xuICAgIGNvbnN0IHtcbiAgICAgICAgdm9sdW1lXG4gICAgfSA9IGFyZ3NcblxuICAgIGNvbnN0IFZPTFVNRV9JQ09OX1BSRUZJWCA9ICdhdWRpby12b2x1bWUnXG5cbiAgICBjb25zdCBWT0xVTUVfSUNPTlMgPSBbXG4gICAgICAgIHsgbWF4OiAwLCBuYW1lOiBgJHtWT0xVTUVfSUNPTl9QUkVGSVh9LW11dGVkYCB9LFxuICAgICAgICB7IG1heDogMzMsIG5hbWU6IGAke1ZPTFVNRV9JQ09OX1BSRUZJWH0tbG93YCB9LFxuICAgICAgICB7IG1heDogNjYsIG5hbWU6IGAke1ZPTFVNRV9JQ09OX1BSRUZJWH0tbWVkaXVtYCB9LFxuICAgICAgICB7IG1heDogMTAwLCBuYW1lOiBgJHtWT0xVTUVfSUNPTl9QUkVGSVh9LWhpZ2hgIH0sXG4gICAgXVxuXG4gICAgaWYgKHZvbHVtZSA8IDAgfHwgdm9sdW1lID4gMTAwKVxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndm9sdW1lIHNob3VsZCBiZSBiZXR3ZWVuIDAgYW5kIDEwMCcpXG5cbiAgICBjb25zdCBpbmRleCA9IFZPTFVNRV9JQ09OUy5maW5kSW5kZXgoKHsgbWF4LCAuLi5yZXN0IH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHZvbHVtZSA8PSBtYXhcbiAgICB9KVxuXG4gICAgcmV0dXJuIFZPTFVNRV9JQ09OU1tpbmRleF0ubmFtZVxufVxuXG5leHBvcnQgY29uc3QgUkFESU9fU1lNQk9MSUNfSUNPTl9OQU1FID0gJ3JhZGlvYXBwbGV0J1xuXG5jb25zdCBQTEFZQkFDS19JQ09OX1BSRUZJWCA9ICdtZWRpYS1wbGF5YmFjaydcblxuZXhwb3J0IGNvbnN0IFBMQVlfSUNPTl9OQU1FID0gYCR7UExBWUJBQ0tfSUNPTl9QUkVGSVh9LXN0YXJ0YFxuZXhwb3J0IGNvbnN0IFBBVVNFX0lDT05fTkFNRSA9IGAke1BMQVlCQUNLX0lDT05fUFJFRklYfS1wYXVzZWBcbmV4cG9ydCBjb25zdCBTVE9QX0lDT05fTkFNRSA9IGAke1BMQVlCQUNLX0lDT05fUFJFRklYfS1zdG9wYFxuZXhwb3J0IGNvbnN0IFNPTkdfSU5GT19JQ09OX05BTUUgPSAnYXVkaW8teC1nZW5lcmljJ1xuZXhwb3J0IGNvbnN0IENPUFlfSUNPTl9OQU1FID0gJ2VkaXQtY29weSdcbmV4cG9ydCBjb25zdCBET1dOTE9BRF9JQ09OX05BTUUgPSAnc291dGgtYXJyb3ctd2VhdGhlci1zeW1ib2xpYydcbmV4cG9ydCBjb25zdCBMT0FESU5HX0lDT05fTkFNRSA9ICd2aWV3LXJlZnJlc2gtc3ltYm9saWMnIiwiXG5leHBvcnQgZnVuY3Rpb24gbGltaXRTdHJpbmcodGV4dDogc3RyaW5nLCBtYXhDaGFyTnVtYmVyOiBudW1iZXIpIHtcblxuICAgIGlmICghdGV4dCkgcmV0dXJuXG5cbiAgICBpZiAodGV4dC5sZW5ndGggPD0gbWF4Q2hhck51bWJlcikgcmV0dXJuIHRleHRcblxuICAgIHJldHVybiBbLi4udGV4dF0uc2xpY2UoMCwgbWF4Q2hhck51bWJlciAtIDMpLmpvaW4oJycpICsgJy4uLidcblxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQWN0aXZXaWRnZXQgfSBmcm9tIFwiLi9BY3RpdldpZGdldFwiO1xuaW1wb3J0IHsgbGltaXRTdHJpbmcgfSBmcm9tIFwiLi4vZnVuY3Rpb25zL2xpbWl0U3RyaW5nXCJcblxuY29uc3QgeyBJY29uLCBJY29uVHlwZSwgTGFiZWwsIEJveExheW91dCB9ID0gaW1wb3J0cy5naS5TdFxuXG5pbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICB0ZXh0Pzogc3RyaW5nLFxuICAgIGljb25OYW1lPzogc3RyaW5nLFxuICAgIG9uQWN0aXZhdGVkPzogKCkgPT4gdm9pZFxuICAgIG1heENoYXJOdW1iZXI6IG51bWJlcixcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUljb25NZW51SXRlbShhcmdzOiBBcmd1bWVudHMpIHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgdGV4dCxcbiAgICAgICAgbWF4Q2hhck51bWJlcixcbiAgICAgICAgaWNvbk5hbWUsXG4gICAgICAgIG9uQWN0aXZhdGVkXG4gICAgfSA9IGFyZ3NcblxuXG4gICAgbGV0IGljb246IGltcG9ydHMuZ2kuU3QuSWNvblxuICAgIGxldCBsYWJlbDogaW1wb3J0cy5naS5TdC5MYWJlbFxuXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IEJveExheW91dCh7XG4gICAgICAgIHN0eWxlX2NsYXNzOiAncG9wdXAtbWVudS1pdGVtJ1xuICAgIH0pXG5cbiAgICBzZXRJY29uTmFtZShpY29uTmFtZSlcbiAgICBzZXRUZXh0KHRleHQpXG5cbiAgICBmdW5jdGlvbiBzZXRJY29uTmFtZShuYW1lOiBzdHJpbmcgfCBudWxsKSB7XG5cbiAgICAgICAgaWYgKGljb24gJiYgIW5hbWUpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVfY2hpbGQoaWNvbilcbiAgICAgICAgICAgIGljb24gPSBudWxsXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbmFtZSkgcmV0dXJuXG5cbiAgICAgICAgaW5pdEljb24oKVxuXG4gICAgICAgIGljb24uaWNvbl9uYW1lID0gbmFtZVxuXG4gICAgICAgIGlmIChjb250YWluZXIuZ2V0X2NoaWxkX2F0X2luZGV4KDApICE9PSBpY29uKVxuICAgICAgICAgICAgY29udGFpbmVyLmluc2VydF9jaGlsZF9hdF9pbmRleChpY29uLCAwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRJY29uKCkge1xuICAgICAgICBpZiAoIWljb24pIHtcbiAgICAgICAgICAgIGljb24gPSBuZXcgSWNvbih7XG4gICAgICAgICAgICAgICAgaWNvbl90eXBlOiBJY29uVHlwZS5TWU1CT0xJQyxcbiAgICAgICAgICAgICAgICBzdHlsZV9jbGFzczogJ3BvcHVwLW1lbnUtaWNvbidcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRUZXh0KHRleHQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBsYWJlbFRleHQgPSB0ZXh0IHx8ICcgJ1xuXG4gICAgICAgIGlmICghbGFiZWwpIHtcbiAgICAgICAgICAgIGxhYmVsID0gbmV3IExhYmVsKCk7XG4gICAgICAgICAgICBjb250YWluZXIuYWRkX2NoaWxkKGxhYmVsKVxuICAgICAgICB9XG4gICAgICAgIGxhYmVsLnNldF90ZXh0KGxpbWl0U3RyaW5nKGxhYmVsVGV4dCwgbWF4Q2hhck51bWJlcikpXG4gICAgfVxuXG4gICAgb25BY3RpdmF0ZWQgJiYgY3JlYXRlQWN0aXZXaWRnZXQoeyB3aWRnZXQ6IGNvbnRhaW5lciwgb25BY3RpdmF0ZWQgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhY3RvcjogY29udGFpbmVyLFxuICAgICAgICBzZXRJY29uTmFtZSxcbiAgICAgICAgc2V0VGV4dFxuICAgIH1cblxuXG59IiwiaW1wb3J0ICogYXMgY29uc3RzIGZyb20gJy4uLy4uL2NvbnN0cydcbmltcG9ydCB7IGNyZWF0ZUljb25NZW51SXRlbSB9IGZyb20gJy4uLy4uL2xpYi9JY29uTWVudUl0ZW0nO1xuaW1wb3J0IHsgQWR2YW5jZWRQbGF5YmFja1N0YXR1cyB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIGNoYW5uZWxOYW1lOiBzdHJpbmcsXG4gICAgb25BY3RpdmF0ZWQ6IChjaGFubmVsTmFtZTogc3RyaW5nKSA9PiB2b2lkLFxuICAgIHBsYXliYWNrU3RhdHVzPzogQWR2YW5jZWRQbGF5YmFja1N0YXR1c1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhbm5lbE1lbnVJdGVtKGFyZ3M6IEFyZ3VtZW50cykge1xuXG4gICAgY29uc3Qge1xuICAgICAgICBjaGFubmVsTmFtZSxcbiAgICAgICAgb25BY3RpdmF0ZWQsXG4gICAgICAgIHBsYXliYWNrU3RhdHVzXG4gICAgfSA9IGFyZ3NcblxuICAgIGNvbnN0IHBsYXliYWNrSWNvbk1hcDogTWFwPEFkdmFuY2VkUGxheWJhY2tTdGF0dXMsIHN0cmluZyB8IG51bGw+ID0gbmV3IE1hcChbXG4gICAgICAgIFtcIlBsYXlpbmdcIiwgY29uc3RzLlBMQVlfSUNPTl9OQU1FXSxcbiAgICAgICAgW1wiUGF1c2VkXCIsIGNvbnN0cy5QQVVTRV9JQ09OX05BTUVdLFxuICAgICAgICBbXCJMb2FkaW5nXCIsIGNvbnN0cy5MT0FESU5HX0lDT05fTkFNRV0sXG4gICAgICAgIFtcIlN0b3BwZWRcIiwgbnVsbF1cbiAgICBdKVxuXG4gICAgY29uc3QgaWNvbk1lbnVJdGVtID0gY3JlYXRlSWNvbk1lbnVJdGVtKHtcbiAgICAgICAgbWF4Q2hhck51bWJlcjogY29uc3RzLk1BWF9TVFJJTkdfTEVOR1RILFxuICAgICAgICB0ZXh0OiBjaGFubmVsTmFtZSxcbiAgICAgICAgb25BY3RpdmF0ZWQ6ICgpID0+IG9uQWN0aXZhdGVkKGNoYW5uZWxOYW1lKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBzZXRQbGF5YmFja1N0YXR1cyhwbGF5YmFja1N0YXR1czogQWR2YW5jZWRQbGF5YmFja1N0YXR1cykge1xuICAgICAgICBjb25zdCBpY29uTmFtZSA9IHBsYXliYWNrSWNvbk1hcC5nZXQocGxheWJhY2tTdGF0dXMpXG4gICAgICAgIGljb25NZW51SXRlbS5zZXRJY29uTmFtZShpY29uTmFtZSlcbiAgICB9XG5cbiAgICBwbGF5YmFja1N0YXR1cyAmJiBzZXRQbGF5YmFja1N0YXR1cyhwbGF5YmFja1N0YXR1cylcblxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFBsYXliYWNrU3RhdHVzLFxuICAgICAgICBhY3RvcjogaWNvbk1lbnVJdGVtLmFjdG9yXG4gICAgfVxufSIsImltcG9ydCB7IGNyZWF0ZVN1Yk1lbnUgfSBmcm9tIFwiLi4vLi4vbGliL1BvcHVwU3ViTWVudVwiO1xuaW1wb3J0IHsgY3JlYXRlQ2hhbm5lbE1lbnVJdGVtIH0gZnJvbSBcIi4vQ2hhbm5lbE1lbnVJdGVtXCI7XG5pbXBvcnQgeyBBZHZhbmNlZFBsYXliYWNrU3RhdHVzIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIHN0YXRpb25OYW1lczogc3RyaW5nW10sXG4gICAgb25DaGFubmVsQ2xpY2tlZDogKG5hbWU6IHN0cmluZykgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhbm5lbExpc3QoYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIHN0YXRpb25OYW1lcyxcbiAgICAgICAgb25DaGFubmVsQ2xpY2tlZFxuICAgIH0gPSBhcmdzXG5cbiAgICBjb25zdCBzdWJNZW51ID0gY3JlYXRlU3ViTWVudSh7IHRleHQ6ICdNeSBTdGF0aW9ucycgfSlcblxuICAgIGxldCBjdXJyZW50Q2hhbm5lbE5hbWU6IHN0cmluZ1xuICAgIGxldCBwbGF5YmFja1N0YXR1czogQWR2YW5jZWRQbGF5YmFja1N0YXR1cyA9ICdTdG9wcGVkJ1xuXG4gICAgLy8gdGhlIGNoYW5uZWxJdGVtcyBhcmUgc2F2ZWQgaGVyZSB0byB0aGUgbWFwIGFuZCB0byB0aGUgY29udGFpbmVyIGFzIG9uIHRoZSBjb250YWluZXIgb25seSB0aGUgcmVkdWNlZCBuYW1lIGFyZSBzaG93bi4gVGhlb3JldGljYWxseSBpdCB0aGVyZWZvcmUgY291bGRuJ3QgYmUgZGlmZmVyZW50aWF0ZWQgYmV0d2VlbiB0d28gbG9uZyBjaGFubmVsIG5hbWVzIHdpdGggdGhlIHNhbWUgZmlyc3QgMzAgKG9yIHNvKSBjaGFyYWN0ZXJzICAgXG4gICAgY29uc3QgY2hhbm5lbEl0ZW1zID0gbmV3IE1hcDxzdHJpbmcsIFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUNoYW5uZWxNZW51SXRlbT4+KClcblxuICAgIGZ1bmN0aW9uIHNldFN0YXRpb25OYW1lcyhuYW1lczogc3RyaW5nW10pIHtcbiAgICAgICAgY2hhbm5lbEl0ZW1zLmNsZWFyKClcbiAgICAgICAgc3ViTWVudS5ib3gucmVtb3ZlX2FsbF9jaGlsZHJlbigpXG5cbiAgICAgICAgbmFtZXMuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxQbGF5YmFja3N0YXR1cyA9XG4gICAgICAgICAgICAgICAgKG5hbWUgPT09IGN1cnJlbnRDaGFubmVsTmFtZSkgPyBwbGF5YmFja1N0YXR1cyA6ICdTdG9wcGVkJ1xuXG4gICAgICAgICAgICBjb25zdCBjaGFubmVsSXRlbSA9IGNyZWF0ZUNoYW5uZWxNZW51SXRlbSh7XG4gICAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgb25BY3RpdmF0ZWQ6IG9uQ2hhbm5lbENsaWNrZWQsXG4gICAgICAgICAgICAgICAgcGxheWJhY2tTdGF0dXM6IGNoYW5uZWxQbGF5YmFja3N0YXR1c1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgY2hhbm5lbEl0ZW1zLnNldChuYW1lLCBjaGFubmVsSXRlbSlcbiAgICAgICAgICAgIHN1Yk1lbnUuYm94LmFkZF9jaGlsZChjaGFubmVsSXRlbS5hY3RvcilcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRQbGF5YmFja1N0YXR1cyhuZXdTdGF0dXM6IEFkdmFuY2VkUGxheWJhY2tTdGF0dXMpIHtcbiAgICAgICAgcGxheWJhY2tTdGF0dXMgPSBuZXdTdGF0dXNcblxuICAgICAgICBpZiAoIWN1cnJlbnRDaGFubmVsTmFtZSkgcmV0dXJuXG5cbiAgICAgICAgY29uc3QgY2hhbm5lbE1lbnVJdGVtID0gY2hhbm5lbEl0ZW1zLmdldChjdXJyZW50Q2hhbm5lbE5hbWUpXG4gICAgICAgIGNoYW5uZWxNZW51SXRlbT8uc2V0UGxheWJhY2tTdGF0dXMocGxheWJhY2tTdGF0dXMpXG5cbiAgICAgICAgaWYgKHBsYXliYWNrU3RhdHVzID09PSAnU3RvcHBlZCcpXG4gICAgICAgICAgICBjdXJyZW50Q2hhbm5lbE5hbWUgPSBudWxsXG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRDdXJyZW50Q2hhbm5lbChuYW1lOiBzdHJpbmcpIHtcblxuICAgICAgICBjb25zdCBjdXJyZW50Q2hhbm5lbEl0ZW0gPSBjaGFubmVsSXRlbXMuZ2V0KGN1cnJlbnRDaGFubmVsTmFtZSlcbiAgICAgICAgY3VycmVudENoYW5uZWxJdGVtPy5zZXRQbGF5YmFja1N0YXR1cygnU3RvcHBlZCcpXG5cbiAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoYW5uZWxJdGVtID0gY2hhbm5lbEl0ZW1zLmdldChuYW1lKVxuICAgICAgICAgICAgaWYgKCFuZXdDaGFubmVsSXRlbSkgdGhyb3cgbmV3IEVycm9yKGBObyBjaGFubmVsSXRlbSBleGlzdCBmb3IgJHtuYW1lfWApXG4gICAgICAgICAgICBuZXdDaGFubmVsSXRlbS5zZXRQbGF5YmFja1N0YXR1cyhwbGF5YmFja1N0YXR1cylcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnRDaGFubmVsTmFtZSA9IG5hbWVcbiAgICB9XG5cbiAgICBzZXRTdGF0aW9uTmFtZXMoc3RhdGlvbk5hbWVzKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0b3I6IHN1Yk1lbnUuYWN0b3IsXG4gICAgICAgIHNldFBsYXliYWNrU3RhdHVzLFxuICAgICAgICBzZXRTdGF0aW9uTmFtZXMsXG4gICAgICAgIHNldEN1cnJlbnRDaGFubmVsXG4gICAgfVxufSIsImltcG9ydCB7IFBsYXlQYXVzZSwgQWR2YW5jZWRQbGF5YmFja1N0YXR1cyB9IGZyb20gJy4uL3R5cGVzJ1xuaW1wb3J0IHsgTVBWX01QUklTX0JVU19OQU1FLCBNRURJQV9QTEFZRVJfMl9QQVRILCBNUFJJU19QTFVHSU5fUEFUSCwgTUFYX1ZPTFVNRSwgTUVESUFfUExBWUVSXzJfTkFNRSwgTUVESUFfUExBWUVSXzJfUExBWUVSX05BTUUsIE1QVl9DVkNfTkFNRSB9IGZyb20gJy4uL2NvbnN0cydcbmltcG9ydCB7IE1wcmlzTWVkaWFQbGF5ZXJEYnVzLCBNcHJpc1Byb3BzRGJ1cywgUGxheWJhY2tTdGF0dXMgfSBmcm9tICcuLi9NcHJpc1R5cGVzJztcbmNvbnN0IHsgZ2V0REJ1c1Byb3BlcnRpZXMsIGdldERCdXMsIGdldERCdXNQcm94eVdpdGhPd25lciB9ID0gaW1wb3J0cy5taXNjLmludGVyZmFjZXNcbmNvbnN0IHsgc3Bhd25Db21tYW5kTGluZSB9ID0gaW1wb3J0cy5taXNjLnV0aWw7XG4vLyBzZWUgaHR0cHM6Ly9sYXprYS5naXRodWIuaW8vcGdpLWRvY3MvQ3ZjLTEuMC9pbmRleC5odG1sXG5jb25zdCB7IE1peGVyQ29udHJvbCB9ID0gaW1wb3J0cy5naS5DdmM7XG5cblxuZXhwb3J0IGludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIG9uUGxheWJhY2tzdGF0dXNDaGFuZ2VkOiAocGxheWJhY2tTdGF0dXM6IEFkdmFuY2VkUGxheWJhY2tTdGF0dXMpID0+IHZvaWQsXG4gICAgb25VcmxDaGFuZ2VkOiAodXJsOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgb25Wb2x1bWVDaGFuZ2VkOiAodm9sdW1lOiBudW1iZXIpID0+IHZvaWQsXG4gICAgb25UaXRsZUNoYW5nZWQ6ICh0aXRsZTogc3RyaW5nKSA9PiB2b2lkLFxuICAgIC8qKiBsZW5ndGggaW4gc2Vjb25kcyAqL1xuICAgIG9uTGVuZ3RoQ2hhbmdlZDogKGxlbmd0aDogbnVtYmVyKSA9PiB2b2lkLFxuICAgIC8qKiBwb3NpdGlvbiBpbiBzZWNvbmRzICovXG4gICAgb25Qb3NpdGlvbkNoYW5nZWQ6IChwb3NpdGlvbjogbnVtYmVyKSA9PiB2b2lkLFxuICAgIGNoZWNrVXJsVmFsaWQ6ICh1cmw6IHN0cmluZykgPT4gYm9vbGVhbixcbiAgICAvKiogdGhlIGxhc3RVcmwgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgbXB2IGlzIGluaXRpYWxseSAoaS5lLiBvbiBjaW5uYW1vbiByZXN0YXJ0KSBydW5uaW5nIGZvciByYWRpbyBwdXJwb3NlcyBhbmQgbm90IGZvciBzb21ldGhpbmcgZWxzZS4gSXQgaXMgbm90IHN1ZmZpY2llbnQgdG8gZ2V0IHRoZSB1cmwgZnJvbSBhIGRidXMgaW50ZXJmYWNlIGFuZCBjaGVjayBpZiB0aGUgdXJsIGlzIHZhbGlkIGJlY2F1c2Ugc29tZSBzdHJlYW1zIChzdWNoIGFzIC5wbHMgc3RyZWFtcykgY2hhbmdlIHRoZWlyIHVybCBkeW5hbWljYWxseS4gVGhpcyBhcHByb2FjaCBpbiBub3QgMTAwJSBmb29scHJvb2YgYnV0IHByb2JhYmx5IHRoZSBiZXN0IHBvc3NpYmxlIGFwcHJvYWNoICovXG4gICAgbGFzdFVybDogc3RyaW5nLFxuXG4gICAgLy8gVE9ETyBtYWtlIGFzIHNldHRlclxuICAgIGdldEluaXRpYWxWb2x1bWU6IHsgKCk6IG51bWJlciB9XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1wdkhhbmRsZXIoYXJnczogQXJndW1lbnRzKSB7XG4gICAgY29uc3Qge1xuICAgICAgICBvblBsYXliYWNrc3RhdHVzQ2hhbmdlZCxcbiAgICAgICAgb25VcmxDaGFuZ2VkLFxuICAgICAgICBvblZvbHVtZUNoYW5nZWQsXG4gICAgICAgIG9uVGl0bGVDaGFuZ2VkLFxuICAgICAgICBvbkxlbmd0aENoYW5nZWQsXG4gICAgICAgIG9uUG9zaXRpb25DaGFuZ2VkLFxuICAgICAgICBjaGVja1VybFZhbGlkLFxuICAgICAgICBsYXN0VXJsLFxuICAgICAgICBnZXRJbml0aWFsVm9sdW1lLFxuXG4gICAgfSA9IGFyZ3NcblxuICAgIGNvbnN0IGRidXMgPSBnZXREQnVzKClcblxuICAgIGNvbnN0IG1lZGlhU2VydmVyUGxheWVyID0gZ2V0REJ1c1Byb3h5V2l0aE93bmVyKFxuICAgICAgICBNRURJQV9QTEFZRVJfMl9QTEFZRVJfTkFNRSwgTVBWX01QUklTX0JVU19OQU1FKSBhcyBNcHJpc01lZGlhUGxheWVyRGJ1c1xuXG4gICAgY29uc3QgbWVkaWFQcm9wcyA9IGdldERCdXNQcm9wZXJ0aWVzKFxuICAgICAgICBNUFZfTVBSSVNfQlVTX05BTUUsIE1FRElBX1BMQVlFUl8yX1BBVEgpIGFzIE1wcmlzUHJvcHNEYnVzXG5cbiAgICBjb25zdCBjb250cm9sID0gbmV3IE1peGVyQ29udHJvbCh7IG5hbWU6IF9fbWV0YS5uYW1lIH0pXG4gICAgbGV0IGN2Y1N0cmVhbTogaW1wb3J0cy5naS5DdmMuTWl4ZXJTdHJlYW1cblxuICAgIGNvbnRyb2wub3BlbigpXG4gICAgY29udHJvbC5jb25uZWN0KCdzdHJlYW0tYWRkZWQnLCAoY3RybCwgaWQpID0+IHtcblxuICAgICAgICBjb25zdCBhZGRlZFN0cmVhbSA9IGNvbnRyb2wubG9va3VwX3N0cmVhbV9pZChpZClcblxuICAgICAgICBpZiAoYWRkZWRTdHJlYW0/Lm5hbWUgIT09IE1QVl9DVkNfTkFNRSlcbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIGN2Y1N0cmVhbSA9IGFkZGVkU3RyZWFtXG4gICAgICAgIGN2Y1N0cmVhbS5jb25uZWN0KCdub3RpZnk6OnZvbHVtZScsICgpID0+IHtcbiAgICAgICAgICAgIGhhbmRsZUN2Y1ZvbHVtZUNoYW5nZWQoKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBXaGVuIG5vIGxhc3QgVXJsIGlzIHBhc3NlZCBhbmQgbXB2IGlzIHJ1bm5pbmcsIGl0IGlzIGFzc3VtZWQgdGhhdCBtcHYgaXMgbm90IHVzZWQgZm9yIHRoZSByYWRpbyBhcHBsZXQgKGFuZCB0aGVyZWZvcmUgdGhlIHBsYXliYWNrc3RhdHVzIGlzIFN0b3BwZWQpXG4gICAgY29uc3QgaW5pdGlhbFBsYXliYWNrU3RhdHVzID0gIWxhc3RVcmwgPyAnU3RvcHBlZCcgOiBnZXRQbGF5YmFja1N0YXR1cygpXG5cbiAgICBsZXQgY3VycmVudFVybCA9IGluaXRpYWxQbGF5YmFja1N0YXR1cyAhPT0gXCJTdG9wcGVkXCIgPyBsYXN0VXJsIDogbnVsbFxuICAgIGxldCBjdXJyZW50TGVuZ3RoOiBudW1iZXIgPSBnZXRMZW5ndGgoKSAvLyBpbiBzZWNvbmRzXG4gICAgbGV0IHBvc2l0aW9uVGltZXJJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+XG5cbiAgICBsZXQgYnVmZmVyRXhjZWVkZWQgPSBmYWxzZVxuXG4gICAgbGV0IG1lZGlhUHJvcHNMaXN0ZW5lcklkOiBudW1iZXJcbiAgICBsZXQgc2Vla0xpc3RlbmVySWQ6IG51bWJlclxuXG4gICAgaWYgKGluaXRpYWxQbGF5YmFja1N0YXR1cyAhPT0gXCJTdG9wcGVkXCIpIHtcbiAgICAgICAgYWN0aXZhdGVNcHJpc1Byb3BzTGlzdGVuZXIoKTtcbiAgICAgICAgYWN0aXZlU2Vla0xpc3RlbmVyKClcblxuICAgICAgICBvblVybENoYW5nZWQoY3VycmVudFVybClcbiAgICAgICAgb25QbGF5YmFja3N0YXR1c0NoYW5nZWQoaW5pdGlhbFBsYXliYWNrU3RhdHVzKVxuICAgICAgICBvblZvbHVtZUNoYW5nZWQoZ2V0Vm9sdW1lKCkpXG4gICAgICAgIG9uVGl0bGVDaGFuZ2VkKGdldEN1cnJlbnRUaXRsZSgpKVxuICAgICAgICBvbkxlbmd0aENoYW5nZWQoY3VycmVudExlbmd0aClcbiAgICAgICAgb25Qb3NpdGlvbkNoYW5nZWQoZ2V0UG9zaXRpb24oKSlcblxuICAgICAgICBzdGFydFBvc2l0aW9uVGltZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IG5hbWVPd25lclNpZ25hbElkID0gZGJ1cy5jb25uZWN0U2lnbmFsKCdOYW1lT3duZXJDaGFuZ2VkJywgKC4uLmFyZ3MpID0+IHtcblxuICAgICAgICBjb25zdCBuYW1lID0gYXJnc1syXVswXVxuICAgICAgICBjb25zdCBvbGRPd25lciA9IGFyZ3NbMl1bMV1cbiAgICAgICAgY29uc3QgbmV3T3duZXIgPSBhcmdzWzJdWzJdXG5cbiAgICAgICAgaWYgKG5hbWUgIT09IE1QVl9NUFJJU19CVVNfTkFNRSkgcmV0dXJuXG5cbiAgICAgICAgaWYgKG5ld093bmVyKSB7XG4gICAgICAgICAgICBhY3RpdmF0ZU1wcmlzUHJvcHNMaXN0ZW5lcigpXG4gICAgICAgICAgICBhY3RpdmVTZWVrTGlzdGVuZXIoKVxuICAgICAgICAgICAgcGF1c2VBbGxPdGhlck1lZGlhUGxheWVycygpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2xkT3duZXIpIHtcbiAgICAgICAgICAgIGN1cnJlbnRMZW5ndGggPSAwXG4gICAgICAgICAgICBzdG9wUG9zaXRpb25UaW1lcigpXG4gICAgICAgICAgICBtZWRpYVByb3BzLmRpc2Nvbm5lY3RTaWduYWwobWVkaWFQcm9wc0xpc3RlbmVySWQpXG4gICAgICAgICAgICBtZWRpYVNlcnZlclBsYXllci5kaXNjb25uZWN0U2lnbmFsKHNlZWtMaXN0ZW5lcklkKVxuICAgICAgICAgICAgbWVkaWFQcm9wc0xpc3RlbmVySWQgPSBzZWVrTGlzdGVuZXJJZCA9IGN1cnJlbnRVcmwgPSBudWxsXG4gICAgICAgICAgICBvblBsYXliYWNrc3RhdHVzQ2hhbmdlZCgnU3RvcHBlZCcpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gZGVhY3RpdmF0ZUFsbExpc3RlbmVyKCkge1xuICAgICAgICBkYnVzLmRpc2Nvbm5lY3RTaWduYWwobmFtZU93bmVyU2lnbmFsSWQpXG4gICAgICAgIGlmIChtZWRpYVByb3BzTGlzdGVuZXJJZCkgbWVkaWFQcm9wcz8uZGlzY29ubmVjdFNpZ25hbChtZWRpYVByb3BzTGlzdGVuZXJJZClcbiAgICAgICAgaWYgKHNlZWtMaXN0ZW5lcklkKSBtZWRpYVNlcnZlclBsYXllcj8uZGlzY29ubmVjdFNpZ25hbChzZWVrTGlzdGVuZXJJZClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZU1wcmlzUHJvcHNMaXN0ZW5lcigpIHtcbiAgICAgICAgbWVkaWFQcm9wc0xpc3RlbmVySWQgPSBtZWRpYVByb3BzLmNvbm5lY3RTaWduYWwoJ1Byb3BlcnRpZXNDaGFuZ2VkJyxcbiAgICAgICAgICAgIChwcm94eSwgbmFtZU93bmVyLCBbaW50ZXJmYWNlTmFtZSwgcHJvcHNdKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAvLyB0aGVvcmV0aWNhbGx5IGl0IGNvdWxkIGJlIHVzZWQgcmVjdXJzaXZlVW5wYWNrIGJ1dCB0aGlzIGRvZXNuJ3Qgd29yayBvbiBjaW5uYW1vbiAyMCB5ZXQgKGJ1dCBvbiAyMC4xKVxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gcHJvcHMuTWV0YWRhdGE/LmRlZXBfdW5wYWNrKClcbiAgICAgICAgICAgICAgICBjb25zdCB2b2x1bWUgPSBwcm9wcy5Wb2x1bWU/LnVucGFjaygpXG5cbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5YmFja1N0YXR1cyA9IHByb3BzLlBsYXliYWNrU3RhdHVzPy51bnBhY2soKSBhcyBQbGF5UGF1c2VcblxuICAgICAgICAgICAgICAgIC8vZ2xvYmFsLmxvZyhgbWV0YWRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocHJvcHMuTWV0YWRhdGE/LnJlY3Vyc2l2ZVVucGFjaygpKX0sIHBsYXliYWNrU3RhdHVzOiAke3BsYXliYWNrU3RhdHVzfSwgdm9sdW1lOiAke3ZvbHVtZX1gKVxuXG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gbWV0YWRhdGE/LlsneGVzYW06dXJsJ10/LnVucGFjaygpXG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBtZXRhZGF0YT8uWyd4ZXNhbTp0aXRsZSddPy51bnBhY2soKVxuXG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gbWV0YWRhdGE/LltcIm1wcmlzOmxlbmd0aFwiXT8udW5wYWNrKClcblxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1VybFZhbGlkID0gY2hlY2tVcmxWYWxpZCh1cmwpXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsZXZhbnRFdmVudCA9IG5ld1VybFZhbGlkIHx8IGN1cnJlbnRVcmxcblxuICAgICAgICAgICAgICAgIGlmICghcmVsZXZhbnRFdmVudCkgcmV0dXJuIC8vIGhhcHBlbnMgd2hlbiBtcHYgaXMgcnVubmluZyB3aXRoIGEgZmlsZS9zdHJlYW0gbm90IG1hbmFnZWQgYnkgdGhlIGFwcGxldFxuXG5cbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoICE9IG51bGwpIGhhbmRsZUxlbmd0aENoYW5nZWQobGVuZ3RoKVxuXG4gICAgICAgICAgICAgICAgaWYgKHZvbHVtZSAhPSBudWxsKSBoYW5kbGVNcHJpc1ZvbHVtZUNoYW5nZWQodm9sdW1lKVxuXG4gICAgICAgICAgICAgICAgcGxheWJhY2tTdGF0dXMgJiYgaGFuZGxlTXByaXNQbGF5YmFja1N0YXR1c0NoYW5nZWQocGxheWJhY2tTdGF0dXMpXG4gICAgICAgICAgICAgICAgdXJsICYmIG5ld1VybFZhbGlkICYmIHVybCAhPT0gY3VycmVudFVybCAmJiBoYW5kbGVVcmxDaGFuZ2VkKHVybClcbiAgICAgICAgICAgICAgICB0aXRsZSAmJiBoYW5kbGVUaXRsZVNldCh0aXRsZSlcblxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWN0aXZlU2Vla0xpc3RlbmVyKCkge1xuICAgICAgICBzZWVrTGlzdGVuZXJJZCA9IG1lZGlhU2VydmVyUGxheWVyLmNvbm5lY3RTaWduYWwoJ1NlZWtlZCcsIChpZCwgc2VuZGVyLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaGFuZGxlUG9zaXRpb25DaGFuZ2VkKG1pY3JvU2Vjb25kc1RvUm91bmRlZFNlY29uZHModmFsdWUpKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKiBAcGFyYW0gbGVuZ3RoIGluIG1pY3Jvc2Vjb25kcyAqL1xuICAgIGZ1bmN0aW9uIGhhbmRsZUxlbmd0aENoYW5nZWQobGVuZ3RoOiBudW1iZXIpIHtcblxuICAgICAgICBjb25zdCBsZW5ndGhJblNlY29uZHMgPSBtaWNyb1NlY29uZHNUb1JvdW5kZWRTZWNvbmRzKGxlbmd0aCk7XG5cbiAgICAgICAgb25MZW5ndGhDaGFuZ2VkKGxlbmd0aEluU2Vjb25kcyk7XG5cbiAgICAgICAgY29uc3Qgc3RhcnRMb2FkaW5nID0gKGxlbmd0aCA9PT0gMCk7XG4gICAgICAgIGNvbnN0IGZpbmlzaGVkTG9hZGluZyA9IGxlbmd0aCAhPT0gMCAmJiBjdXJyZW50TGVuZ3RoID09PSAwO1xuXG4gICAgICAgIGN1cnJlbnRMZW5ndGggPSBsZW5ndGhJblNlY29uZHM7XG5cbiAgICAgICAgaWYgKHN0YXJ0TG9hZGluZykge1xuICAgICAgICAgICAgb25QbGF5YmFja3N0YXR1c0NoYW5nZWQoJ0xvYWRpbmcnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbmlzaGVkTG9hZGluZyB8fCBidWZmZXJFeGNlZWRlZCkge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBmaW5pc2hlZExvYWRpbmcgPyAwIDogZ2V0UG9zaXRpb24oKVxuICAgICAgICAgICAgaGFuZGxlUG9zaXRpb25DaGFuZ2VkKHBvc2l0aW9uKVxuICAgICAgICAgICAgb25QbGF5YmFja3N0YXR1c0NoYW5nZWQoZ2V0UGxheWJhY2tTdGF0dXMoKSlcbiAgICAgICAgICAgIGJ1ZmZlckV4Y2VlZGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiAgQHBhcmFtIHBvc2l0aW9uIGluIHNlY29uZHMhICovXG4gICAgZnVuY3Rpb24gaGFuZGxlUG9zaXRpb25DaGFuZ2VkKHBvc2l0aW9uOiBudW1iZXIpIHtcblxuICAgICAgICBzdG9wUG9zaXRpb25UaW1lcigpXG4gICAgICAgIG9uUG9zaXRpb25DaGFuZ2VkKHBvc2l0aW9uKVxuICAgICAgICBzdGFydFBvc2l0aW9uVGltZXIoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0YXJ0UG9zaXRpb25UaW1lcigpIHtcblxuICAgICAgICBpZiAoZ2V0UGxheWJhY2tTdGF0dXMoKSAhPT0gJ1BsYXlpbmcnKSByZXR1cm5cblxuICAgICAgICBwb3NpdGlvblRpbWVySWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gTWF0aC5taW4oZ2V0UG9zaXRpb24oKSwgY3VycmVudExlbmd0aClcblxuICAgICAgICAgICAgb25Qb3NpdGlvbkNoYW5nZWQocG9zaXRpb24pXG5cbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gY3VycmVudExlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9uUGxheWJhY2tzdGF0dXNDaGFuZ2VkKCdMb2FkaW5nJylcbiAgICAgICAgICAgICAgICBidWZmZXJFeGNlZWRlZCA9IHRydWVcbiAgICAgICAgICAgICAgICBzdG9wUG9zaXRpb25UaW1lcigpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RvcFBvc2l0aW9uVGltZXIoKSB7XG5cbiAgICAgICAgaWYgKCFwb3NpdGlvblRpbWVySWQpIHJldHVyblxuXG4gICAgICAgIGNsZWFySW50ZXJ2YWwocG9zaXRpb25UaW1lcklkKVxuICAgICAgICBwb3NpdGlvblRpbWVySWQgPSBudWxsXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlTXByaXNQbGF5YmFja1N0YXR1c0NoYW5nZWQocGxheWJhY2tTdGF0dXM6IFBsYXlQYXVzZSkge1xuICAgICAgICBpZiAoY3VycmVudExlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgb25QbGF5YmFja3N0YXR1c0NoYW5nZWQocGxheWJhY2tTdGF0dXMpXG5cbiAgICAgICAgICAgIHBsYXliYWNrU3RhdHVzID09PSAnUGF1c2VkJyA/IHN0b3BQb3NpdGlvblRpbWVyKClcbiAgICAgICAgICAgICAgICA6IGhhbmRsZVBvc2l0aW9uQ2hhbmdlZChnZXRQb3NpdGlvbigpKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlVXJsQ2hhbmdlZChuZXdVcmw6IHN0cmluZykge1xuICAgICAgICBjdXJyZW50VXJsID0gbmV3VXJsXG4gICAgICAgIGhhbmRsZUxlbmd0aENoYW5nZWQoMClcblxuICAgICAgICBpZiAocG9zaXRpb25UaW1lcklkKSBzdG9wUG9zaXRpb25UaW1lcigpXG4gICAgICAgIG9uUG9zaXRpb25DaGFuZ2VkKDApXG5cbiAgICAgICAgb25VcmxDaGFuZ2VkKG5ld1VybClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVNcHJpc1ZvbHVtZUNoYW5nZWQobXByaXNWb2x1bWU6IG51bWJlcikge1xuXG4gICAgICAgIGlmIChtcHJpc1ZvbHVtZSAqIDEwMCA+IE1BWF9WT0xVTUUpIHtcbiAgICAgICAgICAgIG1lZGlhU2VydmVyUGxheWVyLlZvbHVtZSA9IE1BWF9WT0xVTUUgLyAxMDBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFZvbHVtZSA9IE1hdGgucm91bmQobXByaXNWb2x1bWUgKiAxMDApXG4gICAgICAgIHNldEN2Y1ZvbHVtZShub3JtYWxpemVkVm9sdW1lKVxuICAgICAgICBvblZvbHVtZUNoYW5nZWQobm9ybWFsaXplZFZvbHVtZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVDdmNWb2x1bWVDaGFuZ2VkKCkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkVm9sdW1lID0gTWF0aC5yb3VuZChjdmNTdHJlYW0udm9sdW1lIC8gY29udHJvbC5nZXRfdm9sX21heF9ub3JtKCkgKiAxMDApXG4gICAgICAgIHNldE1wcmlzVm9sdW1lKG5vcm1hbGl6ZWRWb2x1bWUpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlVGl0bGVTZXQodGl0bGU6IHN0cmluZykge1xuICAgICAgICBvblRpdGxlQ2hhbmdlZCh0aXRsZSlcbiAgICB9XG5cbiAgICAvKiogQHJldHVybnMgbGVuZ3RoIGluIHNlY29uZHMgKi9cbiAgICBmdW5jdGlvbiBnZXRMZW5ndGgoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgbGVuZ3RoTWljcm9TZWNvbmRzID0gbWVkaWFTZXJ2ZXJQbGF5ZXIuTWV0YWRhdGE/LltcIm1wcmlzOmxlbmd0aFwiXT8udW5wYWNrKCkgfHwgMFxuICAgICAgICByZXR1cm4gbWljcm9TZWNvbmRzVG9Sb3VuZGVkU2Vjb25kcyhsZW5ndGhNaWNyb1NlY29uZHMpXG4gICAgfVxuXG4gICAgLyoqIEByZXR1cm5zIHBvc2l0aW9uIGluIHNlY29uZHMgKi9cbiAgICBmdW5jdGlvbiBnZXRQb3NpdGlvbigpOiBudW1iZXIge1xuXG4gICAgICAgIGlmIChnZXRQbGF5YmFja1N0YXR1cygpID09PSAnU3RvcHBlZCcpIHJldHVybiAwXG5cbiAgICAgICAgLy8gZm9yIHNvbWUgcmVhc29uLCB0aGlzIG9ubHkgcmV0dXJuIHRoZSByaWdodCB2YWx1ZSB0aGUgZmlyc3QgdGltZSBpdCBpcyBjYWxsZWQuIFdoZW4gY2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzLCBpdCByZXR1cm5zIGFsd2F5cyB0aGUgc2FtZSB2YWx1ZSB3aGljaCBob3dldmVyIGlzIHdyb25nIHdoZW4gcmFkaW8gaXMgcGxheWluZ1xuICAgICAgICAvLyBjb25zdCBwb3NpdGlvbk1pY3JvU2Vjb25kcyA9IG1lZGlhU2VydmVyUGxheWVyLlBvc2l0aW9uXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uTWljcm9TZWNvbmRzID0gbWVkaWFQcm9wcy5HZXRTeW5jKCdvcmcubXByaXMuTWVkaWFQbGF5ZXIyLlBsYXllcicsICdQb3NpdGlvbicpWzBdLmRlZXBfdW5wYWNrKClcblxuICAgICAgICByZXR1cm4gbWljcm9TZWNvbmRzVG9Sb3VuZGVkU2Vjb25kcyhwb3NpdGlvbk1pY3JvU2Vjb25kcylcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHNldFVybCh1cmw6IHN0cmluZykge1xuXG4gICAgICAgIGlmIChnZXRQbGF5YmFja1N0YXR1cygpID09PSAnU3RvcHBlZCcpIHtcblxuICAgICAgICAgICAgY29uc3QgaW5pdGlhbFZvbHVtZSA9IGdldEluaXRpYWxWb2x1bWUoKVxuXG4gICAgICAgICAgICBpZiAoaW5pdGlhbFZvbHVtZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbml0aWFsIFZvbHVtZSBtdXN0IG5vdCBiZSB1bmRlZmluZWQgb3IgbnVsbCcpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBgbXB2IC0tc2NyaXB0PSR7TVBSSVNfUExVR0lOX1BBVEh9ICR7dXJsfSBcbiAgICAgICAgICAgICAgICAtLXZvbHVtZT0ke2luaXRpYWxWb2x1bWV9YFxuICAgICAgICAgICAgc3Bhd25Db21tYW5kTGluZShjb21tYW5kKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBtZWRpYVNlcnZlclBsYXllci5PcGVuVXJpUmVtb3RlKHVybClcbiAgICAgICAgbWVkaWFTZXJ2ZXJQbGF5ZXIuUGxheVN5bmMoKVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5jcmVhc2VEZWNyZWFzZVZvbHVtZSh2b2x1bWVDaGFuZ2U6IG51bWJlcikge1xuXG4gICAgICAgIC8vIG5ld1ZvbHVtZSBpcyB0aGUgY3VycmVudCBWb2x1bWUgcGx1cyhvciBtaW51cykgdm9sdW1lQ2hhbmdlIFxuICAgICAgICAvLyBidXQgYXQgbGVhc3QgMCBhbmQgbWF4aW11bSBNYXhfVm9sdW1lXG4gICAgICAgIGNvbnN0IG5ld1ZvbHVtZSA9IE1hdGgubWluKFxuICAgICAgICAgICAgTUFYX1ZPTFVNRSxcbiAgICAgICAgICAgIE1hdGgubWF4KDAsIGdldFZvbHVtZSgpICsgdm9sdW1lQ2hhbmdlKVxuICAgICAgICApXG5cbiAgICAgICAgc2V0TXByaXNWb2x1bWUobmV3Vm9sdW1lKVxuICAgIH1cblxuICAgIC8qKiBAcGFyYW0gbmV3Vm9sdW1lIHZvbHVtZSBpbiBwZXJjZW50ICovXG4gICAgZnVuY3Rpb24gc2V0TXByaXNWb2x1bWUobmV3Vm9sdW1lOiBudW1iZXIpIHtcblxuICAgICAgICBpZiAoZ2V0Vm9sdW1lKCkgPT09IG5ld1ZvbHVtZSB8fCBnZXRQbGF5YmFja1N0YXR1cygpID09PSAnU3RvcHBlZCcpIHJldHVyblxuXG4gICAgICAgIG1lZGlhU2VydmVyUGxheWVyLlZvbHVtZSA9IG5ld1ZvbHVtZSAvIDEwMFxuICAgIH1cblxuICAgIC8qKiBAcGFyYW0gbmV3Vm9sdW1lIHZvbHVtZSBpbiBwZXJjZW50ICovXG4gICAgZnVuY3Rpb24gc2V0Q3ZjVm9sdW1lKG5ld1ZvbHVtZTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IG5ld1N0cmVhbVZvbHVtZSA9IG5ld1ZvbHVtZSAvIDEwMCAqIGNvbnRyb2wuZ2V0X3ZvbF9tYXhfbm9ybSgpXG5cbiAgICAgICAgaWYgKCFjdmNTdHJlYW0pIHJldHVyblxuXG4gICAgICAgIGlmIChjdmNTdHJlYW0udm9sdW1lID09PSBuZXdTdHJlYW1Wb2x1bWUpIHJldHVyblxuXG4gICAgICAgIGN2Y1N0cmVhbS5pc19tdXRlZCAmJiBjdmNTdHJlYW0uY2hhbmdlX2lzX211dGVkKGZhbHNlKVxuICAgICAgICBjdmNTdHJlYW0udm9sdW1lID0gbmV3U3RyZWFtVm9sdW1lXG4gICAgICAgIGN2Y1N0cmVhbS5wdXNoX3ZvbHVtZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlUGxheVBhdXNlKCkge1xuICAgICAgICBpZiAoZ2V0UGxheWJhY2tTdGF0dXMoKSA9PT0gXCJTdG9wcGVkXCIpIHJldHVyblxuXG4gICAgICAgIG1lZGlhU2VydmVyUGxheWVyLlBsYXlQYXVzZVN5bmMoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgIGlmIChnZXRQbGF5YmFja1N0YXR1cygpID09PSBcIlN0b3BwZWRcIikgcmV0dXJuXG5cbiAgICAgICAgbWVkaWFTZXJ2ZXJQbGF5ZXIuU3RvcFN5bmMoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRUaXRsZSgpOiBzdHJpbmcge1xuICAgICAgICBpZiAoZ2V0UGxheWJhY2tTdGF0dXMoKSA9PT0gXCJTdG9wcGVkXCIpIHJldHVyblxuXG4gICAgICAgIHJldHVybiBtZWRpYVNlcnZlclBsYXllci5NZXRhZGF0YVtcInhlc2FtOnRpdGxlXCJdLnVucGFjaygpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcGF1c2VzIGFsbCBNZWRpYVBsYXllcnMgd2l0aCBNUFJJUyBTdXBwb3J0IGV4Y2VwdCBtcHZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXVzZUFsbE90aGVyTWVkaWFQbGF5ZXJzKCkge1xuXG4gICAgICAgIGRidXMuTGlzdE5hbWVzU3luYygpWzBdLmZvckVhY2goYnVzTmFtZSA9PiB7XG5cbiAgICAgICAgICAgIGlmICghYnVzTmFtZS5pbmNsdWRlcyhNRURJQV9QTEFZRVJfMl9OQU1FKSB8fCBidXNOYW1lID09PSBNUFZfTVBSSVNfQlVTX05BTUUpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgICAgIGNvbnN0IG5vbk1wdk1lZGlhU2VydmVyUGxheWVyID0gZ2V0REJ1c1Byb3h5V2l0aE93bmVyKE1FRElBX1BMQVlFUl8yX1BMQVlFUl9OQU1FLCBidXNOYW1lKSBhcyBNcHJpc01lZGlhUGxheWVyRGJ1c1xuXG4gICAgICAgICAgICBub25NcHZNZWRpYVNlcnZlclBsYXllci5QYXVzZVN5bmMoKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFBsYXliYWNrU3RhdHVzKCk6IFBsYXliYWNrU3RhdHVzIHtcblxuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdoZW4gYSB1c2VyIHN0b3BzIG1wdiBhbmQgYWZ0ZXJ3YXJkcyBzdGFydCB2bGMgKG9yIG1heWJlIGFsc28gYW4gb3RoZXIgbWVkaWEgcGxheWVyKSwgbWVkaWFTZXJ2ZXJQbGF5ZXIuUGxheWJhY2tTdGF0dXMgd3JvbmdseSByZXR1cm5zIFwiUGxheWluZ1wiICBcbiAgICAgICAgY29uc3QgbXB2UnVubmluZyA9IGRidXMuTGlzdE5hbWVzU3luYygpWzBdLmluY2x1ZGVzKE1QVl9NUFJJU19CVVNfTkFNRSlcblxuICAgICAgICByZXR1cm4gbXB2UnVubmluZyA/IG1lZGlhU2VydmVyUGxheWVyLlBsYXliYWNrU3RhdHVzIDogJ1N0b3BwZWQnXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBnZXRWb2x1bWUoKTogbnVtYmVyIHwgbnVsbCB7XG5cbiAgICAgICAgaWYgKGdldFBsYXliYWNrU3RhdHVzKCkgPT09ICdTdG9wcGVkJylcbiAgICAgICAgICAgIHJldHVybiBudWxsXG5cbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobWVkaWFTZXJ2ZXJQbGF5ZXIuVm9sdW1lICogMTAwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1pY3JvU2Vjb25kc1RvUm91bmRlZFNlY29uZHMobWljcm9TZWNvbmRzOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IG1pY3JvU2Vjb25kcyAvIDFfMDAwXzAwMFxuICAgICAgICBjb25zdCBzZWNvbmRzUm91bmRlZCA9IE1hdGgucm91bmQoc2Vjb25kcylcbiAgICAgICAgcmV0dXJuIHNlY29uZHNSb3VuZGVkXG4gICAgfVxuXG5cbiAgICAvKiogQHBhcmFtIG5ld1Bvc2l0aW9uIGluIHNlY29uZHMgKi9cbiAgICBmdW5jdGlvbiBzZXRQb3NpdGlvbihuZXdQb3NpdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uaW5NaWNyb1NlY29uZHMgPSBNYXRoLm1pbihuZXdQb3NpdGlvbiAqIDFfMDAwXzAwMCwgY3VycmVudExlbmd0aCAqIDFfMDAwXzAwMClcbiAgICAgICAgY29uc3QgdHJhY2tJZCA9IG1lZGlhU2VydmVyUGxheWVyLk1ldGFkYXRhWydtcHJpczp0cmFja2lkJ10udW5wYWNrKClcbiAgICAgICAgbWVkaWFTZXJ2ZXJQbGF5ZXI/LlNldFBvc2l0aW9uUmVtb3RlKHRyYWNrSWQsIHBvc2l0aW9uaW5NaWNyb1NlY29uZHMpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5jcmVhc2VEZWNyZWFzZVZvbHVtZSxcbiAgICAgICAgc2V0Vm9sdW1lOiBzZXRNcHJpc1ZvbHVtZSxcbiAgICAgICAgc2V0VXJsLFxuICAgICAgICB0b2dnbGVQbGF5UGF1c2UsXG4gICAgICAgIHN0b3AsXG4gICAgICAgIGdldEN1cnJlbnRUaXRsZSxcbiAgICAgICAgc2V0UG9zaXRpb24sXG4gICAgICAgIGRlYWN0aXZhdGVBbGxMaXN0ZW5lcixcbiAgICAgICAgLy8gaXQgaXMgdmVyeSBjb25mdXNpbmcgYnV0IGRidXMgbXVzdCBiZSByZXR1cm5lZCFcbiAgICAgICAgLy8gT3RoZXJ3aWxzZSBhbGwgbGlzdGVuZXJzIHN0b3Agd29ya2luZyBhZnRlciBhYm91dCAyMCBzZWNvbmRzIHdoaWNoIGlzIGZ1Y2tpbmcgZGlmZmljdWx0IHRvIGRlYnVnXG4gICAgICAgIGRidXNcbiAgICB9XG59IiwiY29uc3QgeyBEcmF3aW5nQXJlYSB9ID0gaW1wb3J0cy5naS5TdFxuY29uc3QgeyBjYWlyb19zZXRfc291cmNlX2NvbG9yLCBncmFiX3BvaW50ZXIsIHVuZ3JhYl9wb2ludGVyIH0gPSBpbXBvcnRzLmdpLkNsdXR0ZXJcblxuaW50ZXJmYWNlIFNsaWRlckFyZ3VtZW50cyB7XG4gICAgLyoqIHRoZSB2YWx1ZSBpbml0YWxseSBhcHBsaWVkIHdoZW4gYmV0d2VlbiAwIGFuZCAxLiBJZiB0aGUgdmFsdWUgaXMgYmVsb3cgMCwgdGhlIHNsaWRlciB2YWx1ZSBpcyBzZXQgdG8gMC4gSWYgdGhlIHZhbHVlIGlzIGFib3ZlIDEsIHRoZSBzbGlkZXIgdmFsdWUgaXMgc2V0IHRvIDEgKi9cbiAgICBpbml0aWFsVmFsdWU/OiBudW1iZXIsXG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5ld1ZhbHVlIHZhbHVlIGJldHdlZW4gMCBhbmQgMVxuICAgICAqL1xuICAgIG9uVmFsdWVDaGFuZ2VkPzogKG5ld1ZhbHVlOiBudW1iZXIpID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNsaWRlcihhcmdzOiBTbGlkZXJBcmd1bWVudHMpIHtcblxuICAgIGNvbnN0IHN0eWxlX2NsYXNzID0gJ3BvcHVwLXNsaWRlci1tZW51LWl0ZW0nXG5cbiAgICBjb25zdCB7XG4gICAgICAgIGluaXRpYWxWYWx1ZSxcbiAgICAgICAgb25WYWx1ZUNoYW5nZWRcbiAgICB9ID0gYXJnc1xuXG4gICAgbGV0IHZhbHVlOiBudW1iZXJcbiAgICBpZiAoaW5pdGlhbFZhbHVlKSB2YWx1ZSA9IGxpbWl0VG9NaW5NYXgoaW5pdGlhbFZhbHVlKVxuXG4gICAgY29uc3QgZHJhd2luZyA9IG5ldyBEcmF3aW5nQXJlYSh7XG4gICAgICAgIHN0eWxlX2NsYXNzLFxuICAgICAgICByZWFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgeF9leHBhbmQ6IHRydWVcbiAgICB9KVxuXG4gICAgZHJhd2luZy5jb25uZWN0KCdyZXBhaW50JywgKCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGNyID0gZHJhd2luZy5nZXRfY29udGV4dCgpO1xuICAgICAgICBjb25zdCB0aGVtZU5vZGUgPSBkcmF3aW5nLmdldF90aGVtZV9ub2RlKCk7XG4gICAgICAgIGNvbnN0IFt3aWR0aCwgaGVpZ2h0XSA9IGRyYXdpbmcuZ2V0X3N1cmZhY2Vfc2l6ZSgpXG5cbiAgICAgICAgY29uc3QgaGFuZGxlUmFkaXVzID0gdGhlbWVOb2RlLmdldF9sZW5ndGgoJy1zbGlkZXItaGFuZGxlLXJhZGl1cycpO1xuXG4gICAgICAgIGNvbnN0IHNsaWRlckhlaWdodCA9IHRoZW1lTm9kZS5nZXRfbGVuZ3RoKCctc2xpZGVyLWhlaWdodCcpO1xuXG4gICAgICAgIGNvbnN0IHNsaWRlckJvcmRlcldpZHRoID0gdGhlbWVOb2RlLmdldF9sZW5ndGgoJy1zbGlkZXItYm9yZGVyLXdpZHRoJyk7XG4gICAgICAgIGNvbnN0IHNsaWRlckJvcmRlclJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBzbGlkZXJIZWlnaHQpIC8gMjtcblxuICAgICAgICBjb25zdCBzbGlkZXJCb3JkZXJDb2xvciA9IHRoZW1lTm9kZS5nZXRfY29sb3IoJy1zbGlkZXItYm9yZGVyLWNvbG9yJyk7XG4gICAgICAgIGNvbnN0IHNsaWRlckNvbG9yID0gdGhlbWVOb2RlLmdldF9jb2xvcignLXNsaWRlci1iYWNrZ3JvdW5kLWNvbG9yJyk7XG5cbiAgICAgICAgY29uc3Qgc2xpZGVyQWN0aXZlQm9yZGVyQ29sb3IgPSB0aGVtZU5vZGUuZ2V0X2NvbG9yKCctc2xpZGVyLWFjdGl2ZS1ib3JkZXItY29sb3InKTtcbiAgICAgICAgY29uc3Qgc2xpZGVyQWN0aXZlQ29sb3IgPSB0aGVtZU5vZGUuZ2V0X2NvbG9yKCctc2xpZGVyLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yJyk7XG5cbiAgICAgICAgY29uc3QgVEFVID0gTWF0aC5QSSAqIDI7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlWCA9IGhhbmRsZVJhZGl1cyArICh3aWR0aCAtIDIgKiBoYW5kbGVSYWRpdXMpICogdmFsdWU7XG5cbiAgICAgICAgY3IuYXJjKHNsaWRlckJvcmRlclJhZGl1cyArIHNsaWRlckJvcmRlcldpZHRoLCBoZWlnaHQgLyAyLCBzbGlkZXJCb3JkZXJSYWRpdXMsIFRBVSAqIDEgLyA0LCBUQVUgKiAzIC8gNCk7XG4gICAgICAgIGNyLmxpbmVUbyhoYW5kbGVYLCAoaGVpZ2h0IC0gc2xpZGVySGVpZ2h0KSAvIDIpO1xuICAgICAgICBjci5saW5lVG8oaGFuZGxlWCwgKGhlaWdodCArIHNsaWRlckhlaWdodCkgLyAyKTtcbiAgICAgICAgY3IubGluZVRvKHNsaWRlckJvcmRlclJhZGl1cyArIHNsaWRlckJvcmRlcldpZHRoLCAoaGVpZ2h0ICsgc2xpZGVySGVpZ2h0KSAvIDIpO1xuICAgICAgICBjYWlyb19zZXRfc291cmNlX2NvbG9yKGNyLCBzbGlkZXJBY3RpdmVDb2xvcik7XG4gICAgICAgIGNyLmZpbGxQcmVzZXJ2ZSgpO1xuICAgICAgICBjYWlyb19zZXRfc291cmNlX2NvbG9yKGNyLCBzbGlkZXJBY3RpdmVCb3JkZXJDb2xvcik7XG4gICAgICAgIGNyLnNldExpbmVXaWR0aChzbGlkZXJCb3JkZXJXaWR0aCk7XG4gICAgICAgIGNyLnN0cm9rZSgpO1xuXG4gICAgICAgIGNyLmFyYyh3aWR0aCAtIHNsaWRlckJvcmRlclJhZGl1cyAtIHNsaWRlckJvcmRlcldpZHRoLCBoZWlnaHQgLyAyLCBzbGlkZXJCb3JkZXJSYWRpdXMsIFRBVSAqIDMgLyA0LCBUQVUgKiAxIC8gNCk7XG4gICAgICAgIGNyLmxpbmVUbyhoYW5kbGVYLCAoaGVpZ2h0ICsgc2xpZGVySGVpZ2h0KSAvIDIpO1xuICAgICAgICBjci5saW5lVG8oaGFuZGxlWCwgKGhlaWdodCAtIHNsaWRlckhlaWdodCkgLyAyKTtcbiAgICAgICAgY3IubGluZVRvKHdpZHRoIC0gc2xpZGVyQm9yZGVyUmFkaXVzIC0gc2xpZGVyQm9yZGVyV2lkdGgsIChoZWlnaHQgLSBzbGlkZXJIZWlnaHQpIC8gMik7XG4gICAgICAgIGNhaXJvX3NldF9zb3VyY2VfY29sb3IoY3IsIHNsaWRlckNvbG9yKTtcbiAgICAgICAgY3IuZmlsbFByZXNlcnZlKCk7XG4gICAgICAgIGNhaXJvX3NldF9zb3VyY2VfY29sb3IoY3IsIHNsaWRlckJvcmRlckNvbG9yKTtcbiAgICAgICAgY3Iuc2V0TGluZVdpZHRoKHNsaWRlckJvcmRlcldpZHRoKTtcbiAgICAgICAgY3Iuc3Ryb2tlKCk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlWSA9IGhlaWdodCAvIDI7XG5cbiAgICAgICAgY29uc3QgY29sb3IgPSB0aGVtZU5vZGUuZ2V0X2ZvcmVncm91bmRfY29sb3IoKTtcbiAgICAgICAgY2Fpcm9fc2V0X3NvdXJjZV9jb2xvcihjciwgY29sb3IpO1xuICAgICAgICBjci5hcmMoaGFuZGxlWCwgaGFuZGxlWSwgaGFuZGxlUmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XG4gICAgICAgIGNyLmZpbGwoKTtcblxuICAgICAgICBjci4kZGlzcG9zZSgpO1xuICAgIH0pXG5cbiAgICBkcmF3aW5nLmNvbm5lY3QoJ2J1dHRvbi1wcmVzcy1ldmVudCcsIChhY3RvciwgZXZlbnQpID0+IHtcbiAgICAgICAgZ3JhYl9wb2ludGVyKGRyYXdpbmcpXG5cbiAgICAgICAgY29uc3QgbW90aW9uSWQgPSBkcmF3aW5nLmNvbm5lY3QoJ21vdGlvbi1ldmVudCcsIChhY3RvciwgZXZlbnQpID0+IHtcbiAgICAgICAgICAgIG1vdmVIYW5kbGUoZXZlbnQpXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVsZWFzZUlkID0gZHJhd2luZy5jb25uZWN0KCdidXR0b24tcmVsZWFzZS1ldmVudCcsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXdpbmcuZGlzY29ubmVjdChidXR0b25SZWxlYXNlSWQpXG4gICAgICAgICAgICBkcmF3aW5nLmRpc2Nvbm5lY3QobW90aW9uSWQpXG4gICAgICAgICAgICB1bmdyYWJfcG9pbnRlcigpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbW92ZUhhbmRsZShldmVudClcblxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBtb3ZlSGFuZGxlKGV2ZW50OiBpbXBvcnRzLmdpLkNsdXR0ZXIuRXZlbnQpIHtcblxuICAgICAgICBjb25zdCBbYWJzWCwgYWJzWV0gPSBldmVudC5nZXRfY29vcmRzKClcblxuICAgICAgICBjb25zdCBbc2xpZGVyWCwgc2xpZGVyWV0gPSBkcmF3aW5nLmdldF90cmFuc2Zvcm1lZF9wb3NpdGlvbigpO1xuICAgICAgICBjb25zdCByZWxYID0gYWJzWCAtIHNsaWRlclg7XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBkcmF3aW5nLndpZHRoO1xuICAgICAgICBjb25zdCBoYW5kbGVSYWRpdXMgPSBkcmF3aW5nLmdldF90aGVtZV9ub2RlKCkuZ2V0X2xlbmd0aCgnLXNsaWRlci1oYW5kbGUtcmFkaXVzJyk7XG5cbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSAocmVsWCAtIGhhbmRsZVJhZGl1cykgLyAod2lkdGggLSAyICogaGFuZGxlUmFkaXVzKVxuICAgICAgICBjb25zdCBuZXdWYWx1ZUxpbWl0VG9NaW5NYXggPSBsaW1pdFRvTWluTWF4KG5ld1ZhbHVlKVxuXG4gICAgICAgIHNldFZhbHVlKG5ld1ZhbHVlTGltaXRUb01pbk1heClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaW1pdFRvTWluTWF4KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHZhbHVlLCAxKSwgMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VmFsdWUobmV3VmFsdWU6IG51bWJlciwgc2lsZW50ID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgY29ycmVjdGVkVmFsdWUgPSBsaW1pdFRvTWluTWF4KG5ld1ZhbHVlKVxuXG4gICAgICAgIGlmIChjb3JyZWN0ZWRWYWx1ZSA9PT0gdmFsdWUpIHJldHVyblxuXG4gICAgICAgIHZhbHVlID0gY29ycmVjdGVkVmFsdWVcbiAgICAgICAgaWYgKCFzaWxlbnQpIG9uVmFsdWVDaGFuZ2VkPy4odmFsdWUpXG4gICAgICAgIGRyYXdpbmcucXVldWVfcmVwYWludCgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdG9yOiBkcmF3aW5nLFxuICAgICAgICBzZXRWYWx1ZSxcbiAgICAgICAgZ2V0VmFsdWVcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVBY3RpdldpZGdldCB9IGZyb20gXCIuLi9saWIvQWN0aXZXaWRnZXRcIjtcbmltcG9ydCB7IGNyZWF0ZVNsaWRlciB9IGZyb20gXCIuLi9saWIvU2xpZGVyXCI7XG5pbXBvcnQgeyBnZXRWb2x1bWVJY29uLCBQT1BVUF9JQ09OX0NMQVNTLCBQT1BVUF9NRU5VX0lURU1fQ0xBU1MsIFZPTFVNRV9ERUxUQSB9IGZyb20gJy4uL2NvbnN0cydcblxuY29uc3QgeyBCb3hMYXlvdXQsIEljb24sIEljb25UeXBlIH0gPSBpbXBvcnRzLmdpLlN0XG5jb25zdCB7IFRvb2x0aXAgfSA9IGltcG9ydHMudWkudG9vbHRpcHNcbmNvbnN0IHsgS0VZX1JpZ2h0LCBLRVlfTGVmdCwgU2Nyb2xsRGlyZWN0aW9uIH0gPSBpbXBvcnRzLmdpLkNsdXR0ZXJcblxuaW50ZXJmYWNlIEFyZ3VtZW50cyB7XG4gICAgb25Wb2x1bWVDaGFuZ2VkOiAodmFsdWU6IG51bWJlcikgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVm9sdW1lU2xpZGVyKGFyZ3M6IEFyZ3VtZW50cykge1xuXG4gICAgY29uc3Qge1xuICAgICAgICBvblZvbHVtZUNoYW5nZWRcbiAgICB9ID0gYXJnc1xuXG4gICAgbGV0IHRvb2x0aXA6IGltcG9ydHMudWkudG9vbHRpcHMuVG9vbHRpcFxuXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IEJveExheW91dCh7XG4gICAgICAgIHN0eWxlX2NsYXNzOiBQT1BVUF9NRU5VX0lURU1fQ0xBU1MsXG4gICAgfSlcblxuICAgIGNyZWF0ZUFjdGl2V2lkZ2V0KHtcbiAgICAgICAgd2lkZ2V0OiBjb250YWluZXJcbiAgICB9KVxuXG4gICAgLyoqIGluIFBlcmNlbnQgYW5kIHJvdW5kZWQhICovXG4gICAgbGV0IHZvbHVtZTogbnVtYmVyXG5cbiAgICBjb25zdCBzbGlkZXIgPSBjcmVhdGVTbGlkZXIoe1xuICAgICAgICBvblZhbHVlQ2hhbmdlZDogaGFuZGxlU2xpZGVyVmFsdWVDaGFuZ2VkXG4gICAgfSlcblxuICAgIGNvbnN0IGljb24gPSBuZXcgSWNvbih7XG4gICAgICAgIGljb25fdHlwZTogSWNvblR5cGUuU1lNQk9MSUMsXG4gICAgICAgIHN0eWxlX2NsYXNzOiBQT1BVUF9JQ09OX0NMQVNTLFxuICAgICAgICByZWFjdGl2ZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgW2ljb24sIHNsaWRlci5hY3Rvcl0uZm9yRWFjaCh3aWRnZXQgPT4ge1xuICAgICAgICBjb250YWluZXIuYWRkX2NoaWxkKHdpZGdldClcbiAgICB9KVxuXG5cbiAgICBjb250YWluZXIuY29ubmVjdCgna2V5LXByZXNzLWV2ZW50JywgKGFjdG9yLCBldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBldmVudC5nZXRfa2V5X3N5bWJvbCgpO1xuXG4gICAgICAgIGlmIChrZXkgPT09IEtFWV9SaWdodCB8fCBrZXkgPT09IEtFWV9MZWZ0KSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSAoa2V5ID09PSBLRVlfUmlnaHQpID8gJ2luY3JlYXNlJyA6ICdkZWNyZWFzZSdcbiAgICAgICAgICAgIGRlbHRhQ2hhbmdlKGRpcmVjdGlvbilcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBjb250YWluZXIuY29ubmVjdCgnc2Nyb2xsLWV2ZW50JywgKGFjdG9yLCBldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBzY3JvbGxEaXJlY3Rpb24gPSBldmVudC5nZXRfc2Nyb2xsX2RpcmVjdGlvbigpXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IChzY3JvbGxEaXJlY3Rpb24gPT09IFNjcm9sbERpcmVjdGlvbi5VUCkgPyAnaW5jcmVhc2UnIDogJ2RlY3JlYXNlJ1xuICAgICAgICBkZWx0YUNoYW5nZShkaXJlY3Rpb24pXG4gICAgfSlcblxuICAgIGljb24uY29ubmVjdCgnYnV0dG9uLXByZXNzLWV2ZW50JywgKCkgPT4ge1xuICAgICAgICBzbGlkZXIuc2V0VmFsdWUoMClcbiAgICB9KVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIG5ld1ZhbHVlIGJldHdlZW4gMCBhbmQgMVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGhhbmRsZVNsaWRlclZhbHVlQ2hhbmdlZChuZXdWYWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHVwZGF0ZVZvbHVtZShuZXdWYWx1ZSAqIDEwMCwgdHJ1ZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWx0YUNoYW5nZShkaXJlY3Rpb246ICdpbmNyZWFzZScgfCAnZGVjcmVhc2UnKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gKGRpcmVjdGlvbiA9PT0gJ2luY3JlYXNlJykgPyBWT0xVTUVfREVMVEEgOiAtVk9MVU1FX0RFTFRBXG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gc2xpZGVyLmdldFZhbHVlKCkgKyBkZWx0YSAvIDEwMFxuICAgICAgICBzbGlkZXIuc2V0VmFsdWUobmV3VmFsdWUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIG5ld1ZvbHVtZSBpbiBwZXJjZW50IGJ1dCBkb2Vzbid0IG5lZWQgdG8gYmUgcm91bmRlZFxuICAgICAqIEBwYXJhbSBzaG93VG9vbHRpcFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVZvbHVtZShuZXdWb2x1bWU6IG51bWJlciwgc2hvd1Rvb2x0aXA6IGJvb2xlYW4pIHtcbiAgICAgICAgY29uc3QgbmV3Vm9sdW1lUm91bmRlZCA9IE1hdGgucm91bmQobmV3Vm9sdW1lKVxuXG4gICAgICAgIGlmIChuZXdWb2x1bWVSb3VuZGVkID09PSB2b2x1bWUpIHJldHVyblxuXG4gICAgICAgIHZvbHVtZSA9IG5ld1ZvbHVtZVJvdW5kZWRcblxuICAgICAgICBzbGlkZXIuc2V0VmFsdWUodm9sdW1lIC8gMTAwKVxuICAgICAgICBpY29uLnNldF9pY29uX25hbWUoZ2V0Vm9sdW1lSWNvbih7IHZvbHVtZSB9KSlcbiAgICAgICAgc2V0VG9vbHRpcCh2b2x1bWUpXG5cbiAgICAgICAgc2hvd1Rvb2x0aXAgJiYgdG9vbHRpcC5zaG93KClcbiAgICAgICAgb25Wb2x1bWVDaGFuZ2VkPy4odm9sdW1lKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB2b2x1bWUgaW4gUGVyY2VudCBhbmQgcm91bmRlZCFcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRUb29sdGlwKHZvbHVtZTogbnVtYmVyKSB7XG5cbiAgICAgICAgaWYgKCF0b29sdGlwKVxuICAgICAgICAgICAgdG9vbHRpcCA9IG5ldyBUb29sdGlwKHNsaWRlci5hY3RvciwgJyAnKVxuXG4gICAgICAgIHRvb2x0aXAuc2V0X3RleHQoYFZvbHVtZTogJHt2b2x1bWUudG9TdHJpbmcoKX0gJWApXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIG5ld1ZvbHVtZSBpbiBwZXJjZW50ICgwLTEwMClcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRWb2x1bWUobmV3Vm9sdW1lOiBudW1iZXIpIHtcbiAgICAgICAgdXBkYXRlVm9sdW1lKG5ld1ZvbHVtZSwgZmFsc2UpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0b3I6IGNvbnRhaW5lcixcbiAgICAgICAgc2V0Vm9sdW1lXG4gICAgfVxufSIsImNvbnN0IHsgQm94TGF5b3V0LCBCaW4sIFNpZGUgfSA9IGltcG9ydHMuZ2kuU3RcbmNvbnN0IHsgdWlHcm91cCwgbGF5b3V0TWFuYWdlciwgcGFuZWxNYW5hZ2VyLCBwdXNoTW9kYWwsIHBvcE1vZGFsIH0gPSBpbXBvcnRzLnVpLm1haW5cbmNvbnN0IHsgS0VZX0VzY2FwZSB9ID0gaW1wb3J0cy5naS5DbHV0dGVyXG5jb25zdCB7IHV0aWxfZ2V0X3RyYW5zZm9ybWVkX2FsbG9jYXRpb24gfSA9IGltcG9ydHMuZ2kuQ2lubmFtb25cbmNvbnN0IHsgUGFuZWxMb2MgfSA9IGltcG9ydHMudWkucG9wdXBNZW51XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIGxhdW5jaGVyOiBpbXBvcnRzLmdpLlN0LldpZGdldCxcbn1cblxuLy8gdGhlIHNwYWNlIG9uIHRoZSBtb25pdG9yIHdoaWNoIGlzIGZyZWUgZm9yIHRoZSBwb3B1cCBtZW51LCBpLmUuIHRoZSBtb25pdG9yIG1pbnVzIHRoZSBwYW5lbHMuXG5pbnRlcmZhY2UgRnJlZVNwYWNlQm94IHtcbiAgICBsZWZ0OiBudW1iZXIsXG4gICAgdG9wOiBudW1iZXIsXG4gICAgYm90dG9tOiBudW1iZXIsXG4gICAgcmlnaHQ6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgUG9wdXBNZW51IGV4dGVuZHMgaW1wb3J0cy5naS5TdC5Cb3hMYXlvdXQge1xuICAgIC8qKiB0b2dnbGVzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBwb3B1cE1lbnUgKi9cbiAgICB0b2dnbGU6ICgpID0+IHZvaWRcbiAgICAvKiogY2xvc2UgdGhlIHBvcHVwbWVudSBhbmQgcmVsYXNlIHRoZSBncmFiYmVkIGtleXMuIFVzZSB0aGlzIGluc3RlYWQgb2YgaGlkZSEgKi9cbiAgICBjbG9zZTogKCkgPT4gdm9pZFxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQb3B1cE1lbnUoYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGxhdW5jaGVyXG4gICAgfSA9IGFyZ3NcblxuICAgIGNvbnN0IGJveCA9IG5ldyBCb3hMYXlvdXQoe1xuICAgICAgICBzdHlsZV9jbGFzczogJ3BvcHVwLW1lbnUtY29udGVudCcsXG4gICAgICAgIHZlcnRpY2FsOiB0cnVlLFxuICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICB9KVxuXG4gICAgLy8gb25seSBmb3Igc3R5bGluZyBwdXJwb3Nlc1xuICAgIGNvbnN0IGJpbiA9IG5ldyBCaW4oe1xuICAgICAgICBzdHlsZV9jbGFzczogJ21lbnUnLFxuICAgICAgICBjaGlsZDogYm94LFxuICAgICAgICB2aXNpYmxlOiBmYWxzZVxuICAgIH0pXG5cbiAgICB1aUdyb3VwLmFkZF9jaGlsZChiaW4pXG5cbiAgICBib3guY29ubmVjdCgna2V5LXByZXNzLWV2ZW50JywgKGFjdG9yLCBldmVudCkgPT4ge1xuICAgICAgICBldmVudC5nZXRfa2V5X3N5bWJvbCgpID09PSBLRVlfRXNjYXBlICYmIGNsb3NlKClcbiAgICB9KVxuXG4gICAgbGF1bmNoZXIuY29ubmVjdCgncXVldWUtcmVsYXlvdXQnLCAoKSA9PiB7XG4gICAgICAgIGlmICghYm94LnZpc2libGUpIHJldHVyblxuXG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRMYXlvdXQoKVxuICAgICAgICB9LCAwKTtcbiAgICB9KVxuXG4gICAgYmluLmNvbm5lY3QoJ3F1ZXVlLXJlbGF5b3V0JywgKCkgPT4ge1xuICAgICAgICBpZiAoIWJveC52aXNpYmxlKSByZXR1cm5cblxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgc2V0TGF5b3V0KClcbiAgICAgICAgfSwgMCk7XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIHNldExheW91dCgpIHtcblxuICAgICAgICBjb25zdCBmcmVlU3BhY2UgPSBjYWxjdWxhdGVGcmVlU3BhY2UoKVxuICAgICAgICBjb25zdCBtYXhIZWlnaHQgPSBjYWxjdWxhdGVNYXhIZWlnaHQoZnJlZVNwYWNlKVxuXG4gICAgICAgIGJveC5zdHlsZSA9IGBtYXgtaGVpZ2h0OiAke21heEhlaWdodH1weDtgXG4gICAgICAgIGNvbnN0IFt4UG9zLCB5UG9zXSA9IGNhbGN1bGF0ZVBvc2l0aW9uKG1heEhlaWdodCwgZnJlZVNwYWNlKVxuXG4gICAgICAgIC8vIFdpdGhvdXQgTWF0aC5mbG9vciwgdGhlIHBvcHVwIG1lbnUgZ2V0cyBmb3Igc29tZSByZWFzb24gYmx1cnJlZCBvbiBzb21lIHRoZW1lcyAoZS5nLiBBZGFwdGEgTm9rdG8pIVxuICAgICAgICBiaW4uc2V0X3Bvc2l0aW9uKE1hdGguZmxvb3IoeFBvcyksIE1hdGguZmxvb3IoeVBvcykpXG5cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUZyZWVTcGFjZSgpOiBGcmVlU3BhY2VCb3gge1xuICAgICAgICBjb25zdCBtb25pdG9yID0gbGF5b3V0TWFuYWdlci5maW5kTW9uaXRvckZvckFjdG9yKGxhdW5jaGVyKVxuICAgICAgICBjb25zdCB2aXNpYmxlUGFuZWxzID0gcGFuZWxNYW5hZ2VyLmdldFBhbmVsc0luTW9uaXRvcihtb25pdG9yLmluZGV4KVxuXG4gICAgICAgIGNvbnN0IHBhbmVsU2l6ZXMgPSBuZXcgTWFwKHZpc2libGVQYW5lbHMubWFwKHBhbmVsID0+IHtcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IDAsIGhlaWdodCA9IDA7XG5cbiAgICAgICAgICAgIGlmIChwYW5lbC5nZXRJc1Zpc2libGUoKSkge1xuICAgICAgICAgICAgICAgIHdpZHRoID0gcGFuZWwuYWN0b3Iud2lkdGg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gcGFuZWwuYWN0b3IuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gW3BhbmVsLnBhbmVsUG9zaXRpb24sIHsgd2lkdGgsIGhlaWdodCB9XVxuICAgICAgICB9KSlcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVmdDogbW9uaXRvci54ICsgKHBhbmVsU2l6ZXMuZ2V0KFBhbmVsTG9jLmxlZnQpPy53aWR0aCB8fCAwKSxcbiAgICAgICAgICAgIGJvdHRvbTogbW9uaXRvci55ICsgbW9uaXRvci5oZWlnaHQgLSAocGFuZWxTaXplcy5nZXQoUGFuZWxMb2MuYm90dG9tKT8uaGVpZ2h0IHx8IDApLFxuICAgICAgICAgICAgdG9wOiBtb25pdG9yLnkgKyAocGFuZWxTaXplcy5nZXQoUGFuZWxMb2MudG9wKT8uaGVpZ2h0IHx8IDApLFxuICAgICAgICAgICAgcmlnaHQ6IG1vbml0b3IueCArIG1vbml0b3Iud2lkdGggLSAocGFuZWxTaXplcy5nZXQoUGFuZWxMb2MucmlnaHQpPy53aWR0aCB8fCAwKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlTWF4SGVpZ2h0KGZyZWVTcGFjZTogRnJlZVNwYWNlQm94KTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgZnJlZVNwYWNlSGVpZ2h0ID0gKGZyZWVTcGFjZS5ib3R0b20gLSBmcmVlU3BhY2UudG9wKSAvIGdsb2JhbC51aV9zY2FsZVxuXG4gICAgICAgIGNvbnN0IGJveFRoZW1lTm9kZSA9IGJveC5nZXRfdGhlbWVfbm9kZSgpXG5cbiAgICAgICAgY29uc3QgYmluVGhlbWVOb2RlID0gYmluLmdldF90aGVtZV9ub2RlKClcblxuICAgICAgICBjb25zdCBwYWRkaW5nVG9wID0gYm94VGhlbWVOb2RlLmdldF9wYWRkaW5nKFNpZGUuVE9QKVxuICAgICAgICBjb25zdCBwYWRkaW5nQm90dG9tID0gYm94VGhlbWVOb2RlLmdldF9wYWRkaW5nKFNpZGUuQk9UVE9NKVxuICAgICAgICBjb25zdCBib3JkZXJXaWR0aFRvcCA9IGJpblRoZW1lTm9kZS5nZXRfYm9yZGVyX3dpZHRoKFNpZGUuVE9QKVxuICAgICAgICBjb25zdCBib3JkZXJXaWR0aEJvdHRvbSA9IGJpblRoZW1lTm9kZS5nZXRfYm9yZGVyX3dpZHRoKFNpZGUuQk9UVE9NKVxuXG4gICAgICAgIGNvbnN0IG1heEhlaWdodCA9IGZyZWVTcGFjZUhlaWdodCAtIHBhZGRpbmdCb3R0b20gLSBwYWRkaW5nVG9wIC0gYm9yZGVyV2lkdGhUb3AgLSBib3JkZXJXaWR0aEJvdHRvbVxuXG4gICAgICAgIHJldHVybiBtYXhIZWlnaHRcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVQb3NpdGlvbihtYXhIZWlnaHQ6IG51bWJlciwgZnJlZVNwYWNlOiBGcmVlU3BhY2VCb3gpOiBbeExlZnQ6IG51bWJlciwgeVRvcDogbnVtYmVyXSB7XG5cbiAgICAgICAgY29uc3QgYXBwbGV0Qm94ID0gdXRpbF9nZXRfdHJhbnNmb3JtZWRfYWxsb2NhdGlvbihsYXVuY2hlcilcblxuICAgICAgICBjb25zdCBbbWluV2lkdGgsIG1pbkhlaWdodCwgbmF0V2lkdGgsIG5hdEhlaWdodF0gPSBib3guZ2V0X3ByZWZlcnJlZF9zaXplKCk7XG5cbiAgICAgICAgY29uc3QgbWFyZ2luID0gKG5hdFdpZHRoIC0gYXBwbGV0Qm94LmdldF93aWR0aCgpKSAvIDJcblxuICAgICAgICBjb25zdCB4TGVmdE5vcm1hbCA9IE1hdGgubWF4KGZyZWVTcGFjZS5sZWZ0LCBhcHBsZXRCb3gueDEgLSBtYXJnaW4pO1xuICAgICAgICBjb25zdCB4UmlnaHROb3JtYWwgPSBhcHBsZXRCb3gueDIgKyBtYXJnaW5cbiAgICAgICAgY29uc3QgeExlZnRNYXggPSBmcmVlU3BhY2UucmlnaHQgLSBhcHBsZXRCb3guZ2V0X3dpZHRoKCkgLSBtYXJnaW4gKiAyXG4gICAgICAgIGNvbnN0IHhMZWZ0ID0gKHhSaWdodE5vcm1hbCA8IGZyZWVTcGFjZS5yaWdodCkgPyB4TGVmdE5vcm1hbCA6IHhMZWZ0TWF4XG5cbiAgICAgICAgY29uc3QgeVRvcE5vcm1hbCA9IE1hdGgubWF4KGFwcGxldEJveC55MSwgZnJlZVNwYWNlLnRvcCk7XG4gICAgICAgIGNvbnN0IHlCb3R0b21Ob3JtYWwgPSB5VG9wTm9ybWFsICsgbmF0SGVpZ2h0O1xuICAgICAgICBjb25zdCB5VG9wTWF4ID0gZnJlZVNwYWNlLmJvdHRvbSAtIGJveC5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IHlUb3AgPSAoeUJvdHRvbU5vcm1hbCA8IGZyZWVTcGFjZS5ib3R0b20pID8geVRvcE5vcm1hbCA6IHlUb3BNYXhcblxuICAgICAgICByZXR1cm4gW3hMZWZ0LCB5VG9wXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICAgIGJveC52aXNpYmxlID8gY2xvc2UoKSA6IG9wZW4oKVxuICAgIH1cblxuICAgIC8vIG5vIGlkZWEgd2h5IGl0IHNvbWV0aW1lcyBuZWVkcyB0byBiZSBiaW4gYW5kIHNvbWV0aW1lcyBib3ggLi4uXG4gICAgZnVuY3Rpb24gb3BlbigpIHtcblxuICAgICAgICBzZXRMYXlvdXQoKVxuICAgICAgICBiaW4uc2hvdygpXG4gICAgICAgIGJveC5zaG93KClcblxuICAgICAgICBsYXVuY2hlci5hZGRfc3R5bGVfcHNldWRvX2NsYXNzKCdjaGVja2VkJylcblxuICAgICAgICBwdXNoTW9kYWwoYm94KVxuXG4gICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiwgaXQgaXMgZW1taXRlZCB0aGUgYnV0dG9uLXByZXNzIGV2ZW50IHdoZW4gY2xpY2tpbmcgZS5nIG9uIHRoZSBkZXNrdG9wIGJ1dCB0aGUgYnV0dG9uLXJlbGVhc2UtZXZlbnQgd2hlbiBjbGlja2luZyBvbiBhbm90aGVyIGFwcGxldFxuICAgICAgICBnbG9iYWwuc3RhZ2UuY29ubmVjdCgnYnV0dG9uLXByZXNzLWV2ZW50JywgaGFuZGxlQ2xpY2spXG4gICAgICAgIGdsb2JhbC5zdGFnZS5jb25uZWN0KCdidXR0b24tcmVsZWFzZS1ldmVudCcsIGhhbmRsZUNsaWNrKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuXG4gICAgICAgIGlmICghYm94LnZpc2libGUpIHJldHVyblxuXG4gICAgICAgIGJpbi5oaWRlKClcbiAgICAgICAgYm94LmhpZGUoKVxuICAgICAgICBsYXVuY2hlci5yZW1vdmVfc3R5bGVfcHNldWRvX2NsYXNzKCdjaGVja2VkJylcbiAgICAgICAgcG9wTW9kYWwoYm94KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGFjdG9yOiBpbXBvcnRzLmdpLkNsdXR0ZXIuU3RhZ2UsIGV2ZW50OiBpbXBvcnRzLmdpLkNsdXR0ZXIuRXZlbnQpIHtcblxuICAgICAgICBpZiAoIWJveC52aXNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsaWNrZWRBY3RvciA9IGV2ZW50LmdldF9zb3VyY2UoKVxuXG4gICAgICAgIGNvbnN0IGJpbkNsaWNrZWQgPSBib3guY29udGFpbnMoY2xpY2tlZEFjdG9yKVxuICAgICAgICBjb25zdCBhcHBsZXRDbGlja2VkID0gbGF1bmNoZXIuY29udGFpbnMoY2xpY2tlZEFjdG9yKTtcblxuICAgICAgICAoIWJpbkNsaWNrZWQgJiYgIWFwcGxldENsaWNrZWQpICYmIGNsb3NlKClcbiAgICB9XG5cbiAgICAoYm94IGFzIFBvcHVwTWVudSkudG9nZ2xlID0gdG9nZ2xlO1xuICAgIChib3ggYXMgUG9wdXBNZW51KS5jbG9zZSA9IGNsb3NlXG5cbiAgICByZXR1cm4gKGJveCBhcyBQb3B1cE1lbnUpXG59IiwiY29uc3QgeyBCb3hMYXlvdXQsIERyYXdpbmdBcmVhIH0gPSBpbXBvcnRzLmdpLlN0XG5jb25zdCB7IExpbmVhckdyYWRpZW50IH0gPSBpbXBvcnRzLmdpLmNhaXJvXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXBhcmF0b3JNZW51SXRlbSgpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQm94TGF5b3V0KHtcbiAgICAgICAgc3R5bGVfY2xhc3M6ICdwb3B1cC1tZW51LWl0ZW0nXG4gICAgfSlcblxuICAgIGNvbnN0IGRyYXdpbmdBcmVhID0gbmV3IERyYXdpbmdBcmVhKHtcbiAgICAgICAgc3R5bGVfY2xhc3M6ICdwb3B1cC1zZXBhcmF0b3ItbWVudS1pdGVtJyxcbiAgICAgICAgeF9leHBhbmQ6IHRydWVcbiAgICB9KVxuXG4gICAgY29udGFpbmVyLmFkZF9jaGlsZChkcmF3aW5nQXJlYSlcblxuICAgIGRyYXdpbmdBcmVhLmNvbm5lY3QoJ3JlcGFpbnQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNyID0gZHJhd2luZ0FyZWEuZ2V0X2NvbnRleHQoKVxuXG4gICAgICAgIGNvbnN0IHRoZW1lTm9kZSA9IGRyYXdpbmdBcmVhLmdldF90aGVtZV9ub2RlKClcbiAgICAgICAgY29uc3QgW3dpZHRoLCBoZWlnaHRdID0gZHJhd2luZ0FyZWEuZ2V0X3N1cmZhY2Vfc2l6ZSgpXG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IHRoZW1lTm9kZS5nZXRfbGVuZ3RoKCctbWFyZ2luLWhvcml6b250YWwnKVxuICAgICAgICBjb25zdCBncmFkaWVudEhlaWdodCA9IHRoZW1lTm9kZS5nZXRfbGVuZ3RoKCctZ3JhZGllbnQtaGVpZ2h0JylcbiAgICAgICAgY29uc3Qgc3RhcnRDb2xvciA9IHRoZW1lTm9kZS5nZXRfY29sb3IoJy1ncmFkaWVudC1zdGFydCcpXG4gICAgICAgIGNvbnN0IGVuZENvbG9yID0gdGhlbWVOb2RlLmdldF9jb2xvcignLWdyYWRpZW50LWVuZCcpXG5cbiAgICAgICAgY29uc3QgZ3JhZGllbnRXaWR0aCA9ICh3aWR0aCAtIG1hcmdpbiAqIDIpO1xuICAgICAgICBjb25zdCBncmFkaWVudE9mZnNldCA9IChoZWlnaHQgLSBncmFkaWVudEhlaWdodCkgLyAyO1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gbmV3IExpbmVhckdyYWRpZW50KG1hcmdpbiwgZ3JhZGllbnRPZmZzZXQsIHdpZHRoIC0gbWFyZ2luLCBncmFkaWVudE9mZnNldCArIGdyYWRpZW50SGVpZ2h0KVxuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gY29uc3QgY29sb3JzID0gWydyZWQnLCAnZ3JlZW4nLCAnYmx1ZScsICdhbHBoYSddLm1hcChjb2xvciA9PiBzdGFydENvbG9yW2NvbG9yXSAvIDI1NSlcblxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQxMzAjaXNzdWVjb21tZW50LTQ5OTUyNTg5N1xuICAgICAgICBwYXR0ZXJuLmFkZENvbG9yU3RvcFJHQkEoMCwgc3RhcnRDb2xvci5yZWQgLyAyNTUsIHN0YXJ0Q29sb3IuZ3JlZW4gLyAyNTUsIHN0YXJ0Q29sb3IuYmx1ZSAvIDI1NSwgc3RhcnRDb2xvci5hbHBoYSAvIDI1NSlcbiAgICAgICAgcGF0dGVybi5hZGRDb2xvclN0b3BSR0JBKDAuNSwgZW5kQ29sb3IucmVkIC8gMjU1LCBlbmRDb2xvci5ncmVlbiAvIDI1NSwgZW5kQ29sb3IuYmx1ZSAvIDI1NSwgZW5kQ29sb3IuYWxwaGEgLyAyNTUpXG4gICAgICAgIHBhdHRlcm4uYWRkQ29sb3JTdG9wUkdCQSgxLCBzdGFydENvbG9yLnJlZCAvIDI1NSwgc3RhcnRDb2xvci5ncmVlbiAvIDI1NSwgc3RhcnRDb2xvci5ibHVlIC8gMjU1LCBzdGFydENvbG9yLmFscGhhIC8gMjU1KVxuXG4gICAgICAgIGNyLnNldFNvdXJjZShwYXR0ZXJuKVxuICAgICAgICBjci5yZWN0YW5nbGUobWFyZ2luLCBncmFkaWVudE9mZnNldCwgZ3JhZGllbnRXaWR0aCwgZ3JhZGllbnRIZWlnaHQpXG4gICAgICAgIGNyLmZpbGwoKVxuXG4gICAgICAgIGNyLiRkaXNwb3NlXG4gICAgfSlcblxuICAgIHJldHVybiBjb250YWluZXJcblxufSIsImNvbnN0IHsgQm94TGF5b3V0IH0gPSBpbXBvcnRzLmdpLlN0XG5jb25zdCB7IEFjdG9yQWxpZ24gfSA9IGltcG9ydHMuZ2kuQ2x1dHRlclxuXG5pbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICAvKipcbiAgICAgKiB0aGUgYnRucyBvbiB0aGUgdG9vbGJhci4gVGhlIGZpcnN0IGlzIHNob3duIG9uIHRoZSBtb3N0IGxlZnRcbiAgICAgKi9cbiAgICBjb250cm9sQnRuczogaW1wb3J0cy5naS5TdC5CdXR0b25bXVxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlTWVkaWFDb250cm9sVG9vbGJhciA9IChhcmdzOiBBcmd1bWVudHMpID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgY29udHJvbEJ0bnNcbiAgICB9ID0gYXJnc1xuXG4gICAgY29uc3QgdG9vbGJhciA9IG5ldyBCb3hMYXlvdXQoe1xuICAgICAgICBzdHlsZV9jbGFzczogXCJyYWRpby1hcHBsZXQtbWVkaWEtY29udHJvbC10b29sYmFyXCIsXG4gICAgICAgIHhfYWxpZ246IEFjdG9yQWxpZ24uQ0VOVEVSXG4gICAgfSk7XG5cbiAgICBjb250cm9sQnRucy5mb3JFYWNoKGJ0biA9PlxuICAgICAgICB0b29sYmFyLmFkZF9jaGlsZChidG4pXG4gICAgKVxuXG4gICAgcmV0dXJuIHRvb2xiYXJcbn1cbiIsImltcG9ydCB7IGNyZWF0ZUFjdGl2V2lkZ2V0IH0gZnJvbSBcIi4uLy4uL2xpYi9BY3RpdldpZGdldFwiO1xuXG5jb25zdCB7IEJ1dHRvbiwgSWNvbiwgSWNvblR5cGUgfSA9IGltcG9ydHMuZ2kuU3Q7XG5jb25zdCB7IFRvb2x0aXAgfSA9IGltcG9ydHMudWkudG9vbHRpcHM7XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIGljb25OYW1lOiBzdHJpbmcsXG4gICAgdG9vbHRpcFR4dDogc3RyaW5nLFxuICAgIG9uQ2xpY2s6IHsgKCk6IHZvaWQgfSxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xCdG4oYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGljb25OYW1lLFxuICAgICAgICB0b29sdGlwVHh0LFxuICAgICAgICBvbkNsaWNrXG4gICAgfSA9IGFyZ3NcblxuICAgIGNvbnN0IGljb24gPSBuZXcgSWNvbih7XG4gICAgICAgIGljb25fdHlwZTogSWNvblR5cGUuU1lNQk9MSUMsXG4gICAgICAgIGljb25fbmFtZTogaWNvbk5hbWUsXG4gICAgICAgIHN0eWxlX2NsYXNzOiAncG9wdXAtbWVudS1pY29uJyAvLyB0aGlzIHNwZWNpZmllcyB0aGUgaWNvbi1zaXplXG4gICAgfSlcblxuICAgIGNvbnN0IGJ0biA9IG5ldyBCdXR0b24oe1xuICAgICAgICByZWFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgY2FuX2ZvY3VzOiB0cnVlLFxuICAgICAgICAvLyBJdCBpcyBjaGFsbGVuZ2luZyB0byBnZXQgYSByZWFzb25hYmxlIHN0eWxlIG9uIGFsbCB0aGVtZXMuIEkgaGF2ZSB0cmllZCB1c2luZyB0aGUgJ3NvdW5kLXBsYXllci1vdmVybGF5JyBjbGFzcyBidXQgZGlkbid0IGdldCBpdCB3b3JraW5nLiBIb3dldmVyIG1pZ2h0IGJlIHBvc3NpYmxlIGFueXdheS4gIFxuICAgICAgICBzdHlsZV9jbGFzczogXCJwb3B1cC1tZW51LWl0ZW1cIixcbiAgICAgICAgc3R5bGU6IFwid2lkdGg6MjBweDsgcGFkZGluZzoxMHB4IWltcG9ydGFudFwiLFxuICAgICAgICBjaGlsZDogaWNvblxuICAgIH0pXG5cbiAgICBjcmVhdGVBY3RpdldpZGdldCh7XG4gICAgICAgIHdpZGdldDogYnRuLFxuICAgICAgICBvbkFjdGl2YXRlZDogb25DbGlja1xuICAgIH0pXG5cbiAgICBjb25zdCB0b29sdGlwID0gbmV3IFRvb2x0aXAoYnRuLCB0b29sdGlwVHh0KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0b3I6IGJ0bixcbiAgICAgICAgaWNvbixcbiAgICAgICAgdG9vbHRpcFxuICAgIH1cbn0iLCJpbXBvcnQgeyBQQVVTRV9JQ09OX05BTUUsIFBMQVlfSUNPTl9OQU1FIH0gZnJvbSBcIi4uLy4uL2NvbnN0c1wiXG5pbXBvcnQgeyBQbGF5UGF1c2UgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIlxuaW1wb3J0IHsgY3JlYXRlQ29udHJvbEJ0biB9IGZyb20gXCIuL0NvbnRyb2xCdG5cIlxuXG5pbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICBvbkNsaWNrOiB7ICgpOiB2b2lkIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBsYXlQYXVzZUJ1dHRvbihhcmdzOiBBcmd1bWVudHMpIHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgb25DbGlja1xuICAgIH0gPSBhcmdzXG5cbiAgICBjb25zdCBjb250cm9sQnRuID0gY3JlYXRlQ29udHJvbEJ0bih7XG4gICAgICAgIGljb25OYW1lOiBQTEFZX0lDT05fTkFNRSxcbiAgICAgICAgdG9vbHRpcFR4dDogJ1BsYXknLFxuICAgICAgICBvbkNsaWNrXG4gICAgfSlcblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBwbGF5UGF1c2UgaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcmFkaW8sIHdoaWNoIG1lYW5zIHRoYXQgdGhlIG9wcG9zaXRlIGlzIHNob3duIChlLmcuIHdoZW4gdGhlIHJhZGlvIGlzIHBsYXlpbmcsIGl0IGlzIHNob3duIGEgcGF1c2UgaXRlbSlcbiAgICAgKiBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRQbGF5YmFja1N0YXR1cyhwbGF5UGF1c2U6IFBsYXlQYXVzZSkge1xuXG4gICAgICAgIGxldCB0b29sdGlwVHh0OiBzdHJpbmdcbiAgICAgICAgbGV0IGljb25OYW1lOiBzdHJpbmdcblxuICAgICAgICBpZiAocGxheVBhdXNlID09PSAnUGxheWluZycpIHtcbiAgICAgICAgICAgIHRvb2x0aXBUeHQgPSAnUGF1c2UnXG4gICAgICAgICAgICBpY29uTmFtZSA9IFBBVVNFX0lDT05fTkFNRVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBsYXlQYXVzZSA9PT0gJ1BhdXNlZCcpIHtcbiAgICAgICAgICAgIHRvb2x0aXBUeHQgPSAnUGxheSdcbiAgICAgICAgICAgIGljb25OYW1lID0gUExBWV9JQ09OX05BTUVcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRyb2xCdG4udG9vbHRpcC5zZXRfdGV4dCh0b29sdGlwVHh0KVxuICAgICAgICBjb250cm9sQnRuLmljb24uaWNvbl9uYW1lID0gaWNvbk5hbWVcblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdG9yOiBjb250cm9sQnRuLmFjdG9yLFxuICAgICAgICBzZXRQbGF5YmFja1N0YXR1c1xuICAgIH1cblxufSIsImltcG9ydCB7IFNUT1BfSUNPTl9OQU1FIH0gZnJvbSBcIi4uLy4uL2NvbnN0c1wiO1xuaW1wb3J0IHsgY3JlYXRlQ29udHJvbEJ0biB9IGZyb20gXCIuL0NvbnRyb2xCdG5cIjtcblxuaW50ZXJmYWNlIEFyZ3VtZW50cyB7XG4gICAgb25DbGljazogeyAoKTogdm9pZCB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdG9wQnRuKGFyZ3M6IEFyZ3VtZW50cykge1xuXG4gICAgY29uc3Qge1xuICAgICAgICBvbkNsaWNrXG4gICAgfSA9IGFyZ3NcblxuICAgIGNvbnN0IHN0b3BCdG4gPSBjcmVhdGVDb250cm9sQnRuKHtcbiAgICAgICAgaWNvbk5hbWU6IFNUT1BfSUNPTl9OQU1FLFxuICAgICAgICB0b29sdGlwVHh0OiBcIlN0b3BcIixcbiAgICAgICAgb25DbGlja1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0b3I6IHN0b3BCdG4uYWN0b3JcbiAgICB9XG59IiwiaW1wb3J0ICogYXMgY29uc3RzIGZyb20gXCIuLi9jb25zdHNcIjtcbmltcG9ydCB7IGNyZWF0ZUljb25NZW51SXRlbSB9IGZyb20gXCIuLi9saWIvSWNvbk1lbnVJdGVtXCI7XG5jb25zdCB7IEJveExheW91dCB9ID0gaW1wb3J0cy5naS5TdFxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5mb1NlY3Rpb24oKSB7XG5cbiAgICBjb25zdCBjaGFubmVsSW5mb0l0ZW0gPSBjcmVhdGVJbmZvSXRlbShjb25zdHMuUkFESU9fU1lNQk9MSUNfSUNPTl9OQU1FKVxuICAgIGNvbnN0IHNvbmdJbmZvSXRlbSA9IGNyZWF0ZUluZm9JdGVtKGNvbnN0cy5TT05HX0lORk9fSUNPTl9OQU1FKVxuXG4gICAgY29uc3QgaW5mb1NlY3Rpb24gPSBuZXcgQm94TGF5b3V0KHtcbiAgICAgICAgdmVydGljYWw6IHRydWVcbiAgICB9KTtcblxuICAgIFtjaGFubmVsSW5mb0l0ZW0sIHNvbmdJbmZvSXRlbV0uZm9yRWFjaChpbmZvSXRlbSA9PiB7XG4gICAgICAgIGluZm9TZWN0aW9uLmFkZF9jaGlsZChpbmZvSXRlbS5hY3RvcilcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlSW5mb0l0ZW0oaWNvbk5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBpY29uTWVudUl0ZW0gPSBjcmVhdGVJY29uTWVudUl0ZW0oe1xuICAgICAgICAgICAgaWNvbk5hbWUsXG4gICAgICAgICAgICBtYXhDaGFyTnVtYmVyOiBjb25zdHMuTUFYX1NUUklOR19MRU5HVEgsXG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIGljb25NZW51SXRlbVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldENoYW5uZWwoY2hhbm5lTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGNoYW5uZWxJbmZvSXRlbS5zZXRUZXh0KGNoYW5uZU5hbWUpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U29uZ1RpdGxlKHNvbmdUaXRsZTogc3RyaW5nKSB7XG4gICAgICAgIHNvbmdJbmZvSXRlbS5zZXRUZXh0KHNvbmdUaXRsZSlcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhY3RvcjogaW5mb1NlY3Rpb24sXG4gICAgICAgIHNldFNvbmdUaXRsZSxcbiAgICAgICAgc2V0Q2hhbm5lbFxuICAgIH1cblxufSIsImltcG9ydCB7IERPV05MT0FEX0lDT05fTkFNRSB9IGZyb20gXCIuLi8uLi9jb25zdHNcIjtcbmltcG9ydCB7IGNyZWF0ZUNvbnRyb2xCdG4gfSBmcm9tIFwiLi9Db250cm9sQnRuXCI7XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIG9uQ2xpY2s6IHsgKCk6IHZvaWQgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRG93bmxvYWRCdXR0b24oYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIG9uQ2xpY2tcbiAgICB9ID0gYXJnc1xuXG4gICAgY29uc3QgZG93bmxvYWRCdXR0b24gPSBjcmVhdGVDb250cm9sQnRuKHtcbiAgICAgICAgaWNvbk5hbWU6IERPV05MT0FEX0lDT05fTkFNRSxcbiAgICAgICAgdG9vbHRpcFR4dDogXCJEb3dubG9hZCBjdXJyZW50IHNvbmcgZnJvbSBZb3V0dWJlXCIsXG4gICAgICAgIG9uQ2xpY2tcbiAgICB9KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0b3I6IGRvd25sb2FkQnV0dG9uLmFjdG9yXG4gICAgfVxuXG59IiwiaW1wb3J0IHsgQ09QWV9JQ09OX05BTUUgfSBmcm9tIFwiLi4vLi4vY29uc3RzXCI7XG5pbXBvcnQgeyBjcmVhdGVDb250cm9sQnRuIH0gZnJvbSBcIi4vQ29udHJvbEJ0blwiO1xuXG5pbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICBvbkNsaWNrOiB7ICgpOiB2b2lkIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvcHlCdXR0b24oYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIG9uQ2xpY2tcbiAgICB9ID0gYXJnc1xuXG4gICAgY29uc3QgZGVmYXVsdFRvb2x0aXBUeHQgPSBcIkNvcHkgY3VycmVudCBzb25nIHRpdGxlIHRvIENsaXBib2FyZFwiXG5cbiAgICBjb25zdCBjb250cm9sQnRuID0gY3JlYXRlQ29udHJvbEJ0bih7XG4gICAgICAgIGljb25OYW1lOiBDT1BZX0lDT05fTkFNRSxcbiAgICAgICAgdG9vbHRpcFR4dDogZGVmYXVsdFRvb2x0aXBUeHQsXG4gICAgICAgIG9uQ2xpY2s6IGhhbmRsZUNsaWNrXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKCkge1xuICAgICAgICBjb250cm9sQnRuLnRvb2x0aXAuc2hvdygpXG4gICAgICAgIG9uQ2xpY2soKVxuICAgICAgICAvLyBzaG93Q29weUluVG9vbHRpcCgpXG4gICAgfVxuXG4gICAgLy8gRm9yIHNvbWUgcmVhc29ucyBJIGRvbid0IHVuZGVyc3RhbmQsIHRoaXMgZnVuY3Rpb24gaGFzIHN0b3BwZWQgd29ya2luZyBhZnRlciByZWZhY3RvcmluZyB0aGUgcG9wdXAgTWVudS4gTm8gaWRlYSBob3cgdG8gZGVidWcgdGhpcy4gVGhlcmVmb3JlIGRlYWN0aXZhdGluZyB0aGlzIGZvciBub3cgOi0oLiBJdCBpcyB0aHJvd24gYW4gIHdhcm5pbmcgd2hlbiBjbGlja2luZyBvbiB0aGUgYnV0dG9uIGJ1dCB0aGlzIGhhcyBub3RoaW5nIHRvIGRvIHdpdGggdGhlIHRvb2x0aXBcbiAgICBmdW5jdGlvbiBzaG93Q29weUluVG9vbHRpcCgpIHtcbiAgICAgICAgY29uc3QgdG9vbHRpcCA9IGNvbnRyb2xCdG4udG9vbHRpcFxuICAgICAgICB0b29sdGlwLnNldF90ZXh0KFwiQ29waWVkXCIpXG4gICAgICAgIHRvb2x0aXAuc2hvdygpXG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0b29sdGlwLmhpZGUoKVxuICAgICAgICAgICAgdG9vbHRpcC5zZXRfdGV4dChkZWZhdWx0VG9vbHRpcFR4dClcbiAgICAgICAgfSwgNTAwKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdG9yOiBjb250cm9sQnRuLmFjdG9yLFxuICAgIH1cbn0iLCJjb25zdCB7IHNwYXduQ29tbWFuZExpbmVBc3luY0lPIH0gPSBpbXBvcnRzLm1pc2MudXRpbDtcbmNvbnN0IHsgZ2V0X2hvbWVfZGlyIH0gPSBpbXBvcnRzLmdpLkdMaWI7XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgZG93bmxvYWREaXI6IHN0cmluZyxcbiAgICBvbkRvd25sb2FkRmluaXNoZWQ6IChwYXRoOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgb25Eb3dubG9hZEZhaWxlZDogKCkgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZG93bmxvYWRTb25nRnJvbVlvdXR1YmUoYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIHRpdGxlLFxuICAgICAgICBkb3dubG9hZERpcixcbiAgICAgICAgb25Eb3dubG9hZEZpbmlzaGVkLFxuICAgICAgICBvbkRvd25sb2FkRmFpbGVkXG4gICAgfSA9IGFyZ3NcblxuICAgIGxldCBoYXNCZWVuQ2FuY2VsbGVkID0gZmFsc2VcblxuICAgIC8vIHdoZW4gdXNpbmcgdGhlIGRlZmF1bHQgdmFsdWUgb2YgdGhlIHNldHRpbmdzLCB0aGUgZGlyIHN0YXJ0cyB3aXRoIH4gd2hhdCBjYW4ndCBiZSB1bmRlcnN0YW5kIHdoZW4gZXhlY3V0aW5nIGNvbW1hbmQuIEVsc2UgaXQgc3RhcnRzIHdpdGggZmlsZTovLyB3aGF0IHlvdXR1YmUtZGwgY2FuJ3QgaGFuZGxlLiBTYXZpbmcgdG8gbmV0d29yayBkaXJlY3RvcmllcyAoZS5nLiBmdHApIGRvZXNuJ3Qgd29yayBcbiAgICAvLyBUT0RPOiBTaG91bGRuJ3QgdGhpcyBiZSBkb25lIGluIGNvbmZpZ3MoYXQgbGVhc3QgcmVwbGFjaW5nIH4pPyBcbiAgICBjb25zdCBtdXNpY19kaXJfYWJzb2x1dCA9XG4gICAgICAgIGRvd25sb2FkRGlyLnJlcGxhY2UoJ34nLCBnZXRfaG9tZV9kaXIoKSkucmVwbGFjZSgnZmlsZTovLycsICcnKVxuXG4gICAgY29uc3QgZG93bmxvYWRDb21tYW5kID0gYFxuICAgICAgICB5b3V0dWJlLWRsIC0tb3V0cHV0IFwiJHttdXNpY19kaXJfYWJzb2x1dH0vJSh0aXRsZSlzLiUoZXh0KXNcIiAtLWV4dHJhY3QtYXVkaW8gLS1hdWRpby1mb3JtYXQgbXAzIHl0c2VhcmNoMTpcIiR7dGl0bGUucmVwbGFjZSgnXCInLCAnXFxcIicpfVwiIC0tYWRkLW1ldGFkYXRhIC0tZW1iZWQtdGh1bWJuYWlsYFxuXG4gICAgY29uc3QgcHJvY2VzcyA9IHNwYXduQ29tbWFuZExpbmVBc3luY0lPKGRvd25sb2FkQ29tbWFuZCwgKHN0ZG91dCwgc3RkZXJyKSA9PiB7XG5cbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgaWYgKGhhc0JlZW5DYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICBoYXNCZWVuQ2FuY2VsbGVkID0gZmFsc2VcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0ZGVycikgdGhyb3cgbmV3IEVycm9yKHN0ZGVycilcblxuICAgICAgICAgICAgaWYgKHN0ZG91dCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvd25sb2FkUGF0aCA9IGdldERvd25sb2FkUGF0aChzdGRvdXQpXG4gICAgICAgICAgICAgICAgaWYgKCFkb3dubG9hZFBhdGgpIHRocm93IG5ldyBFcnJvcignRmlsZSBub3Qgc2F2ZWQnKVxuXG4gICAgICAgICAgICAgICAgb25Eb3dubG9hZEZpbmlzaGVkKGRvd25sb2FkUGF0aClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGdsb2JhbC5sb2dFcnJvcihgVGhlIGZvbGxvd2luZyBlcnJvciBvY2N1cmVkIGF0IHlvdXR1YmUgZG93bmxvYWQgYXR0ZW1wdDogJHtlcnJvcn0uIFRoZSB1c2VkIGRvd25sb2FkIENvbW1hbmQgd2FzOiAke2Rvd25sb2FkQ29tbWFuZH1gKVxuICAgICAgICAgICAgb25Eb3dubG9hZEZhaWxlZCgpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgICBoYXNCZWVuQ2FuY2VsbGVkID0gdHJ1ZVxuICAgICAgICAvLyBpdCBzZWVtcyB0byBiZSBubyBwcm9ibGVtIHRvIGNhbGwgdGhpcyBhZnRlciB0aGUgcHJvY2VzcyBoYXMgYWxyZWFkeSBmaW5pc2hlZFxuICAgICAgICBwcm9jZXNzLmZvcmNlX2V4aXQoKVxuICAgIH1cblxuICAgIHJldHVybiB7IGNhbmNlbCB9XG59XG5cbmZ1bmN0aW9uIGdldERvd25sb2FkUGF0aChzdGRvdXQ6IHN0cmluZykge1xuICAgIGNvbnN0IGFycmF5T2ZMaW5lcyA9IHN0ZG91dC5tYXRjaCgvW15cXHJcXG5dKy9nKTtcblxuICAgIC8vIHRoZXJlIGlzIG9ubHkgb25lIGxpbmUgaW4gc3Rkb3V0IHdoaWNoIGdpdmVzIHRoZSBwYXRoIG9mIHRoZSBkb3dubG9hZGVkIG1wMy4gVGhpcyBzdGFydCB3aXRoIFtmZm1wZWddIERlc3RpbmF0aW9uIC4uLlxuICAgIGNvbnN0IHNlYXJjaFN0cmluZyA9ICdbZmZtcGVnXSBEZXN0aW5hdGlvbjogJ1xuXG4gICAgcmV0dXJuIGFycmF5T2ZMaW5lcy5maW5kKGxpbmUgPT4gbGluZS5pbmNsdWRlcyhzZWFyY2hTdHJpbmcpKVxuICAgICAgICAuc3BsaXQoc2VhcmNoU3RyaW5nKVsxXVxufSIsImNvbnN0IHsgc3Bhd25Db21tYW5kTGluZUFzeW5jSU8gfSA9IGltcG9ydHMubWlzYy51dGlsO1xuXG5leHBvcnQgY29uc3Qgc3Bhd25Db21tYW5kTGluZVByb21pc2UgPSBmdW5jdGlvbiAoY29tbWFuZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFtzdGRvdXQ6IHN0cmluZyB8IG51bGwsIHN0ZGVycjogc3RyaW5nIHwgbnVsbCwgZXhpdENvZGU6IG51bWJlcl0+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblxuICAgICAgICBzcGF3bkNvbW1hbmRMaW5lQXN5bmNJTyhjb21tYW5kLCAoc3Rkb3V0LCBzdGRlcnIsIGV4aXRDb2RlKSA9PiB7XG4gICAgICAgICAgICAoc3Rkb3V0KSA/IHJlc29sdmUoW251bGwsIHN0ZG91dCwgMF0pIDogcmVzb2x2ZShbc3RkZXJyLCBudWxsLCBleGl0Q29kZV0pXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuXG4iLCJjb25zdCB7IFN5c3RlbU5vdGlmaWNhdGlvblNvdXJjZSwgTm90aWZpY2F0aW9uIH0gPSBpbXBvcnRzLnVpLm1lc3NhZ2VUcmF5O1xuY29uc3QgeyBtZXNzYWdlVHJheSB9ID0gaW1wb3J0cy51aS5tYWluO1xuY29uc3QgeyBJY29uLCBJY29uVHlwZSB9ID0gaW1wb3J0cy5naS5TdFxuXG5pbXBvcnQgeyBSQURJT19TWU1CT0xJQ19JQ09OX05BTUUgfSBmcm9tIFwiLi4vLi4vY29uc3RzXCI7XG5cbmNvbnN0IG1lc3NhZ2VTb3VyY2UgPSBuZXcgU3lzdGVtTm90aWZpY2F0aW9uU291cmNlKCdSYWRpbyBBcHBsZXQnKVxubWVzc2FnZVRyYXkuYWRkKG1lc3NhZ2VTb3VyY2UpXG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIG5vdGlmaWNhdGlvblRleHQ6IHN0cmluZyxcbiAgICBpc01hcmt1cD86IGJvb2xlYW5cbiAgICB0cmFuc2llbnQ/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBDdXN0b21Ob3RpZmljYXRpb24gZXh0ZW5kcyBpbXBvcnRzLnVpLm1lc3NhZ2VUcmF5Lk5vdGlmaWNhdGlvbiB7XG4gICAgbm90aWZ5OiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCYXNpY05vdGlmaWNhdGlvbihhcmdzOiBBcmd1bWVudHMpIHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgbm90aWZpY2F0aW9uVGV4dCxcbiAgICAgICAgaXNNYXJrdXAgPSBmYWxzZSxcbiAgICAgICAgdHJhbnNpZW50ID0gdHJ1ZVxuICAgIH0gPSBhcmdzXG5cbiAgICBjb25zdCBpY29uID0gbmV3IEljb24oe1xuICAgICAgICBpY29uX3R5cGU6IEljb25UeXBlLlNZTUJPTElDLFxuICAgICAgICBpY29uX25hbWU6IFJBRElPX1NZTUJPTElDX0lDT05fTkFNRSxcbiAgICAgICAgaWNvbl9zaXplOiAyNVxuICAgIH0pXG5cbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKFxuICAgICAgICBtZXNzYWdlU291cmNlLFxuICAgICAgICBfX21ldGEubmFtZSxcbiAgICAgICAgbm90aWZpY2F0aW9uVGV4dCxcbiAgICAgICAgeyBpY29uLCBib2R5TWFya3VwOiBpc01hcmt1cCB9KSBhcyBDdXN0b21Ob3RpZmljYXRpb25cblxuICAgIG5vdGlmaWNhdGlvbi5zZXRUcmFuc2llbnQodHJhbnNpZW50KVxuXG4gICAgbm90aWZpY2F0aW9uLm5vdGlmeSA9ICgpID0+IHtcbiAgICAgICAgbWVzc2FnZVNvdXJjZS5ub3RpZnkobm90aWZpY2F0aW9uKVxuICAgIH1cblxuICAgIHJldHVybiBub3RpZmljYXRpb25cbn0iLCJpbXBvcnQgeyBjcmVhdGVCYXNpY05vdGlmaWNhdGlvbiB9IGZyb20gXCIuL05vdGlmaWNhdGlvbkJhc2VcIlxuXG5pbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICB0ZXh0OiBzdHJpbmdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vdGlmeShhcmdzOiBBcmd1bWVudHMpIHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgdGV4dFxuICAgIH0gPSBhcmdzXG5cbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBjcmVhdGVCYXNpY05vdGlmaWNhdGlvbih7XG4gICAgICAgIG5vdGlmaWNhdGlvblRleHQ6IHRleHRcbiAgICB9KVxuXG4gICAgbm90aWZpY2F0aW9uLm5vdGlmeSgpXG59IiwiaW1wb3J0IHsgc3Bhd25Db21tYW5kTGluZVByb21pc2UgfSBmcm9tIFwiLi4vZnVuY3Rpb25zL3Byb21pc2VIZWxwZXJzXCI7XG5cbmltcG9ydCB7IE1QUklTX1BMVUdJTl9QQVRILCBNUFJJU19QTFVHSU5fVVJMIH0gZnJvbSAnLi4vY29uc3RzJ1xuaW1wb3J0IHsgbm90aWZ5IH0gZnJvbSBcIi4uL3VpL05vdGlmaWNhdGlvbnMvR2VuZXJpY05vdGlmaWNhdGlvblwiO1xuXG5jb25zdCB7IGZpbmRfcHJvZ3JhbV9pbl9wYXRoLCBmaWxlX3Rlc3QsIEZpbGVUZXN0IH0gPSBpbXBvcnRzLmdpLkdMaWI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnN0YWxsTXB2V2l0aE1wcmlzKCkge1xuXG4gICAgY29uc3QgbXByaXNQbHVnaW5Eb3dubG9hZGVkID0gY2hlY2tNcHJpc1BsdWdpbkRvd25sb2FkZWQoKVxuICAgIGNvbnN0IG1wdkluc3RhbGxlZCA9IGNoZWNrTXB2SW5zdGFsbGVkKClcblxuICAgICFtcHJpc1BsdWdpbkRvd25sb2FkZWQgJiYgYXdhaXQgZG93bmxvYWRNcmlzUGx1Z2luSW50ZXJhY3RpdmUoKVxuXG4gICAgaWYgKCFtcHZJbnN0YWxsZWQpIHtcbiAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uVGV4dCA9IGBQbGVhc2UgJHttcHJpc1BsdWdpbkRvd25sb2FkZWQgPyAnJyA6ICdhbHNvJ30gaW5zdGFsbCB0aGUgbXB2IHBhY2thZ2UuYFxuICAgICAgICBub3RpZnkoeyB0ZXh0OiBub3RpZmljYXRpb25UZXh0IH0pXG4gICAgICAgIGF3YWl0IGluc3RhbGxNcHZJbnRlcmFjdGl2ZSgpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBjaGVja01wdkluc3RhbGxlZCgpIHtcbiAgICByZXR1cm4gZmluZF9wcm9ncmFtX2luX3BhdGgoJ21wdicpXG59XG5cbmZ1bmN0aW9uIGNoZWNrTXByaXNQbHVnaW5Eb3dubG9hZGVkKCkge1xuICAgIHJldHVybiBmaWxlX3Rlc3QoTVBSSVNfUExVR0lOX1BBVEgsIEZpbGVUZXN0LklTX1JFR1VMQVIpXG59XG5cbmZ1bmN0aW9uIGluc3RhbGxNcHZJbnRlcmFjdGl2ZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICAgIGlmIChjaGVja01wdkluc3RhbGxlZCgpKSByZXR1cm4gcmVzb2x2ZSgpXG5cbiAgICAgICAgaWYgKCFmaW5kX3Byb2dyYW1faW5fcGF0aChcImFwdHVybFwiKSkgcmV0dXJuIHJlamVjdCgpXG5cbiAgICAgICAgY29uc3QgW3N0ZGVyciwgc3Rkb3V0LCBleGl0Q29kZV0gPSBhd2FpdCBzcGF3bkNvbW1hbmRMaW5lUHJvbWlzZShgXG4gICAgICAgICAgICBhcHR1cmwgYXB0Oi8vbXB2YFxuICAgICAgICApXG5cbiAgICAgICAgLy8gZXhpdENvZGUgMCBtZWFucyBzdWNlc3NmdWxseS4gU2VlOiBtYW4gYXB0dXJsXG4gICAgICAgIHJldHVybiAoZXhpdENvZGUgPT09IDApID8gcmVzb2x2ZSgpIDogcmVqZWN0KHN0ZGVycilcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBkb3dubG9hZE1yaXNQbHVnaW5JbnRlcmFjdGl2ZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICAgIGlmIChjaGVja01wcmlzUGx1Z2luRG93bmxvYWRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgW3N0ZGVyciwgc3Rkb3V0LCBleGl0Q29kZV0gPSBhd2FpdCBzcGF3bkNvbW1hbmRMaW5lUHJvbWlzZShcbiAgICAgICAgICAgIGBweXRob24zICAke19fbWV0YS5wYXRofS9kb3dubG9hZC1kaWFsb2ctbXByaXMucHlgXG4gICAgICAgIClcblxuICAgICAgICBpZiAoc3Rkb3V0LnRyaW0oKSAhPT0gJ0NvbnRpbnVlJykgeyByZXR1cm4gcmVqZWN0KCkgfVxuXG4gICAgICAgIFtzdGRlcnIsIHN0ZG91dCwgZXhpdENvZGVdID0gYXdhaXQgc3Bhd25Db21tYW5kTGluZVByb21pc2UoYFxuICAgICAgICAgICAgd2dldCAke01QUklTX1BMVUdJTl9VUkx9IC1PICR7TVBSSVNfUExVR0lOX1BBVEh9YCk7XG5cbiAgICAgICAgLy8gV2dldCBhbHdheXMgcHJpbnRzIHRvIHN0ZGVyciAtIGV4aXRjb2RlIDAgbWVhbnMgaXQgd2FzIHN1Y2Vzc2Z1bGwgXG4gICAgICAgIC8vIHNlZTogIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEzMDY2NTE4L3doeS1kb2VzLXdnZXQtb3V0cHV0LXRvLXN0ZGVyci1yYXRoZXItdGhhbi1zdGRvdXRcbiAgICAgICAgLy8gYW5kIGh0dHBzOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvd2dldC9tYW51YWwvaHRtbF9ub2RlL0V4aXQtU3RhdHVzLmh0bWxcbiAgICAgICAgcmV0dXJuIChleGl0Q29kZSA9PT0gMCkgPyByZXNvbHZlKCkgOiByZWplY3Qoc3RkZXJyKVxuXG4gICAgfSlcbn1cblxuIiwiY29uc3QgeyBDbGlwYm9hcmQsIENsaXBib2FyZFR5cGUgfSA9IGltcG9ydHMuZ2kuU3RcblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHlUZXh0KHRleHQ6IHN0cmluZykge1xuICAgIENsaXBib2FyZC5nZXRfZGVmYXVsdCgpLnNldF90ZXh0KENsaXBib2FyZFR5cGUuQ0xJUEJPQVJELCB0ZXh0KVxufSIsImNvbnN0IHsgQXBwbGV0LCBBbGxvd2VkTGF5b3V0IH0gPSBpbXBvcnRzLnVpLmFwcGxldFxuY29uc3QgeyBCaW4gfSA9IGltcG9ydHMuZ2kuU3RcbmNvbnN0IHsgRXZlbnRUeXBlIH0gPSBpbXBvcnRzLmdpLkNsdXR0ZXJcblxuaW50ZXJmYWNlIEFyZ3VtZW50cyB7XG4gICAgaWNvbjogaW1wb3J0cy5naS5TdC5JY29uLFxuICAgIGxhYmVsOiBpbXBvcnRzLmdpLlN0LkxhYmVsLFxuICAgIG9yaWVudGF0aW9uOiBpbXBvcnRzLmdpLlN0LlNpZGUsXG4gICAgcGFuZWxIZWlnaHQ6IG51bWJlcixcbiAgICBpbnN0YW5jZUlkOiBudW1iZXIsXG4gICAgb25DbGljazogKCkgPT4gdm9pZCxcbiAgICBvblNjcm9sbDogKHNjcm9sbERpcmVjdGlvbjogaW1wb3J0cy5naS5DbHV0dGVyLlNjcm9sbERpcmVjdGlvbikgPT4gdm9pZCxcbiAgICBvbk1pZGRsZUNsaWNrOiAoKSA9PiB2b2lkLFxuICAgIG9uUmlnaHRDbGljazogKCkgPT4gdm9pZCxcbiAgICBvbkFwcGxldE1vdmVkOiAoKSA9PiB2b2lkLFxuICAgIG9uQXBwbGV0UmVtb3ZlZDogKCkgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXBwbGV0KGFyZ3M6IEFyZ3VtZW50cykge1xuXG4gICAgY29uc3Qge1xuICAgICAgICBvcmllbnRhdGlvbixcbiAgICAgICAgcGFuZWxIZWlnaHQsXG4gICAgICAgIGluc3RhbmNlSWQsXG4gICAgICAgIGljb24sXG4gICAgICAgIGxhYmVsLFxuICAgICAgICBvbkNsaWNrLFxuICAgICAgICBvblNjcm9sbCxcbiAgICAgICAgb25NaWRkbGVDbGljayxcbiAgICAgICAgb25BcHBsZXRNb3ZlZCxcbiAgICAgICAgb25BcHBsZXRSZW1vdmVkLFxuICAgICAgICBvblJpZ2h0Q2xpY2tcbiAgICB9ID0gYXJnc1xuXG4gICAgY29uc3QgYXBwbGV0ID0gbmV3IEFwcGxldChvcmllbnRhdGlvbiwgcGFuZWxIZWlnaHQsIGluc3RhbmNlSWQpO1xuXG4gICAgbGV0IGFwcGxldFJlbG9hZGVkID0gZmFsc2U7XG5cbiAgICBbaWNvbiwgbGFiZWxdLmZvckVhY2god2lkZ2V0ID0+IHtcbiAgICAgICAgYXBwbGV0LmFjdG9yLmFkZF9jaGlsZCh3aWRnZXQpXG4gICAgfSlcblxuICAgIGFwcGxldC5vbl9hcHBsZXRfY2xpY2tlZCA9IG9uQ2xpY2tcbiAgICBhcHBsZXQub25fYXBwbGV0X21pZGRsZV9jbGlja2VkID0gb25NaWRkbGVDbGlja1xuICAgIGFwcGxldC5zZXRBbGxvd2VkTGF5b3V0KEFsbG93ZWRMYXlvdXQuQk9USClcblxuICAgIGFwcGxldC5vbl9hcHBsZXRfcmVsb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFwcGxldFJlbG9hZGVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGFwcGxldC5vbl9hcHBsZXRfcmVtb3ZlZF9mcm9tX3BhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhcHBsZXRSZWxvYWRlZCA/IG9uQXBwbGV0TW92ZWQoKSA6IG9uQXBwbGV0UmVtb3ZlZCgpXG4gICAgICAgIGFwcGxldFJlbG9hZGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBhcHBsZXQuYWN0b3IuY29ubmVjdCgnZXZlbnQnLCAoYWN0b3IsIGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC50eXBlKCkgIT09IEV2ZW50VHlwZS5CVVRUT05fUFJFU1MpIHJldHVyblxuXG4gICAgICAgIGlmIChldmVudC5nZXRfYnV0dG9uKCkgPT09IDMpIHtcbiAgICAgICAgICAgIG9uUmlnaHRDbGljaygpXG4gICAgICAgIH1cblxuICAgIH0pXG5cbiAgICBhcHBsZXQuYWN0b3IuY29ubmVjdCgnc2Nyb2xsLWV2ZW50JywgKGFjdG9yLCBldmVudCkgPT4ge1xuICAgICAgICBvblNjcm9sbChldmVudC5nZXRfc2Nyb2xsX2RpcmVjdGlvbigpKVxuICAgIH0pXG5cbiAgICByZXR1cm4gYXBwbGV0XG59IiwiaW1wb3J0IHsgUkFESU9fU1lNQk9MSUNfSUNPTl9OQU1FLCBMT0FESU5HX0lDT05fTkFNRSB9IGZyb20gXCIuLi8uLi9jb25zdHNcIlxuaW1wb3J0IHsgQWR2YW5jZWRQbGF5YmFja1N0YXR1cywgSWNvblR5cGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIlxuXG5jb25zdCB7IEljb24sIEljb25UeXBlIH0gPSBpbXBvcnRzLmdpLlN0XG5jb25zdCB7IEljb25UeXBlOiBJY29uVHlwZUVudW0gfSA9IGltcG9ydHMuZ2kuU3RcblxuXG4vLyBUT0RPIHRoZSBBcHBsZXRJY29uIHNob3VsZG4ndCBoYXZlIGFjY2VzcyB0byB0aGlzIVxuLy8gQmV0dGVyIHRvIGp1c3QgcGFzcyB0aGUgaWNvblR5cGUgc2l6ZSBmb3IgYm90aCBmdWxsY29sb3IgYW5kIHN5bWJvbGljIGljb25cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIC8vIHBhbmVsIGFuZCBsb2NhdGlvbiBsYWJlbCBhcmUgbmVlZGVkIHRvIGNhbGMgdGhlIGljb24gc2l6ZVxuICAgIHBhbmVsOiBpbXBvcnRzLnVpLnBhbmVsLlBhbmVsLFxuICAgIGxvY2F0aW9uTGFiZWw6IGltcG9ydHMudWkuYXBwbGV0TWFuYWdlci5Mb2NhdGlvbkxhYmVsXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFwcGxldEljb24oYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIHBhbmVsLFxuICAgICAgICBsb2NhdGlvbkxhYmVsXG4gICAgfSA9IGFyZ3NcblxuICAgIGxldCBwbGF5YmFja1N0YXR1czogQWR2YW5jZWRQbGF5YmFja1N0YXR1c1xuXG4gICAgY29uc3QgcGxheWJhY2tTdGF0dXNTdHlsZU1hcCA9IG5ldyBNYXA8QWR2YW5jZWRQbGF5YmFja1N0YXR1cywgc3RyaW5nPihbXG4gICAgICAgIFsnU3RvcHBlZCcsICcgJ10sXG4gICAgICAgIFsnTG9hZGluZycsICcgJ11cbiAgICBdKVxuXG4gICAgY29uc3QgaWNvbiA9IG5ldyBJY29uKHt9KVxuXG4gICAgbGV0IG5vcm1hbEljb25UeXBlOiBJY29uVHlwZVxuXG5cbiAgICAvLyB0aGUgaWNvbiB0eXBlIHBhc3NlZCBmcm9tIG91dHNpZGUgaXMgb3ZlcnJpdGVuIHdoZW4gdGhlIHBsYXliYWNrc3RhdHVzIGlzICdsb2FkaW5nJyBcbiAgICBmdW5jdGlvbiBzZXRJY29uVHlwZUludGVybmFsKGljb25UeXBlRW51bTogaW1wb3J0cy5naS5TdC5JY29uVHlwZSwgaWNvbk5hbWU6IHN0cmluZykge1xuICAgICAgICBpY29uLnN0eWxlX2NsYXNzID0gaWNvblR5cGVFbnVtID09PSBJY29uVHlwZUVudW0uU1lNQk9MSUMgP1xuICAgICAgICAgICAgJ3N5c3RlbS1zdGF0dXMtaWNvbicgOiAnYXBwbGV0LWljb24nXG5cbiAgICAgICAgaWNvbi5pY29uX25hbWUgPSBpY29uTmFtZVxuICAgICAgICBpY29uLmljb25fdHlwZSA9IGljb25UeXBlRW51bVxuICAgICAgICBpY29uLmljb25fc2l6ZSA9IHBhbmVsLmdldFBhbmVsWm9uZUljb25TaXplKGxvY2F0aW9uTGFiZWwsIGljb25UeXBlRW51bSlcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHNldEljb25UeXBlKGljb25UeXBlOiBJY29uVHlwZSkge1xuXG4gICAgICAgIGlmICghaWNvblR5cGUpIHJldHVyblxuXG4gICAgICAgIGxldCBpY29uVHlwZUVudW06IGltcG9ydHMuZ2kuU3QuSWNvblR5cGVcbiAgICAgICAgbGV0IGljb25OYW1lOiBzdHJpbmdcbiAgICAgICAgbm9ybWFsSWNvblR5cGUgPSBpY29uVHlwZVxuXG4gICAgICAgIGlmIChpY29uVHlwZSA9PT0gJ1NZTUJPTElDJykge1xuICAgICAgICAgICAgaWNvbk5hbWUgPSBSQURJT19TWU1CT0xJQ19JQ09OX05BTUVcbiAgICAgICAgICAgIGljb25UeXBlRW51bSA9IEljb25UeXBlRW51bS5TWU1CT0xJQ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWNvbk5hbWUgPSBgcmFkaW9hcHBsZXQtJHtpY29uVHlwZS50b0xvd2VyQ2FzZSgpfWBcbiAgICAgICAgICAgIGljb25UeXBlRW51bSA9IEljb25UeXBlRW51bS5GVUxMQ09MT1JcbiAgICAgICAgfVxuXG4gICAgICAgIHNldEljb25UeXBlSW50ZXJuYWwoaWNvblR5cGVFbnVtLCBpY29uTmFtZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVJY29uU2l6ZSgpIHtcbiAgICAgICAgY29uc3QgaWNvblNpemUgPSBwYW5lbC5nZXRQYW5lbFpvbmVJY29uU2l6ZShsb2NhdGlvbkxhYmVsLCBpY29uLmljb25fdHlwZSlcbiAgICAgICAgaWNvbi5pY29uX3NpemUgPSBpY29uU2l6ZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldENvbG9yV2hlblBhdXNlZChjb2xvcjogc3RyaW5nKSB7XG4gICAgICAgIHBsYXliYWNrU3RhdHVzU3R5bGVNYXAuc2V0KCdQYXVzZWQnLCBgY29sb3I6ICR7Y29sb3J9YClcblxuICAgICAgICBpZiAocGxheWJhY2tTdGF0dXMpIHNldFBsYXliYWNrU3RhdHVzKHBsYXliYWNrU3RhdHVzKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldENvbG9yV2hlblBsYXlpbmcoY29sb3I6IHN0cmluZykge1xuXG4gICAgICAgIHBsYXliYWNrU3RhdHVzU3R5bGVNYXAuc2V0KCdQbGF5aW5nJywgYGNvbG9yOiAke2NvbG9yfWApXG5cbiAgICAgICAgaWYgKHBsYXliYWNrU3RhdHVzKSBzZXRQbGF5YmFja1N0YXR1cyhwbGF5YmFja1N0YXR1cylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRQbGF5YmFja1N0YXR1cyhuZXdQbGF5YmFja1N0YXR1czogQWR2YW5jZWRQbGF5YmFja1N0YXR1cykge1xuXG4gICAgICAgIHBsYXliYWNrU3RhdHVzID0gbmV3UGxheWJhY2tTdGF0dXNcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBwbGF5YmFja1N0YXR1c1N0eWxlTWFwLmdldChwbGF5YmFja1N0YXR1cylcblxuXG4gICAgICAgIGlmIChuZXdQbGF5YmFja1N0YXR1cyA9PT0gJ0xvYWRpbmcnKSB7XG4gICAgICAgICAgICBzZXRJY29uVHlwZUludGVybmFsKEljb25UeXBlRW51bS5TWU1CT0xJQywgTE9BRElOR19JQ09OX05BTUUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRJY29uVHlwZShub3JtYWxJY29uVHlwZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc3R5bGUpIHJldHVyblxuXG4gICAgICAgIGljb24uc2V0X3N0eWxlKHN0eWxlKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdG9yOiBpY29uLFxuICAgICAgICBzZXRQbGF5YmFja1N0YXR1cyxcbiAgICAgICAgc2V0Q29sb3JXaGVuUGxheWluZyxcbiAgICAgICAgc2V0Q29sb3JXaGVuUGF1c2VkLFxuICAgICAgICBzZXRJY29uVHlwZSxcbiAgICAgICAgdXBkYXRlSWNvblNpemVcbiAgICB9XG5cbn0iLCJjb25zdCB7IExhYmVsIH0gPSBpbXBvcnRzLmdpLlN0XG5jb25zdCB7IEVsbGlwc2l6ZU1vZGUgfSA9IGltcG9ydHMuZ2kuUGFuZ29cbmNvbnN0IHsgQWN0b3JBbGlnbiB9ID0gaW1wb3J0cy5naS5DbHV0dGVyXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBcHBsZXRMYWJlbCgpIHtcblxuICAgIGNvbnN0IGxhYmVsID0gbmV3IExhYmVsKHtcbiAgICAgICAgcmVhY3RpdmU6IHRydWUsXG4gICAgICAgIHRyYWNrX2hvdmVyOiB0cnVlLFxuICAgICAgICBzdHlsZV9jbGFzczogJ2FwcGxldC1sYWJlbCcsXG4gICAgICAgIHlfYWxpZ246IEFjdG9yQWxpZ24uQ0VOVEVSLFxuICAgICAgICB5X2V4cGFuZDogZmFsc2UsXG4gICAgICAgIHZpc2libGU6IGZhbHNlXG4gICAgfSlcblxuICAgIC8vIE5vIGlkZWEgd2h5IG5lZWRlZCBidXQgd2l0aG91dCB0aGUgbGFiZWwgaXMgbm90IHNob3duIFxuICAgIGxhYmVsLmNsdXR0ZXJfdGV4dC5lbGxpcHNpemUgPSBFbGxpcHNpemVNb2RlLk5PTkVcblxuICAgIGxldCB2aXNpYmxlOiBib29sZWFuXG4gICAgbGV0IHRleHQ6IHN0cmluZ1xuXG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gbmV3VmFsdWUgdGV4dCB0byBzaG93IG9uIHRoZSBsYWJlbC4gVGhlIHRleHQgaG93ZXZlciBpcyBvbmx5IHZpc2libGUgaW4gdGhlIEdVSSB3aGVuIHZpc2libGUgaXMgdHJ1ZS4gSXQgaXMgYWxzbyBzaG93biBubyB0ZXh0IHdoZW4gcGFzc2luZyBudWxsIGZvciB0ZXh0IGJ1dCBpbiB0aGF0IGNhc2UgdGhlIHRleHQgaXMgc2hvd24gYWdhaW4gd2hlbiBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gYWdhaW4gd2l0aCBhIHN0cmluZyAoaS5lIHRoaXMgZnVuY3Rpb24gaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoIG51bGwgd2hlbiB0aGUgdGV4dCBzaGFsbCBvbmx5IHRlbXBvcmFyaWx5IGJlIGhpZGRlbikgICAgXG4gICAgICogXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0VGV4dChuZXdWYWx1ZTogc3RyaW5nIHwgbnVsbCkge1xuXG4gICAgICAgIHRleHQgPSBuZXdWYWx1ZVxuXG4gICAgICAgIGlmICghdmlzaWJsZSkgcmV0dXJuXG5cbiAgICAgICAgbGFiZWwuc2hvdygpXG4gICAgICAgIG5ld1ZhbHVlID8gbGFiZWwudGV4dCA9IGAgJHtuZXdWYWx1ZX1gIDogbGFiZWwuaGlkZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VmlzaWJpbGl0eShuZXdWYWx1ZTogYm9vbGVhbikge1xuXG4gICAgICAgIHZpc2libGUgPSBuZXdWYWx1ZVxuXG4gICAgICAgIGlmICh0ZXh0KSBsYWJlbC52aXNpYmxlID0gbmV3VmFsdWVcbiAgICAgICAgaWYgKHZpc2libGUgJiYgdGV4dCkgc2V0VGV4dCh0ZXh0KVxuICAgIH1cblxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0b3I6IGxhYmVsLFxuICAgICAgICBzZXRWaXNpYmlsaXR5LFxuICAgICAgICBzZXRUZXh0LFxuICAgIH1cbn0iLCJpbXBvcnQgeyBERUZBVUxUX1RPT0xUSVBfVFhUIH0gZnJvbSBcIi4uLy4uL2NvbnN0c1wiXG5cbmNvbnN0IHsgUGFuZWxJdGVtVG9vbHRpcCB9ID0gaW1wb3J0cy51aS50b29sdGlwc1xuXG5pbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICBhcHBsZXQ6IGltcG9ydHMudWkuYXBwbGV0LkFwcGxldFxuICAgIG9yaWVudGF0aW9uOiBpbXBvcnRzLmdpLlN0LlNpZGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFwcGxldFRvb2x0aXAoYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIG9yaWVudGF0aW9uLFxuICAgICAgICBhcHBsZXRcbiAgICB9ID0gYXJnc1xuXG4gICAgY29uc3QgdG9vbHRpcCA9IG5ldyBQYW5lbEl0ZW1Ub29sdGlwKGFwcGxldCwgbnVsbCwgb3JpZW50YXRpb24pXG5cbiAgICBmdW5jdGlvbiBzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIgfCBudWxsKSB7XG4gICAgICAgIGlmICh2b2x1bWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdG9vbHRpcC5zZXRfdGV4dChERUZBVUxUX1RPT0xUSVBfVFhUKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0b29sdGlwLnNldF90ZXh0KGBWb2x1bWU6ICR7dm9sdW1lLnRvU3RyaW5nKCl9ICVgKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZvbHVtZVxuICAgIH1cbn0iLCJpbXBvcnQgeyBjcmVhdGVCYXNpY05vdGlmaWNhdGlvbiB9IGZyb20gXCIuL05vdGlmaWNhdGlvbkJhc2VcIjtcblxuY29uc3QgeyBzcGF3bkNvbW1hbmRMaW5lIH0gPSBpbXBvcnRzLm1pc2MudXRpbFxuXG5pbnRlcmZhY2UgQXJndW1lbnRzIHtcbiAgICBkb3dubG9hZFBhdGg6IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm90aWZ5WW91dHViZURvd25sb2FkRmluaXNoZWQoYXJnczogQXJndW1lbnRzKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGRvd25sb2FkUGF0aFxuICAgIH0gPSBhcmdzXG5cblxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGNyZWF0ZUJhc2ljTm90aWZpY2F0aW9uKHtcbiAgICAgICAgbm90aWZpY2F0aW9uVGV4dDogYERvd25sb2FkIGZpbmlzaGVkLiBGaWxlIHNhdmVkIHRvICR7ZG93bmxvYWRQYXRofWBcbiAgICB9KVxuXG4gICAgY29uc3QgcGxheUJ0bklkID0gJ29wZW5CdG4nXG5cbiAgICBub3RpZmljYXRpb24uYWRkQnV0dG9uKHBsYXlCdG5JZCwgJ1BsYXknKVxuXG4gICAgbm90aWZpY2F0aW9uLmNvbm5lY3QoJ2FjdGlvbi1pbnZva2VkJywgKGFjdG9yLCBpZCkgPT4ge1xuXG4gICAgICAgIGlmIChpZCA9PT0gcGxheUJ0bklkKSB7XG4gICAgICAgICAgICBzcGF3bkNvbW1hbmRMaW5lKGB4ZGctb3BlbiAnJHtkb3dubG9hZFBhdGh9J2ApXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgbm90aWZpY2F0aW9uLm5vdGlmeSgpXG59IiwiaW1wb3J0IHsgY3JlYXRlQmFzaWNOb3RpZmljYXRpb24gfSBmcm9tIFwiLi9Ob3RpZmljYXRpb25CYXNlXCI7XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgb25DYW5jZWxDbGlja2VkOiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3RpZnlZb3V0dWJlRG93bmxvYWRTdGFydGVkKGFyZ3M6IEFyZ3VtZW50cykge1xuXG4gICAgY29uc3Qge1xuICAgICAgICB0aXRsZSxcbiAgICAgICAgb25DYW5jZWxDbGlja2VkXG4gICAgfSA9IGFyZ3NcblxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGNyZWF0ZUJhc2ljTm90aWZpY2F0aW9uKHtcbiAgICAgICAgbm90aWZpY2F0aW9uVGV4dDogYERvd25sb2FkaW5nICR7dGl0bGV9IC4uLmAsXG4gICAgfSlcblxuICAgIGNvbnN0IGNhbmNlbEJ0bklkID0gJ2NhbmNlbEJ0bidcbiAgICBub3RpZmljYXRpb24uYWRkQnV0dG9uKGNhbmNlbEJ0bklkLCAnQ2FuY2VsJylcblxuICAgIG5vdGlmaWNhdGlvbi5jb25uZWN0KCdhY3Rpb24taW52b2tlZCcsIChhY3RvciwgaWQpID0+IHtcbiAgICAgICAgaWYgKGlkID09PSBjYW5jZWxCdG5JZCkgb25DYW5jZWxDbGlja2VkKClcbiAgICB9KVxuXG4gICAgbm90aWZpY2F0aW9uLm5vdGlmeSgpXG59IiwiaW1wb3J0IHsgQVBQTEVUX1NJVEUgfSBmcm9tIFwiLi4vLi4vY29uc3RzXCI7XG5pbXBvcnQgeyBjcmVhdGVCYXNpY05vdGlmaWNhdGlvbiB9IGZyb20gXCIuL05vdGlmaWNhdGlvbkJhc2VcIjtcbmNvbnN0IHsgc3Bhd25Db21tYW5kTGluZSB9ID0gaW1wb3J0cy5taXNjLnV0aWxcbmNvbnN0IHsgZ2V0X2hvbWVfZGlyIH0gPSBpbXBvcnRzLmdpLkdMaWI7XG5cbmV4cG9ydCBmdW5jdGlvbiBub3RpZnlZb3V0dWJlRG93bmxvYWRGYWlsZWQoKSB7XG5cblxuICAgIGNvbnN0IG5vdGlmaWNhdGlvblRleHQgPVxuICAgICAgICBgQ291bGRuJ3QgZG93bmxvYWQgU29uZyBmcm9tIFlvdXR1YmUgZHVlIHRvIGFuIEVycm9yLiBNYWtlIFN1cmUgeW91IGhhdmUgdGhlIG5ld2VzdCB2ZXJzaW9uIG9mIHlvdXR1YmUtZGwgaW5zdGFsbGVkLiBcbiAgICAgICAgXFxuPGI+SW1wb3J0YW50OjwvYj4gRG9uJ3QgdXNlIGFwdCBmb3IgdGhlIGluc3RhbGxhdGlvbiBidXQgZm9sbG93IHRoZSBpbnN0YWxsYXRpb24gaW5zdHJ1Y3Rpb24gZ2l2ZW4gb24gdGhlIFJhZGlvIEFwcGxldCBTaXRlIGluIHRoZSBDaW5uYW1vbiBTdG9yZSBpbnN0ZWFkXG4gICAgICAgIFxcbkZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSB0aGUgbG9nc2BcblxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGNyZWF0ZUJhc2ljTm90aWZpY2F0aW9uKHtcbiAgICAgICAgbm90aWZpY2F0aW9uVGV4dCxcbiAgICAgICAgaXNNYXJrdXA6IHRydWUsXG4gICAgICAgIHRyYW5zaWVudDogZmFsc2VcbiAgICB9KVxuXG4gICAgY29uc3Qgdmlld1N0b3JlQnRuSWQgPSAndmlld1N0b3JlQnRuJ1xuICAgIGNvbnN0IHZpZXdMb2dCdG5JZCA9ICd2aWV3TG9nQnRuJ1xuXG4gICAgbm90aWZpY2F0aW9uLmFkZEJ1dHRvbih2aWV3U3RvcmVCdG5JZCwgJ1ZpZXcgSW5zdGFsbGF0aW9uIEluc3RydWN0aW9uJylcbiAgICBub3RpZmljYXRpb24uYWRkQnV0dG9uKHZpZXdMb2dCdG5JZCwgXCJWaWV3IExvZ3NcIilcblxuICAgIG5vdGlmaWNhdGlvbi5jb25uZWN0KCdhY3Rpb24taW52b2tlZCcsIChhY3RvciwgaWQpID0+IHtcbiAgICAgICAgaWYgKGlkID09PSB2aWV3U3RvcmVCdG5JZCkge1xuICAgICAgICAgICAgc3Bhd25Db21tYW5kTGluZShgeGRnLW9wZW4gJHtBUFBMRVRfU0lURX0gYClcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWQgPT09IHZpZXdMb2dCdG5JZCkge1xuICAgICAgICAgICAgc3Bhd25Db21tYW5kTGluZShgeGRnLW9wZW4gJHtnZXRfaG9tZV9kaXIoKX0vLnhzZXNzaW9uLWVycm9yc2ApXG4gICAgICAgIH1cblxuICAgIH0pXG5cbiAgICBub3RpZmljYXRpb24ubm90aWZ5KClcbn0iLCJpbXBvcnQgeyBQT1BVUF9NRU5VX0lURU1fQ0xBU1MgfSBmcm9tIFwiLi4vY29uc3RzXCJcbmltcG9ydCB7IGNyZWF0ZUFjdGl2V2lkZ2V0IH0gZnJvbSBcIi4uL2xpYi9BY3RpdldpZGdldFwiO1xuaW1wb3J0IHsgY3JlYXRlU2xpZGVyIH0gZnJvbSBcIi4uL2xpYi9TbGlkZXJcIjtcblxuY29uc3QgeyBCb3hMYXlvdXQsIExhYmVsIH0gPSBpbXBvcnRzLmdpLlN0XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIC8qKiBwb3NpdGlvbiBpbiBzZWNvbmQgKi9cbiAgICBvblBvc2l0aW9uQ2hhbmdlZDogKHBvc2l0aW9uOiBudW1iZXIpID0+IHZvaWRcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2Vla2VyKGFyZ3M6IEFyZ3VtZW50cykge1xuXG4gICAgY29uc3Qge1xuICAgICAgICBvblBvc2l0aW9uQ2hhbmdlZFxuICAgIH0gPSBhcmdzXG5cbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQm94TGF5b3V0KHtcbiAgICAgICAgc3R5bGVfY2xhc3M6IFBPUFVQX01FTlVfSVRFTV9DTEFTU1xuICAgIH0pXG5cbiAgICBjcmVhdGVBY3RpdldpZGdldCh7XG4gICAgICAgIHdpZGdldDogY29udGFpbmVyXG4gICAgfSlcblxuICAgIC8vIGxlbmd0aCBpbiBzZWNvbmRzXG4gICAgbGV0IGxlbmd0aDogbnVtYmVyID0gMTAwXG4gICAgLy8gcG9zaXRpb24gaW4gc2Vjb25kc1xuICAgIGxldCBwb3NpdGlvbjogbnVtYmVyXG5cbiAgICBjb25zdCBwb3NpdGlvbkxhYmVsID0gbmV3IExhYmVsKClcbiAgICBjb25zdCBsZW5ndGhMYWJlbCA9IG5ldyBMYWJlbCgpO1xuXG4gICAgY29uc3Qgc2xpZGVyID0gY3JlYXRlU2xpZGVyKHtcbiAgICAgICAgaW5pdGlhbFZhbHVlOiAwLjUsXG4gICAgICAgIG9uVmFsdWVDaGFuZ2VkOiBoYW5kbGVWYWx1ZUNoYW5nZWRcbiAgICB9KTtcblxuXG4gICAgW3Bvc2l0aW9uTGFiZWwsIHNsaWRlci5hY3RvciwgbGVuZ3RoTGFiZWxdLmZvckVhY2god2lkZ2V0ID0+IHtcbiAgICAgICAgY29udGFpbmVyLmFkZF9jaGlsZCh3aWRnZXQpXG4gICAgfSlcblxuICAgIC8qKiBAcGFyYW0gdmFsdWUgaW4gc2Vjb25kcyAqL1xuICAgIGZ1bmN0aW9uIHNldExlbmd0aCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIGxlbmd0aCA9IHZhbHVlXG4gICAgICAgIGxlbmd0aExhYmVsLnNldF90ZXh0KHNlY29uZHNUb0Zvcm1hdGVkTWluKHZhbHVlKSlcbiAgICAgICAgcmVmcmVzaFNsaWRlclZhbHVlKClcbiAgICB9XG5cbiAgICAvKiogQHBhcmFtIHZhbHVlIGluIHNlY29uZHMgKi9cbiAgICBmdW5jdGlvbiBzZXRQb3NpdGlvbih2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHBvc2l0aW9uID0gdmFsdWU7XG4gICAgICAgIHBvc2l0aW9uTGFiZWwuc2V0X3RleHQoc2Vjb25kc1RvRm9ybWF0ZWRNaW4ocG9zaXRpb24pKVxuICAgICAgICByZWZyZXNoU2xpZGVyVmFsdWUoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hTbGlkZXJWYWx1ZSgpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVyVmFsdWUgPSBsZW5ndGggPT09IDAgPyAwIDogTWF0aC5taW4ocG9zaXRpb24gLyBsZW5ndGgsIDEpXG4gICAgICAgIHNsaWRlci5zZXRWYWx1ZShzbGlkZXJWYWx1ZSwgdHJ1ZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVWYWx1ZUNoYW5nZWQodmFsdWU6IG51bWJlcikge1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IHZhbHVlICogbGVuZ3RoXG5cbiAgICAgICAgb25Qb3NpdGlvbkNoYW5nZWQobmV3UG9zaXRpb24pXG5cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIGNvbnZlcnRzIHNlY29uZHMgdG8gYSBzdHJpbmcgaW4gdGhlIGZvcm0gb2Y6IG1tOnNzIFxuICAgICAqIFxuICAgICAqIGUuZy4gMTAgc2Vjb25kcyA9IDAwOjEwLCAxMDAgc2Vjb25kcyA9IDAxOjQwLCAgNjAwMCBzZWNvbmRzID0gMTAwOjAwXG4gICAgICogICAgICAqIFxuICAgICAqIEBwYXJhbSBzZWNvbmRzIFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNlY29uZHNUb0Zvcm1hdGVkTWluKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MClcbiAgICAgICAgY29uc3QgcmVtYWluaW5nU2Vjb25kcyA9IHNlY29uZHMgLSBtaW51dGVzICogNjA7XG5cbiAgICAgICAgLy8gZW5zdXJlcyBtaW51dGVzIGFuZCBzZWNvbmRzIGFyZSBzaG93biB3aXRoIGF0IGxlYXN0IHR3byBkaWdpdHNcbiAgICAgICAgcmV0dXJuIFttaW51dGVzLCByZW1haW5pbmdTZWNvbmRzXS5tYXAodmFsdWUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVTdHJpbmcgPSB2YWx1ZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJylcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVN0cmluZ1xuICAgICAgICB9KS5qb2luKFwiOlwiKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdG9yOiBjb250YWluZXIsXG4gICAgICAgIHNldExlbmd0aCxcbiAgICAgICAgc2V0UG9zaXRpb25cbiAgICB9XG59IiwiLy8gaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnOyBub3cgcG9zc2libGVcbmltcG9ydCB7IGNyZWF0ZUNvbmZpZyB9IGZyb20gJy4vQ29uZmlnJztcbmltcG9ydCB7IENoYW5uZWxTdG9yZSB9IGZyb20gJy4vQ2hhbm5lbFN0b3JlJztcbmltcG9ydCB7IGNyZWF0ZUNoYW5uZWxMaXN0IH0gZnJvbSAnLi91aS9DaGFubmVsTGlzdC9DaGFubmVsTGlzdCc7XG5pbXBvcnQgeyBBZHZhbmNlZFBsYXliYWNrU3RhdHVzLCBDaGFubmVsLCBJY29uVHlwZSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgY3JlYXRlTXB2SGFuZGxlciB9IGZyb20gJy4vbXB2L01wdkhhbmRsZXInO1xuaW1wb3J0IHsgY3JlYXRlVm9sdW1lU2xpZGVyIH0gZnJvbSAnLi91aS9Wb2x1bWVTbGlkZXInO1xuaW1wb3J0IHsgY3JlYXRlUG9wdXBNZW51IH0gZnJvbSAnLi9saWIvUG9wdXBNZW51JztcbmltcG9ydCB7IGNyZWF0ZVNlcGFyYXRvck1lbnVJdGVtIH0gZnJvbSAnLi9saWIvUG9wdXBTZXBlcmF0b3InO1xuaW1wb3J0IHsgY3JlYXRlTWVkaWFDb250cm9sVG9vbGJhciB9IGZyb20gJy4vdWkvVG9vbGJhci9NZWRpYUNvbnRyb2xUb29sYmFyJztcbmltcG9ydCB7IGNyZWF0ZVBsYXlQYXVzZUJ1dHRvbiB9IGZyb20gJy4vdWkvVG9vbGJhci9QbGF5UGF1c2VCdXR0b24nO1xuaW1wb3J0IHsgY3JlYXRlU3RvcEJ0biB9IGZyb20gJy4vdWkvVG9vbGJhci9TdG9wQnV0dG9uJztcbmltcG9ydCB7IGNyZWF0ZUluZm9TZWN0aW9uIH0gZnJvbSAnLi91aS9JbmZvU2VjdGlvbic7XG5pbXBvcnQgeyBjcmVhdGVEb3dubG9hZEJ1dHRvbiB9IGZyb20gJy4vdWkvVG9vbGJhci9Eb3dubG9hZEJ1dHRvbic7XG5pbXBvcnQgeyBjcmVhdGVDb3B5QnV0dG9uIH0gZnJvbSAnLi91aS9Ub29sYmFyL0NvcHlCdXR0b24nO1xuaW1wb3J0IHsgZG93bmxvYWRTb25nRnJvbVlvdXR1YmUgfSBmcm9tICcuL2Z1bmN0aW9ucy9kb3dubG9hZEZyb21Zb3V0dWJlJztcbmltcG9ydCB7IGluc3RhbGxNcHZXaXRoTXByaXMgfSBmcm9tICcuL21wdi9DaGVja0luc3RhbGxhdGlvbic7XG5pbXBvcnQgeyBjb3B5VGV4dCB9IGZyb20gJy4vZnVuY3Rpb25zL2NvcHlUZXh0JztcbmltcG9ydCB7IGNyZWF0ZUFwcGxldCB9IGZyb20gJy4vdWkvQXBwbGV0L0FwcGxldCc7XG5pbXBvcnQgeyBjcmVhdGVBcHBsZXRJY29uIH0gZnJvbSAnLi91aS9BcHBsZXQvQXBwbGV0SWNvbic7XG5pbXBvcnQgeyBjcmVhdGVBcHBsZXRMYWJlbCB9IGZyb20gJy4vdWkvQXBwbGV0L0FwcGxldExhYmVsJztcbmltcG9ydCB7IGNyZWF0ZUFwcGxldFRvb2x0aXAgfSBmcm9tICcuL3VpL0FwcGxldC9BcHBsZXRUb29sdGlwJztcbmltcG9ydCB7IG5vdGlmeVlvdXR1YmVEb3dubG9hZEZpbmlzaGVkIH0gZnJvbSAnLi91aS9Ob3RpZmljYXRpb25zL1lvdXR1YmVEb3dubG9hZEZpbmlzaGVkTm90aWZpY2F0aW9uJztcbmltcG9ydCB7IG5vdGlmeVlvdXR1YmVEb3dubG9hZFN0YXJ0ZWQgfSBmcm9tICcuL3VpL05vdGlmaWNhdGlvbnMvWW91dHViZURvd25sb2FkU3RhcnRlZE5vdGlmaWNhdGlvbic7XG5pbXBvcnQgeyBub3RpZnlZb3V0dWJlRG93bmxvYWRGYWlsZWQgfSBmcm9tICcuL3VpL05vdGlmaWNhdGlvbnMvWW91dHViZURvd25sb2FkRmFpbGVkTm90aWZpY2F0aW9uJztcbmltcG9ydCB7IG5vdGlmeSB9IGZyb20gJy4vdWkvTm90aWZpY2F0aW9ucy9HZW5lcmljTm90aWZpY2F0aW9uJztcbmltcG9ydCB7IGNyZWF0ZVNlZWtlciB9IGZyb20gJy4vdWkvU2Vla2VyJztcbmltcG9ydCB7IFZPTFVNRV9ERUxUQSB9IGZyb20gJy4vY29uc3RzJztcblxuY29uc3QgeyBTY3JvbGxEaXJlY3Rpb24gfSA9IGltcG9ydHMuZ2kuQ2x1dHRlcjtcbmNvbnN0IHsgZ2V0QXBwbGV0RGVmaW5pdGlvbiB9ID0gaW1wb3J0cy51aS5hcHBsZXRNYW5hZ2VyO1xuY29uc3QgeyBwYW5lbE1hbmFnZXIgfSA9IGltcG9ydHMudWkubWFpblxuY29uc3QgeyBJY29uVHlwZSwgQm94TGF5b3V0IH0gPSBpbXBvcnRzLmdpLlN0XG5cbmludGVyZmFjZSBBcmd1bWVudHMge1xuICAgIG9yaWVudGF0aW9uOiBpbXBvcnRzLmdpLlN0LlNpZGUsXG4gICAgcGFuZWxIZWlnaHQ6IG51bWJlcixcbiAgICBpbnN0YW5jZUlkOiBudW1iZXJcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gbWFpbihhcmdzOiBBcmd1bWVudHMpOiBpbXBvcnRzLnVpLmFwcGxldC5BcHBsZXQge1xuICAgIGNvbnN0IHtcbiAgICAgICAgb3JpZW50YXRpb24sXG4gICAgICAgIHBhbmVsSGVpZ2h0LFxuICAgICAgICBpbnN0YW5jZUlkXG4gICAgfSA9IGFyZ3NcblxuICAgIC8vIHRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciBub3cuIE9wdGltYWxseSB0aGUgbGFzdFZvbHVtZSBzaG91bGQgYmUgc2F2ZWQgcGVyc2lzdGVudGx5IGVhY2ggdGltZSB0aGUgdm9sdW1lIGlzIGNoYW5nZWQgYnV0IHRoaXMgbGVhZCB0byBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBpc3N1ZSBvbiBzY3JvbGxpbmcgYXQgdGhlIG1vbWVudC4gSG93ZXZlciB0aGlzIHNob3VsZG4ndCBiZSB0aGUgY2FzZSBhcyBpdCBpcyBubyBwcm9ibGVtIHRvIGxvZyB0aGUgdm9sdW1lIGVhY2ggdGltZSB0aGUgdm9sdW1lIGNoYW5nZXMgKHNvIGl0IGlzIGEgcHJvYmxlbSBpbiB0aGUgY29uZmlnIGltcGxlbWVudGF0aW9uKS4gQXMgYSB3b3JrYXJvdW5kIHRoZSB2b2x1bWUgaXMgb25seSBzYXZlZCBwZXJzaXN0ZW50bHkgd2hlbiB0aGUgcmFkaW8gc3RvcHMgYnV0IHRoZSB2b2x1bWUgb2J2aW91c2x5IGNhbid0IGJlIHJlY2VpdmVkIGFueW1vcmUgZnJvbSBkYnVzIHdoZW4gdGhlIHBsYXllciBoYXMgYmVlbiBhbHJlYWR5IHN0b3BwZWQgLi4uIFxuICAgIGxldCBsYXN0Vm9sdW1lOiBudW1iZXJcbiAgICBsZXQgbXB2SGFuZGxlcjogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlTXB2SGFuZGxlcj5cblxuICAgIGxldCBpbnN0YWxsYXRpb25JblByb2dyZXNzID0gZmFsc2VcblxuICAgIGNvbnN0IGFwcGxldERlZmluaXRpb24gPSBnZXRBcHBsZXREZWZpbml0aW9uKHtcbiAgICAgICAgYXBwbGV0X2lkOiBpbnN0YW5jZUlkLFxuICAgIH0pXG5cbiAgICBjb25zdCBwYW5lbCA9IHBhbmVsTWFuYWdlci5wYW5lbHMuZmluZChwYW5lbCA9PlxuICAgICAgICBwYW5lbD8ucGFuZWxJZCA9PT0gYXBwbGV0RGVmaW5pdGlvbi5wYW5lbElkXG4gICAgKVxuXG4gICAgcGFuZWwuY29ubmVjdCgnaWNvbi1zaXplLWNoYW5nZWQnLCAoKSA9PiBhcHBsZXRJY29uLnVwZGF0ZUljb25TaXplKCkpXG5cbiAgICBjb25zdCBhcHBsZXRJY29uID0gY3JlYXRlQXBwbGV0SWNvbih7XG4gICAgICAgIGxvY2F0aW9uTGFiZWw6IGFwcGxldERlZmluaXRpb24ubG9jYXRpb25fbGFiZWwsXG4gICAgICAgIHBhbmVsXG4gICAgfSlcblxuICAgIGNvbnN0IGFwcGxldExhYmVsID0gY3JlYXRlQXBwbGV0TGFiZWwoKVxuXG4gICAgY29uc3QgYXBwbGV0ID0gY3JlYXRlQXBwbGV0KHtcbiAgICAgICAgaWNvbjogYXBwbGV0SWNvbi5hY3RvcixcbiAgICAgICAgbGFiZWw6IGFwcGxldExhYmVsLmFjdG9yLFxuICAgICAgICBpbnN0YW5jZUlkLFxuICAgICAgICBvcmllbnRhdGlvbixcbiAgICAgICAgcGFuZWxIZWlnaHQsXG4gICAgICAgIG9uQ2xpY2s6IGhhbmRsZUFwcGxldENsaWNrZWQsXG4gICAgICAgIG9uU2Nyb2xsOiBoYW5kbGVTY3JvbGwsXG4gICAgICAgIG9uTWlkZGxlQ2xpY2s6ICgpID0+IG1wdkhhbmRsZXI/LnRvZ2dsZVBsYXlQYXVzZSgpLFxuICAgICAgICBvbkFwcGxldE1vdmVkOiAoKSA9PiBtcHZIYW5kbGVyPy5kZWFjdGl2YXRlQWxsTGlzdGVuZXIoKSxcbiAgICAgICAgb25BcHBsZXRSZW1vdmVkOiBoYW5kbGVBcHBsZXRSZW1vdmVkLFxuICAgICAgICBvblJpZ2h0Q2xpY2s6ICgpID0+IHBvcHVwTWVudT8uY2xvc2UoKVxuICAgIH0pXG5cbiAgICBjb25zdCBhcHBsZXRUb29sdGlwID0gY3JlYXRlQXBwbGV0VG9vbHRpcCh7XG4gICAgICAgIGFwcGxldCxcbiAgICAgICAgb3JpZW50YXRpb25cbiAgICB9KVxuXG4gICAgY29uc3QgY29uZmlncyA9IGNyZWF0ZUNvbmZpZyh7XG4gICAgICAgIHV1aWQ6IF9fbWV0YS51dWlkLFxuICAgICAgICBpbnN0YW5jZUlkLFxuXG4gICAgICAgIG9uSWNvbkNoYW5nZWQ6IGhhbmRsZUljb25UeXBlQ2hhbmdlZCxcbiAgICAgICAgb25JY29uQ29sb3JQbGF5aW5nQ2hhbmdlZDogKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICBhcHBsZXRJY29uLnNldENvbG9yV2hlblBsYXlpbmcoY29sb3IpXG4gICAgICAgIH0sXG4gICAgICAgIG9uSWNvbkNvbG9yUGF1c2VkQ2hhbmdlZDogKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICBhcHBsZXRJY29uLnNldENvbG9yV2hlblBhdXNlZChjb2xvcilcbiAgICAgICAgfSxcbiAgICAgICAgb25DaGFubmVsT25QYW5lbENoYW5nZWQ6IChjaGFubmVsT25QYW5lbCkgPT4ge1xuICAgICAgICAgICAgYXBwbGV0TGFiZWwuc2V0VmlzaWJpbGl0eShjaGFubmVsT25QYW5lbClcbiAgICAgICAgfSxcbiAgICAgICAgb25NeVN0YXRpb25zQ2hhbmdlZDogaGFuZGxlU3RhdGlvbnNVcGRhdGVkLFxuICAgIH0pXG5cbiAgICBjb25zdCBjaGFubmVsU3RvcmUgPSBuZXcgQ2hhbm5lbFN0b3JlKGNvbmZpZ3MudXNlclN0YXRpb25zKVxuXG4gICAgY29uc3QgY2hhbm5lbExpc3QgPSBjcmVhdGVDaGFubmVsTGlzdCh7XG4gICAgICAgIHN0YXRpb25OYW1lczogY2hhbm5lbFN0b3JlLmFjdGl2YXRlZENoYW5uZWxOYW1lcyxcbiAgICAgICAgb25DaGFubmVsQ2xpY2tlZDogaGFuZGxlQ2hhbm5lbENsaWNrZWRcbiAgICB9KVxuXG4gICAgY29uc3Qgdm9sdW1lU2xpZGVyID0gY3JlYXRlVm9sdW1lU2xpZGVyKHtcbiAgICAgICAgb25Wb2x1bWVDaGFuZ2VkOiAodm9sdW1lKSA9PiBtcHZIYW5kbGVyPy5zZXRWb2x1bWUodm9sdW1lKVxuICAgIH0pXG5cbiAgICBjb25zdCBwb3B1cE1lbnUgPSBjcmVhdGVQb3B1cE1lbnUoeyBsYXVuY2hlcjogYXBwbGV0LmFjdG9yIH0pXG4gICAgY29uc3QgaW5mb1NlY3Rpb24gPSBjcmVhdGVJbmZvU2VjdGlvbigpXG5cbiAgICAvL3Rvb2xiYXJcbiAgICBjb25zdCBwbGF5UGF1c2VCdG4gPSBjcmVhdGVQbGF5UGF1c2VCdXR0b24oe1xuICAgICAgICBvbkNsaWNrOiAoKSA9PiBtcHZIYW5kbGVyLnRvZ2dsZVBsYXlQYXVzZSgpXG4gICAgfSlcblxuICAgIGNvbnN0IHN0b3BCdG4gPSBjcmVhdGVTdG9wQnRuKHtcbiAgICAgICAgb25DbGljazogKCkgPT4gbXB2SGFuZGxlci5zdG9wKClcbiAgICB9KVxuXG4gICAgY29uc3QgZG93bmxvYWRCdG4gPSBjcmVhdGVEb3dubG9hZEJ1dHRvbih7XG4gICAgICAgIG9uQ2xpY2s6IGhhbmRsZURvd25sb2FkQnRuQ2xpY2tlZFxuICAgIH0pXG5cbiAgICBjb25zdCBjb3B5QnRuID0gY3JlYXRlQ29weUJ1dHRvbih7XG4gICAgICAgIG9uQ2xpY2s6ICgpID0+IGNvcHlUZXh0KG1wdkhhbmRsZXIuZ2V0Q3VycmVudFRpdGxlKCkpXG4gICAgfSlcblxuICAgIGNvbnN0IG1lZGlhQ29udHJvbFRvb2xiYXIgPSBjcmVhdGVNZWRpYUNvbnRyb2xUb29sYmFyKHtcbiAgICAgICAgY29udHJvbEJ0bnM6IFtwbGF5UGF1c2VCdG4uYWN0b3IsIGRvd25sb2FkQnRuLmFjdG9yLCBjb3B5QnRuLmFjdG9yLCBzdG9wQnRuLmFjdG9yXVxuICAgIH0pXG5cbiAgICBjb25zdCBzZWVrZXIgPSBjcmVhdGVTZWVrZXIoe1xuICAgICAgICBvblBvc2l0aW9uQ2hhbmdlZDogKHZhbHVlKSA9PiBtcHZIYW5kbGVyPy5zZXRQb3NpdGlvbih2YWx1ZSlcbiAgICB9KVxuXG4gICAgY29uc3QgcmFkaW9BY3RpdmVTZWN0aW9uID0gbmV3IEJveExheW91dCh7XG4gICAgICAgIHZlcnRpY2FsOiB0cnVlLFxuICAgICAgICB2aXNpYmxlOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgW1xuICAgICAgICBpbmZvU2VjdGlvbi5hY3RvcixcbiAgICAgICAgbWVkaWFDb250cm9sVG9vbGJhcixcbiAgICAgICAgdm9sdW1lU2xpZGVyLmFjdG9yLFxuICAgICAgICBzZWVrZXIuYWN0b3JcbiAgICBdLmZvckVhY2god2lkZ2V0ID0+IHtcbiAgICAgICAgcmFkaW9BY3RpdmVTZWN0aW9uLmFkZF9jaGlsZChjcmVhdGVTZXBhcmF0b3JNZW51SXRlbSgpKVxuICAgICAgICByYWRpb0FjdGl2ZVNlY3Rpb24uYWRkX2NoaWxkKHdpZGdldClcbiAgICB9KVxuXG4gICAgcG9wdXBNZW51LmFkZF9jaGlsZChjaGFubmVsTGlzdC5hY3RvcilcbiAgICBwb3B1cE1lbnUuYWRkX2NoaWxkKHJhZGlvQWN0aXZlU2VjdGlvbilcblxuICAgIG1wdkhhbmRsZXIgPSBjcmVhdGVNcHZIYW5kbGVyKHtcbiAgICAgICAgZ2V0SW5pdGlhbFZvbHVtZTogKCkgPT4geyByZXR1cm4gY29uZmlncy5pbml0aWFsVm9sdW1lIH0sXG4gICAgICAgIG9uVm9sdW1lQ2hhbmdlZDogaGFuZGxlVm9sdW1lQ2hhbmdlZCxcbiAgICAgICAgb25MZW5ndGhDaGFuZ2VkOiBoYW5sZGVMZW5ndGhDaGFuZ2VkLFxuICAgICAgICBvblBvc2l0aW9uQ2hhbmdlZDogaGFuZGxlUG9zaXRpb25DaGFuZ2VkLFxuICAgICAgICBjaGVja1VybFZhbGlkOiAodXJsKSA9PiBjaGFubmVsU3RvcmUuY2hlY2tVcmxWYWxpZCh1cmwpLFxuICAgICAgICBvblRpdGxlQ2hhbmdlZDogaGFuZGxlVGl0bGVDaGFuZ2VkLFxuICAgICAgICBvblBsYXliYWNrc3RhdHVzQ2hhbmdlZDogaGFuZGxlUGxheWJhY2tzdGF0dXNDaGFuZ2VkLFxuICAgICAgICBsYXN0VXJsOiBjb25maWdzLmxhc3RVcmwsXG4gICAgICAgIG9uVXJsQ2hhbmdlZDogaGFuZGxlVXJsQ2hhbmdlZFxuICAgIH0pXG5cbiAgICAvLyBDQUxMQkFDS1NcblxuICAgIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUFwcGxldENsaWNrZWQoKSB7XG5cbiAgICAgICAgaWYgKGluc3RhbGxhdGlvbkluUHJvZ3Jlc3MpIHJldHVyblxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpbnN0YWxsYXRpb25JblByb2dyZXNzID0gdHJ1ZVxuICAgICAgICAgICAgYXdhaXQgaW5zdGFsbE1wdldpdGhNcHJpcygpXG4gICAgICAgICAgICBwb3B1cE1lbnUudG9nZ2xlKClcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvblRleHQgPSBcIkNvdWxkbid0IHN0YXJ0IHRoZSBhcHBsZXQuIE1ha2Ugc3VyZSBtcHYgaXMgaW5zdGFsbGVkIGFuZCB0aGUgbXB2IG1wcmlzIHBsdWdpbiBzYXZlZCBpbiB0aGUgY29uZmlncyBmb2xkZXIuXCJcbiAgICAgICAgICAgIG5vdGlmeSh7IHRleHQ6IG5vdGlmaWNhdGlvblRleHQgfSlcbiAgICAgICAgICAgIGdsb2JhbC5sb2dFcnJvcihlcnJvcilcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGluc3RhbGxhdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlQXBwbGV0UmVtb3ZlZCgpIHtcbiAgICAgICAgbXB2SGFuZGxlcj8uZGVhY3RpdmF0ZUFsbExpc3RlbmVyKClcbiAgICAgICAgbXB2SGFuZGxlcj8uc3RvcCgpXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoc2Nyb2xsRGlyZWN0aW9uOiBpbXBvcnRzLmdpLkNsdXR0ZXIuU2Nyb2xsRGlyZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IHZvbHVtZUNoYW5nZSA9XG4gICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPT09IFNjcm9sbERpcmVjdGlvbi5VUCA/IFZPTFVNRV9ERUxUQSA6IC1WT0xVTUVfREVMVEFcbiAgICAgICAgbXB2SGFuZGxlci5pbmNyZWFzZURlY3JlYXNlVm9sdW1lKHZvbHVtZUNoYW5nZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVDaGFubmVsQ2xpY2tlZChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbFVybCA9IGNoYW5uZWxTdG9yZS5nZXRDaGFubmVsVXJsKG5hbWUpXG4gICAgICAgIG1wdkhhbmRsZXIuc2V0VXJsKGNoYW5uZWxVcmwpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlVGl0bGVDaGFuZ2VkKHRpdGxlOiBzdHJpbmcpIHtcbiAgICAgICAgaW5mb1NlY3Rpb24uc2V0U29uZ1RpdGxlKHRpdGxlKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVZvbHVtZUNoYW5nZWQodm9sdW1lOiBudW1iZXIgfCBudWxsKSB7XG4gICAgICAgIHZvbHVtZVNsaWRlci5zZXRWb2x1bWUodm9sdW1lKVxuICAgICAgICBhcHBsZXRUb29sdGlwLnNldFZvbHVtZSh2b2x1bWUpXG5cbiAgICAgICAgbGFzdFZvbHVtZSA9IHZvbHVtZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUljb25UeXBlQ2hhbmdlZChpY29uVHlwZTogSWNvblR5cGUpIHtcbiAgICAgICAgYXBwbGV0SWNvbi5zZXRJY29uVHlwZShpY29uVHlwZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVTdGF0aW9uc1VwZGF0ZWQoc3RhdGlvbnM6IENoYW5uZWxbXSkge1xuXG4gICAgICAgIGNvbnN0IHN0YXRpb25zQ2hhbmdlZCA9IGNoYW5uZWxTdG9yZS5jaGVja0xpc3RDaGFuZ2VkKHN0YXRpb25zKVxuXG4gICAgICAgIGlmICghc3RhdGlvbnNDaGFuZ2VkKSByZXR1cm5cblxuICAgICAgICBjaGFubmVsU3RvcmUuY2hhbm5lbExpc3QgPSBzdGF0aW9uc1xuICAgICAgICBjaGFubmVsTGlzdC5zZXRTdGF0aW9uTmFtZXMoY2hhbm5lbFN0b3JlLmFjdGl2YXRlZENoYW5uZWxOYW1lcylcblxuICAgICAgICBjb25zdCBsYXN0VXJsVmFsaWQgPSBjaGFubmVsU3RvcmUuY2hlY2tVcmxWYWxpZChjb25maWdzLmxhc3RVcmwpXG4gICAgICAgIGlmICghbGFzdFVybFZhbGlkKSBtcHZIYW5kbGVyLnN0b3AoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVBsYXliYWNrc3RhdHVzQ2hhbmdlZChwbGF5YmFja3N0YXR1czogQWR2YW5jZWRQbGF5YmFja1N0YXR1cykge1xuXG4gICAgICAgIGlmIChwbGF5YmFja3N0YXR1cyA9PT0gJ1N0b3BwZWQnKSB7XG4gICAgICAgICAgICByYWRpb0FjdGl2ZVNlY3Rpb24uaGlkZSgpXG4gICAgICAgICAgICBjb25maWdzLmxhc3RWb2x1bWUgPSBsYXN0Vm9sdW1lXG4gICAgICAgICAgICBjb25maWdzLmxhc3RVcmwgPSBudWxsXG4gICAgICAgICAgICBhcHBsZXRMYWJlbC5zZXRUZXh0KG51bGwpXG4gICAgICAgICAgICBoYW5kbGVWb2x1bWVDaGFuZ2VkKG51bGwpXG4gICAgICAgICAgICBwb3B1cE1lbnUuY2xvc2UoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBsYXliYWNrc3RhdHVzICE9PSAnU3RvcHBlZCcgJiYgIXJhZGlvQWN0aXZlU2VjdGlvbi52aXNpYmxlKVxuICAgICAgICAgICAgcmFkaW9BY3RpdmVTZWN0aW9uLnNob3coKVxuXG4gICAgICAgIGNoYW5uZWxMaXN0LnNldFBsYXliYWNrU3RhdHVzKHBsYXliYWNrc3RhdHVzKVxuICAgICAgICBhcHBsZXRJY29uLnNldFBsYXliYWNrU3RhdHVzKHBsYXliYWNrc3RhdHVzKVxuXG4gICAgICAgIGlmIChwbGF5YmFja3N0YXR1cyA9PT0gJ1BsYXlpbmcnIHx8IHBsYXliYWNrc3RhdHVzID09PSAnUGF1c2VkJykge1xuICAgICAgICAgICAgcGxheVBhdXNlQnRuLnNldFBsYXliYWNrU3RhdHVzKHBsYXliYWNrc3RhdHVzKVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVVcmxDaGFuZ2VkKHVybDogc3RyaW5nKSB7XG5cbiAgICAgICAgY29uc3QgY2hhbm5lbE5hbWUgPSB1cmwgPyBjaGFubmVsU3RvcmUuZ2V0Q2hhbm5lbE5hbWUodXJsKSA6IG51bGxcblxuICAgICAgICBhcHBsZXRMYWJlbC5zZXRUZXh0KGNoYW5uZWxOYW1lKVxuXG4gICAgICAgIGNoYW5uZWxMaXN0LnNldEN1cnJlbnRDaGFubmVsKGNoYW5uZWxOYW1lKVxuICAgICAgICBpbmZvU2VjdGlvbi5zZXRDaGFubmVsKGNoYW5uZWxOYW1lKVxuICAgICAgICBjb25maWdzLmxhc3RVcmwgPSB1cmxcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5sZGVMZW5ndGhDaGFuZ2VkKGxlbmd0aDogbnVtYmVyKSB7XG4gICAgICAgIHNlZWtlci5zZXRMZW5ndGgobGVuZ3RoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVBvc2l0aW9uQ2hhbmdlZChwb3NpdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIHNlZWtlcj8uc2V0UG9zaXRpb24ocG9zaXRpb24pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlRG93bmxvYWRCdG5DbGlja2VkKCkge1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gbXB2SGFuZGxlci5nZXRDdXJyZW50VGl0bGUoKVxuXG4gICAgICAgIGNvbnN0IGRvd25sb2FkUHJvY2VzcyA9IGRvd25sb2FkU29uZ0Zyb21Zb3V0dWJlKHtcbiAgICAgICAgICAgIGRvd25sb2FkRGlyOiBjb25maWdzLm11c2ljRG93bmxvYWREaXIsXG4gICAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICAgIG9uRG93bmxvYWRGaW5pc2hlZDogKHBhdGgpID0+IG5vdGlmeVlvdXR1YmVEb3dubG9hZEZpbmlzaGVkKHtcbiAgICAgICAgICAgICAgICBkb3dubG9hZFBhdGg6IHBhdGhcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb25Eb3dubG9hZEZhaWxlZDogbm90aWZ5WW91dHViZURvd25sb2FkRmFpbGVkXG4gICAgICAgIH0pXG5cbiAgICAgICAgbm90aWZ5WW91dHViZURvd25sb2FkU3RhcnRlZCh7XG4gICAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICAgIG9uQ2FuY2VsQ2xpY2tlZDogKCkgPT4gZG93bmxvYWRQcm9jZXNzLmNhbmNlbCgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGFwcGxldFxuXG59XG5cblxuXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n")}},__webpack_require__={d:(Q,F)=>{for(var U in F)__webpack_require__.o(F,U)&&!__webpack_require__.o(Q,U)&&Object.defineProperty(Q,U,{enumerable:!0,get:F[U]})},o:(Q,F)=>Object.prototype.hasOwnProperty.call(Q,F),r:Q=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})}},__webpack_exports__={};__webpack_modules__[6](0,__webpack_exports__,__webpack_require__),radioApplet=__webpack_exports__})();